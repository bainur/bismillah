  [1m[35m (792.0ms)[0m  [1m[35mCREATE DATABASE "test_db2" ENCODING = 'unicode'[0m
  [1m[35m (129.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (153.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2997034632337992540)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateAdminUsers (20161011184702)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (122.3ms)[0m  [1m[35mCREATE TABLE "admin_users" ("id" serial NOT NULL PRIMARY KEY, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (56.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_admin_users_on_email" ON "admin_users"  ("email")[0m
  [1m[35m (75.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_admin_users_on_reset_password_token" ON "admin_users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161011184702"]]
  [1m[35m (22.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateDelayedJobs (20161027190856)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "delayed_jobs"[0m
  [1m[35m (124.2ms)[0m  [1m[35mCREATE TABLE "delayed_jobs" ("id" serial NOT NULL PRIMARY KEY, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" timestamp, "locked_at" timestamp, "failed_at" timestamp, "locked_by" character varying, "queue" character varying, "created_at" timestamp, "updated_at" timestamp)[0m
  [1m[35m (64.2ms)[0m  [1m[35mCREATE  INDEX  "delayed_jobs_priority" ON "delayed_jobs"  ("priority", "run_at")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161027190856"]]
  [1m[35m (23.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20181102142200)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (126.7ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "byte_size" bigint NOT NULL, "checksum" character varying NOT NULL, "created_at" timestamp NOT NULL)[0m
  [1m[35m (175.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_active_storage_blobs_on_key" ON "active_storage_blobs"  ("key")[0m
  [1m[35m (108.3ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp NOT NULL)[0m
  [1m[35m (40.2ms)[0m  [1m[35mCREATE  INDEX  "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments"  ("blob_id")[0m
  [1m[35m (63.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_active_storage_attachments_uniqueness" ON "active_storage_attachments"  ("record_type", "record_id", "name", "blob_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20181102142200"]]
  [1m[35m (18.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateSettings (20200128183708)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (108.1ms)[0m  [1m[35mCREATE TABLE "settings" ("id" bigserial primary key, "key" character varying NOT NULL, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (54.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_settings_on_key" ON "settings"  ("key")[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200128183708"]]
  [1m[35m (26.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateExceptionHunterErrorGroups (20200716171440)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (10.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "pg_trgm"[0m
  [1m[35m (126.8ms)[0m  [1m[35mCREATE TABLE "exception_hunter_error_groups" ("id" bigserial primary key, "error_class_name" character varying NOT NULL, "message" character varying, "status" integer DEFAULT 0, "tags" text[] DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX  "index_exception_hunter_error_groups_on_message" ON "exception_hunter_error_groups" USING gin ("message" gin_trgm_ops)[0m
  [1m[35m (51.4ms)[0m  [1m[35mCREATE  INDEX  "index_exception_hunter_error_groups_on_status" ON "exception_hunter_error_groups"  ("status")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200716171440"]]
  [1m[35m (18.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateExceptionHunterErrors (20200716171441)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (100.0ms)[0m  [1m[35mCREATE TABLE "exception_hunter_errors" ("id" bigserial primary key, "class_name" character varying NOT NULL, "message" character varying, "occurred_at" timestamp NOT NULL, "environment_data" json, "custom_data" json, "user_data" json, "backtrace" character varying[] DEFAULT '{}', "error_group_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_ee1d3d35a2"
FOREIGN KEY ("error_group_id")
  REFERENCES "exception_hunter_error_groups" ("id")
)[0m
  [1m[35m (41.6ms)[0m  [1m[35mCREATE  INDEX  "index_exception_hunter_errors_on_error_group_id" ON "exception_hunter_errors"  ("error_group_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200716171441"]]
  [1m[35m (40.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeviseCreateUsers (20201123055514)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (107.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" character varying, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "allow_password_change" boolean DEFAULT FALSE, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "first_name" character varying DEFAULT '', "last_name" character varying DEFAULT '', "username" character varying DEFAULT '', "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (38.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (73.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201123055514"]]
  [1m[35m (25.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeviseTokenAuthFieldsUsers (20201123055601)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (259.5ms)[0m  [1m[35mALTER TABLE "users" ADD "provider" character varying DEFAULT 'email' NOT NULL, ADD "uid" character varying DEFAULT '' NOT NULL, ADD "tokens" json[0m
  [1m[35m (40.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_uid_and_provider" ON "users"  ("uid", "provider")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201123055601"]]
  [1m[35m (20.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-11-23 06:06:48.013553"], ["updated_at", "2020-11-23 06:06:48.013553"]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2997034632337992540)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/signup" for ::1 at 2020-11-23 13:13:51 +0700
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/api/v1/signup"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /home/bainur/.rvm/rubies/ruby-2.7.1/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
Started POST "/v1/api/users/signup" for ::1 at 2020-11-23 13:14:58 +0700
  
ActionController::RoutingError (No route matches [POST] "/v1/api/users/signup"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /home/bainur/.rvm/rubies/ruby-2.7.1/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /home/bainur/.rvm/rubies/ruby-2.7.1/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
Started POST "/v1/api/users/sign_up" for ::1 at 2020-11-23 13:15:33 +0700
  
ActionController::RoutingError (No route matches [POST] "/v1/api/users/sign_up"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
Started POST "/api/v1/users/sign_up" for ::1 at 2020-11-23 13:16:44 +0700
  
ActionController::RoutingError (No route matches [POST] "/api/v1/users/sign_up"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
Started GET "/" for ::1 at 2020-11-23 13:17:10 +0700
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/bainur/.rvm/gems/ruby-2.7.1/gems/railties-6.0.3.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/bainur/.rvm/gems/ruby-2.7.1/gems/railties-6.0.3.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 3.9ms | Allocations: 183)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms | Allocations: 878)


Started POST "/api/v1/users/sign_up" for ::1 at 2020-11-23 13:17:17 +0700
  
ActionController::RoutingError (No route matches [POST] "/api/v1/users/sign_up"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
Started GET "/" for ::1 at 2020-11-23 13:21:22 +0700
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/bainur/.rvm/gems/ruby-2.7.1/gems/railties-6.0.3.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/bainur/.rvm/gems/ruby-2.7.1/gems/railties-6.0.3.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 3.4ms | Allocations: 181)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms | Allocations: 724)


Started GET "/" for ::1 at 2020-11-23 13:21:24 +0700
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/bainur/.rvm/gems/ruby-2.7.1/gems/railties-6.0.3.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/bainur/.rvm/gems/ruby-2.7.1/gems/railties-6.0.3.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.1ms | Allocations: 7)
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 243)


Started POST "/api/v1/users/sign_up" for ::1 at 2020-11-23 13:40:16 +0700
  
ActionController::RoutingError (No route matches [POST] "/api/v1/users/sign_up"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
Started POST "/api/v1/users/sign_up" for ::1 at 2020-11-23 13:40:44 +0700
  
ActionController::RoutingError (No route matches [POST] "/api/v1/users/sign_up"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /home/bainur/.rvm/rubies/ruby-2.7.1/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
Started POST "/api/v1/users/" for ::1 at 2020-11-23 13:41:03 +0700
Processing by Api::V1::RegistrationsController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 823)



ActionController::ParameterMissing - param is missing or the value is empty: user:
  app/controllers/api/v1/registrations_controller.rb:10:in `sign_up_params'

Started POST "/api/v1/users/?=" for ::1 at 2020-11-23 13:42:08 +0700
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"mbainurb@gmail.com", "password"=>"[FILTERED]"}}
Filter chain halted as :check_json_request rendered or redirected
Completed 406 Not Acceptable in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 276)


Started POST "/api/v1/users/sign_up" for ::1 at 2020-11-23 13:42:16 +0700
  
ActionController::RoutingError (No route matches [POST] "/api/v1/users/sign_up"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
Started POST "/api/v1/users/" for ::1 at 2020-11-23 13:42:21 +0700
Processing by Api::V1::RegistrationsController#create as */*
  Parameters: {"user"=>{"email"=>"mbainurb@gmail.com", "password"=>"[FILTERED]"}}
Filter chain halted as :check_json_request rendered or redirected
Completed 406 Not Acceptable in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 251)


Started POST "/api/v1/users/" for ::1 at 2020-11-23 13:43:50 +0700
Processing by Api::V1::RegistrationsController#create as JSON
  Parameters: {"user"=>{"email"=>"mbainurb@gmail.com", "password"=>"[FILTERED]"}}
Filter chain halted as :check_json_request rendered or redirected
Completed 406 Not Acceptable in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 251)


Started POST "/api/v1/users/" for ::1 at 2020-11-23 13:44:34 +0700
Processing by Api::V1::RegistrationsController#create as JSON
  Parameters: {"user"=>{"email"=>"mbainurb@gmail.com", "password"=>"[FILTERED]"}}
Filter chain halted as :check_json_request rendered or redirected
Completed 406 Not Acceptable in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 251)


Started POST "/api/v1/users/" for ::1 at 2020-11-23 13:44:53 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------060055997176890077716303
Content-Disposition: form-data; name="user[email]"

mbainurb@gmail.com
----------------------------060055997176890077716303
Content-Disposition: form-data; name="user[password]"


----------------------------060055997176890077716303--


JSON::ParserError - 784: unexpected token at '----------------------------060055997176890077716303
Content-Disposition: form-data; name="user[email]"

mbainurb@gmail.com
----------------------------060055997176890077716303
Content-Disposition: form-data; name="user[password]"


----------------------------060055997176890077716303--
':

Started POST "/api/v1/users/" for ::1 at 2020-11-23 13:45:04 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------811320518285900547552724
Content-Disposition: form-data; name="user[email]"

mbainurb@gmail.com
----------------------------811320518285900547552724
Content-Disposition: form-data; name="user[password]"

123456
----------------------------811320518285900547552724--


JSON::ParserError - 784: unexpected token at '----------------------------811320518285900547552724
Content-Disposition: form-data; name="user[email]"

mbainurb@gmail.com
----------------------------811320518285900547552724
Content-Disposition: form-data; name="user[password]"

123456
----------------------------811320518285900547552724--
':

Started POST "/api/v1/users/" for ::1 at 2020-11-23 13:45:31 +0700
Error occurred while parsing request parameters.
Contents:

----------------------------650550272584532581711224
Content-Disposition: form-data; name="email"

mbainurb@gmail.com
----------------------------650550272584532581711224
Content-Disposition: form-data; name="user[password]"

123456
----------------------------650550272584532581711224--


JSON::ParserError - 784: unexpected token at '----------------------------650550272584532581711224
Content-Disposition: form-data; name="email"

mbainurb@gmail.com
----------------------------650550272584532581711224
Content-Disposition: form-data; name="user[password]"

123456
----------------------------650550272584532581711224--
':

Started POST "/api/v1/users/" for ::1 at 2020-11-23 13:46:30 +0700
Processing by Api::V1::RegistrationsController#create as JSON
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]", "username"=>"bainur1"}, "registration"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]", "username"=>"bainur1"}}}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["uid", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "username", "created_at", "updated_at", "uid") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "user1@example.com"], ["encrypted_password", "$2a$11$K6a2G4KPPeGyjo4IVwyDZuWeNeRg1T1eQ5.c32qXbiQs9cTgwV9GC"], ["username", "bainur1"], ["created_at", "2020-11-23 06:46:30.861899"], ["updated_at", "2020-11-23 06:46:30.861899"], ["uid", "user1@example.com"]]
  [1m[35m (19.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "tokens" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2020-11-23 06:46:30.965155"], ["tokens", "\"{\\\"VDM36pgZNO_BeCHBkDSPTw\\\":{\\\"token\\\":\\\"$2a$10$ItQmx.BC.4kkYynUM1T6k.Fphi/OIFlKmzPtBtZzlGo/hTojBlH8O\\\",\\\"expiry\\\":1669185990}}\""], ["id", 1]]
  [1m[35m (39.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 345ms (Views: 0.3ms | ActiveRecord: 66.9ms | Allocations: 33897)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-23 13:47:17 +0700
Processing by Api::V1::SessionsController#create as */*
Filter chain halted as :check_json_request rendered or redirected
Completed 406 Not Acceptable in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 299)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-23 13:47:34 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"session"=>{}}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 625)



ActionController::ParameterMissing - param is missing or the value is empty: user:
  app/controllers/api/v1/sessions_controller.rb:10:in `resource_params'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-23 13:47:54 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"VDM36pgZNO_BeCHBkDSPTw\\\":{\\\"token\\\":\\\"$2a$10$ItQmx.BC.4kkYynUM1T6k.Fphi/OIFlKmzPtBtZzlGo/hTojBlH8O\\\",\\\"expiry\\\":1669185990},\\\"c_uZjXErOMGABscd3iInVQ\\\":{\\\"token\\\":\\\"$2a$10$yThIkL3TTZ7YR6R2ieTMRe9vsT6mipokX4WIEBdCNU/3wjcWiGCKy\\\",\\\"expiry\\\":1669186074}}\""], ["updated_at", "2020-11-23 06:47:54.792824"], ["id", 1]]
  [1m[35m (47.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "current_sign_in_ip" = $4, "last_sign_in_ip" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["sign_in_count", 1], ["current_sign_in_at", "2020-11-23 06:47:54.844734"], ["last_sign_in_at", "2020-11-23 06:47:54.844734"], ["current_sign_in_ip", "::1/128"], ["last_sign_in_ip", "::1/128"], ["updated_at", "2020-11-23 06:47:54.845099"], ["id", 1]]
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.2ms | ActiveRecord: 54.6ms | Allocations: 14871)


Started POST "/api/v1/users/" for ::1 at 2020-11-23 13:48:35 +0700
Processing by Api::V1::RegistrationsController#create as JSON
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]", "username"=>"bainur1", "first_name"=>"inu", "last_name"=>"inulast"}, "registration"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]", "username"=>"bainur1", "first_name"=>"inu", "last_name"=>"inulast"}}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["uid", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Entity in 163ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 8709)


Started POST "/api/v1/users/" for ::1 at 2020-11-23 13:48:51 +0700
Processing by Api::V1::RegistrationsController#create as JSON
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]", "username"=>"bainur1", "first_name"=>"inu", "last_name"=>"inulast"}, "registration"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]", "username"=>"bainur1", "first_name"=>"inu", "last_name"=>"inulast"}}}
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["uid", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Entity in 156ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 8554)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-23 14:00:50 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"VDM36pgZNO_BeCHBkDSPTw\\\":{\\\"token\\\":\\\"$2a$10$ItQmx.BC.4kkYynUM1T6k.Fphi/OIFlKmzPtBtZzlGo/hTojBlH8O\\\",\\\"expiry\\\":1669185990},\\\"c_uZjXErOMGABscd3iInVQ\\\":{\\\"token\\\":\\\"$2a$10$yThIkL3TTZ7YR6R2ieTMRe9vsT6mipokX4WIEBdCNU/3wjcWiGCKy\\\",\\\"expiry\\\":1669186074},\\\"gsElYn1q3fL_7oYQe3inCA\\\":{\\\"token\\\":\\\"$2a$10$St7sM4n5QXTnQ0.LKudX1OMVGpRJVRv0zLRQ0XRMU1fcJXaZZkeSG\\\",\\\"expiry\\\":1669186850}}\""], ["updated_at", "2020-11-23 07:00:50.758254"], ["id", 1]]
  [1m[35m (30.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["sign_in_count", 2], ["current_sign_in_at", "2020-11-23 07:00:50.792517"], ["updated_at", "2020-11-23 07:00:50.792904"], ["id", 1]]
  [1m[35m (57.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 329ms (Views: 0.2ms | ActiveRecord: 89.8ms | Allocations: 14937)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-23 14:06:26 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"VDM36pgZNO_BeCHBkDSPTw\\\":{\\\"token\\\":\\\"$2a$10$ItQmx.BC.4kkYynUM1T6k.Fphi/OIFlKmzPtBtZzlGo/hTojBlH8O\\\",\\\"expiry\\\":1669185990},\\\"c_uZjXErOMGABscd3iInVQ\\\":{\\\"token\\\":\\\"$2a$10$yThIkL3TTZ7YR6R2ieTMRe9vsT6mipokX4WIEBdCNU/3wjcWiGCKy\\\",\\\"expiry\\\":1669186074},\\\"gsElYn1q3fL_7oYQe3inCA\\\":{\\\"token\\\":\\\"$2a$10$St7sM4n5QXTnQ0.LKudX1OMVGpRJVRv0zLRQ0XRMU1fcJXaZZkeSG\\\",\\\"expiry\\\":1669186850},\\\"hIrdiWZMUEnGFFaSQwLtpA\\\":{\\\"token\\\":\\\"$2a$10$EmmM7bup6vqbnETNmjIXVe52uhsuMHVI7Na4Jr32T1lW/BOH947vG\\\",\\\"expiry\\\":1669187187}}\""], ["updated_at", "2020-11-23 07:06:27.154254"], ["id", 1]]
  [1m[35m (20.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (2.0ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 3], ["current_sign_in_at", "2020-11-23 07:06:27.180839"], ["last_sign_in_at", "2020-11-23 07:00:50.792517"], ["updated_at", "2020-11-23 07:06:27.181464"], ["id", 1]]
  [1m[35m (9.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 356ms (Views: 8.5ms | ActiveRecord: 35.9ms | Allocations: 15001)


Started GET "/api/v1/users" for ::1 at 2020-11-23 14:06:27 +0700
  
ActionController::RoutingError (No route matches [GET] "/api/v1/users"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /home/bainur/.rvm/rubies/ruby-2.7.1/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-23 14:07:18 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"VDM36pgZNO_BeCHBkDSPTw\\\":{\\\"token\\\":\\\"$2a$10$ItQmx.BC.4kkYynUM1T6k.Fphi/OIFlKmzPtBtZzlGo/hTojBlH8O\\\",\\\"expiry\\\":1669185990},\\\"c_uZjXErOMGABscd3iInVQ\\\":{\\\"token\\\":\\\"$2a$10$yThIkL3TTZ7YR6R2ieTMRe9vsT6mipokX4WIEBdCNU/3wjcWiGCKy\\\",\\\"expiry\\\":1669186074},\\\"gsElYn1q3fL_7oYQe3inCA\\\":{\\\"token\\\":\\\"$2a$10$St7sM4n5QXTnQ0.LKudX1OMVGpRJVRv0zLRQ0XRMU1fcJXaZZkeSG\\\",\\\"expiry\\\":1669186850},\\\"hIrdiWZMUEnGFFaSQwLtpA\\\":{\\\"token\\\":\\\"$2a$10$EmmM7bup6vqbnETNmjIXVe52uhsuMHVI7Na4Jr32T1lW/BOH947vG\\\",\\\"expiry\\\":1669187187},\\\"O4HuonaTIwYROrhkgkGyAA\\\":{\\\"token\\\":\\\"$2a$10$MSB98uQoV3V2Wr2s7dsmoOw.VKEyfO7IzfnC0l2iqrrobe9bRmGki\\\",\\\"expiry\\\":1669187238}}\""], ["updated_at", "2020-11-23 07:07:18.470640"], ["id", 1]]
  [1m[35m (39.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 4], ["current_sign_in_at", "2020-11-23 07:07:18.514041"], ["last_sign_in_at", "2020-11-23 07:06:27.180839"], ["updated_at", "2020-11-23 07:07:18.514548"], ["id", 1]]
  [1m[35m (59.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 0.3ms | ActiveRecord: 101.3ms | Allocations: 14880)


Started GET "/api/v1/user" for ::1 at 2020-11-23 14:07:18 +0700
Processing by Api::V1::UsersController#show as JSON
Filter chain halted as :authenticate_user! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 407)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-23 14:09:11 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"c_uZjXErOMGABscd3iInVQ\\\":{\\\"token\\\":\\\"$2a$10$yThIkL3TTZ7YR6R2ieTMRe9vsT6mipokX4WIEBdCNU/3wjcWiGCKy\\\",\\\"expiry\\\":1669186074},\\\"gsElYn1q3fL_7oYQe3inCA\\\":{\\\"token\\\":\\\"$2a$10$St7sM4n5QXTnQ0.LKudX1OMVGpRJVRv0zLRQ0XRMU1fcJXaZZkeSG\\\",\\\"expiry\\\":1669186850},\\\"hIrdiWZMUEnGFFaSQwLtpA\\\":{\\\"token\\\":\\\"$2a$10$EmmM7bup6vqbnETNmjIXVe52uhsuMHVI7Na4Jr32T1lW/BOH947vG\\\",\\\"expiry\\\":1669187187},\\\"O4HuonaTIwYROrhkgkGyAA\\\":{\\\"token\\\":\\\"$2a$10$MSB98uQoV3V2Wr2s7dsmoOw.VKEyfO7IzfnC0l2iqrrobe9bRmGki\\\",\\\"expiry\\\":1669187238},\\\"VzZ3IE9XkaTIv4uCV6s7yQ\\\":{\\\"token\\\":\\\"$2a$10$d8Of/cU/9ZeKjpqkUjCsf.yLRcrfBzbHELe7Dab71DbBuYI1xKwMG\\\",\\\"expiry\\\":1669187351}}\""], ["updated_at", "2020-11-23 07:09:11.411574"], ["id", 1]]
  [1m[35m (64.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 5], ["current_sign_in_at", "2020-11-23 07:09:11.482319"], ["last_sign_in_at", "2020-11-23 07:07:18.514041"], ["updated_at", "2020-11-23 07:09:11.482953"], ["id", 1]]
  [1m[35m (23.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 336ms (Views: 0.2ms | ActiveRecord: 90.0ms | Allocations: 15033)


Started GET "/api/v1/user" for ::1 at 2020-11-23 14:09:11 +0700
Processing by Api::V1::UsersController#show as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  Rendering api/v1/users/show.json.jbuilder
  Rendered api/v1/users/_info.json.jbuilder (Duration: 0.3ms | Allocations: 94)
  Rendered api/v1/users/show.json.jbuilder (Duration: 1.0ms | Allocations: 465)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 95ms (Views: 1.7ms | ActiveRecord: 0.5ms | Allocations: 10003)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-23 14:09:30 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"gsElYn1q3fL_7oYQe3inCA\\\":{\\\"token\\\":\\\"$2a$10$St7sM4n5QXTnQ0.LKudX1OMVGpRJVRv0zLRQ0XRMU1fcJXaZZkeSG\\\",\\\"expiry\\\":1669186850},\\\"hIrdiWZMUEnGFFaSQwLtpA\\\":{\\\"token\\\":\\\"$2a$10$EmmM7bup6vqbnETNmjIXVe52uhsuMHVI7Na4Jr32T1lW/BOH947vG\\\",\\\"expiry\\\":1669187187},\\\"O4HuonaTIwYROrhkgkGyAA\\\":{\\\"token\\\":\\\"$2a$10$MSB98uQoV3V2Wr2s7dsmoOw.VKEyfO7IzfnC0l2iqrrobe9bRmGki\\\",\\\"expiry\\\":1669187238},\\\"VzZ3IE9XkaTIv4uCV6s7yQ\\\":{\\\"token\\\":\\\"$2a$10$d8Of/cU/9ZeKjpqkUjCsf.yLRcrfBzbHELe7Dab71DbBuYI1xKwMG\\\",\\\"expiry\\\":1669187351},\\\"NP_EYXQwlTAY0OqUUHY9Og\\\":{\\\"token\\\":\\\"$2a$10$r7U5STmtx2..uak6hWVhuuSE3QySiL6MDcgfL81qXKerLIAZKtgBO\\\",\\\"expiry\\\":1669187371}}\""], ["updated_at", "2020-11-23 07:09:31.097330"], ["id", 1]]
  [1m[35m (70.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 6], ["current_sign_in_at", "2020-11-23 07:09:31.172342"], ["last_sign_in_at", "2020-11-23 07:09:11.482319"], ["updated_at", "2020-11-23 07:09:31.172903"], ["id", 1]]
  [1m[35m (71.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 410ms (Views: 0.2ms | ActiveRecord: 145.5ms | Allocations: 15039)


Started GET "/api/v1/user" for ::1 at 2020-11-23 14:09:31 +0700
Processing by Api::V1::UsersController#show as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  Rendering api/v1/users/show.json.jbuilder
  Rendered api/v1/users/_info.json.jbuilder (Duration: 0.1ms | Allocations: 30)
  Rendered api/v1/users/show.json.jbuilder (Duration: 0.4ms | Allocations: 190)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 85ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 3644)


Started GET "/posts" for ::1 at 2020-11-23 14:48:13 +0700
  
ActionController::RoutingError (No route matches [GET] "/posts"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from <main> at bin/rails:4)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from <main> at bin/rails:4)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from <main> at bin/rails:4)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from <main> at bin/rails:4)
Overwriting existing field _id in class Product.
MONGODB | Topology type 'unknown' initializing.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Server localhost:27017 initializing.
MONGODB | Waiting for up to 30.00 seconds for servers to be scanned: #<Cluster topology=Unknown[localhost:27017] servers=[#<Server address=localhost:27017 UNKNOWN>]>
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
Overwriting existing field _id in class Product.
MONGODB | Topology type 'unknown' initializing.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Server localhost:27017 initializing.
MONGODB | Waiting for up to 30.00 seconds for servers to be scanned: #<Cluster topology=Unknown[localhost:27017] servers=[#<Server address=localhost:27017 UNKNOWN>]>
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'standalone'.
MONGODB | Topology type 'Unknown' changed to type 'Single'.
Overwriting existing field _id in class Product.
MONGODB | Topology type 'unknown' initializing.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Server localhost:27017 initializing.
MONGODB | Waiting for up to 30.00 seconds for servers to be scanned: #<Cluster topology=Unknown[localhost:27017] servers=[#<Server address=localhost:27017 UNKNOWN>]>
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'standalone'.
MONGODB | Topology type 'Unknown' changed to type 'Single'.
Overwriting existing field _id in class Product.
MONGODB | Topology type 'unknown' initializing.
MONGODB | There was a change in the members of the 'Unknown' topology.
MONGODB | Server localhost:27017 initializing.
MONGODB | Waiting for up to 30.00 seconds for servers to be scanned: #<Cluster topology=Unknown[localhost:27017] servers=[#<Server address=localhost:27017 UNKNOWN>]>
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'standalone'.
MONGODB | Topology type 'Unknown' changed to type 'Single'.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: EOFError: end of file reached (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'standalone' to 'unknown'.
MONGODB | There was a change in the members of the 'Single' topology.
MONGODB | Error running ismaster on localhost:27017: Mongo::Error::SocketError: Errno::ECONNREFUSED: Connection refused - connect(2) for 127.0.0.1:27017 (for 127.0.0.1:27017 (no TLS)) (on localhost:27017)
MONGODB | Server description for localhost:27017 changed from 'unknown' to 'unknown'.
MONGODB | There was a change in the members of the 'Single' topology.
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2997034632337992540)[0m
  [1m[35m (22.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateOrders (20201124060743)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (446.7ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "number" character varying, "user_id" bigint NOT NULL, "status" character varying, "total_price_items" decimal, "total_price_delivery" decimal, "total_all_price" decimal, "receiver_name" character varying, "receiver_phone_number" character varying, "receiver_mobile_number" character varying, "receiver_state" character varying, "receiver_city" character varying, "receiver_address" text, "receiver_postal_code" character varying, "destination_code" character varying, "service_delivery" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f868b47f6a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (42.3ms)[0m  [1m[35mCREATE  INDEX  "index_orders_on_user_id" ON "orders"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201124060743"]]
  [1m[35m (20.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateShoppingCarts (20201124060756)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (102.3ms)[0m  [1m[35mCREATE TABLE "shopping_carts" ("id" bigserial primary key, "user_id" bigint NOT NULL, "order_id" bigint NOT NULL, "delivery_method" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8228391db2"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_c05ef90b29"
FOREIGN KEY ("order_id")
  REFERENCES "orders" ("id")
)[0m
  [1m[35m (61.6ms)[0m  [1m[35mCREATE  INDEX  "index_shopping_carts_on_user_id" ON "shopping_carts"  ("user_id")[0m
  [1m[35m (42.3ms)[0m  [1m[35mCREATE  INDEX  "index_shopping_carts_on_order_id" ON "shopping_carts"  ("order_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201124060756"]]
  [1m[35m (18.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateShoppingCartItems (20201124060805)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (126.3ms)[0m  [1m[35mCREATE TABLE "shopping_cart_items" ("id" bigserial primary key, "owner_id" integer, "owner_type" character varying, "quantity" integer, "item_id" integer, "item_type" character varying, "price_currency" character varying, "price_cents" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201124060805"]]
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (27.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2997034632337992540)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:22:47 +0700
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (52.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"hIrdiWZMUEnGFFaSQwLtpA\\\":{\\\"token\\\":\\\"$2a$10$EmmM7bup6vqbnETNmjIXVe52uhsuMHVI7Na4Jr32T1lW/BOH947vG\\\",\\\"expiry\\\":1669187187},\\\"O4HuonaTIwYROrhkgkGyAA\\\":{\\\"token\\\":\\\"$2a$10$MSB98uQoV3V2Wr2s7dsmoOw.VKEyfO7IzfnC0l2iqrrobe9bRmGki\\\",\\\"expiry\\\":1669187238},\\\"VzZ3IE9XkaTIv4uCV6s7yQ\\\":{\\\"token\\\":\\\"$2a$10$d8Of/cU/9ZeKjpqkUjCsf.yLRcrfBzbHELe7Dab71DbBuYI1xKwMG\\\",\\\"expiry\\\":1669187351},\\\"NP_EYXQwlTAY0OqUUHY9Og\\\":{\\\"token\\\":\\\"$2a$10$r7U5STmtx2..uak6hWVhuuSE3QySiL6MDcgfL81qXKerLIAZKtgBO\\\",\\\"expiry\\\":1669187371},\\\"PtWW6YOn5CfrliTgOZsphw\\\":{\\\"token\\\":\\\"$2a$10$7UvFHyFhKxF3HrstZTDgSeDaik.yNtFLOZGZPHgeCpum0VK.hwZSC\\\",\\\"expiry\\\":1669270967}}\""], ["updated_at", "2020-11-24 06:22:47.916466"], ["id", 1]]
  [1m[35m (21.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 7], ["current_sign_in_at", "2020-11-24 06:22:47.948454"], ["last_sign_in_at", "2020-11-23 07:09:31.172342"], ["updated_at", "2020-11-24 06:22:47.949016"], ["id", 1]]
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 357ms (Views: 0.2ms | ActiveRecord: 89.0ms | Allocations: 27455)


Started POST "/api/v1/add_cart_item" for ::1 at 2020-11-24 13:22:48 +0700
  
ActionController::RoutingError (No route matches [POST] "/api/v1/add_cart_item"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:23:47 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"O4HuonaTIwYROrhkgkGyAA\\\":{\\\"token\\\":\\\"$2a$10$MSB98uQoV3V2Wr2s7dsmoOw.VKEyfO7IzfnC0l2iqrrobe9bRmGki\\\",\\\"expiry\\\":1669187238},\\\"VzZ3IE9XkaTIv4uCV6s7yQ\\\":{\\\"token\\\":\\\"$2a$10$d8Of/cU/9ZeKjpqkUjCsf.yLRcrfBzbHELe7Dab71DbBuYI1xKwMG\\\",\\\"expiry\\\":1669187351},\\\"NP_EYXQwlTAY0OqUUHY9Og\\\":{\\\"token\\\":\\\"$2a$10$r7U5STmtx2..uak6hWVhuuSE3QySiL6MDcgfL81qXKerLIAZKtgBO\\\",\\\"expiry\\\":1669187371},\\\"PtWW6YOn5CfrliTgOZsphw\\\":{\\\"token\\\":\\\"$2a$10$7UvFHyFhKxF3HrstZTDgSeDaik.yNtFLOZGZPHgeCpum0VK.hwZSC\\\",\\\"expiry\\\":1669270967},\\\"bztQnyNT0jIfMXK7b7_X9Q\\\":{\\\"token\\\":\\\"$2a$10$MdGSRn4Z5fq2PIjcIDbtxuNo188s4N9LwYU0p51XjsotktPQb.Wkm\\\",\\\"expiry\\\":1669271027}}\""], ["updated_at", "2020-11-24 06:23:47.508263"], ["id", 1]]
  [1m[35m (18.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 8], ["current_sign_in_at", "2020-11-24 06:23:47.532703"], ["last_sign_in_at", "2020-11-24 06:22:47.948454"], ["updated_at", "2020-11-24 06:23:47.533383"], ["id", 1]]
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.2ms | ActiveRecord: 31.5ms | Allocations: 25812)


Started POST "/api/v1/add_cart_item" for ::1 at 2020-11-24 13:23:47 +0700
  
ActionController::RoutingError (No route matches [POST] "/api/v1/add_cart_item"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:23:59 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"VzZ3IE9XkaTIv4uCV6s7yQ\\\":{\\\"token\\\":\\\"$2a$10$d8Of/cU/9ZeKjpqkUjCsf.yLRcrfBzbHELe7Dab71DbBuYI1xKwMG\\\",\\\"expiry\\\":1669187351},\\\"NP_EYXQwlTAY0OqUUHY9Og\\\":{\\\"token\\\":\\\"$2a$10$r7U5STmtx2..uak6hWVhuuSE3QySiL6MDcgfL81qXKerLIAZKtgBO\\\",\\\"expiry\\\":1669187371},\\\"PtWW6YOn5CfrliTgOZsphw\\\":{\\\"token\\\":\\\"$2a$10$7UvFHyFhKxF3HrstZTDgSeDaik.yNtFLOZGZPHgeCpum0VK.hwZSC\\\",\\\"expiry\\\":1669270967},\\\"bztQnyNT0jIfMXK7b7_X9Q\\\":{\\\"token\\\":\\\"$2a$10$MdGSRn4Z5fq2PIjcIDbtxuNo188s4N9LwYU0p51XjsotktPQb.Wkm\\\",\\\"expiry\\\":1669271027},\\\"ZDP4gM_BKmDGauLvFJdAtQ\\\":{\\\"token\\\":\\\"$2a$10$vUXwdo8I.0c4t/NuSZdE7u0hKoVyeDEe62jhukEu/EtxOT5DL47JO\\\",\\\"expiry\\\":1669271039}}\""], ["updated_at", "2020-11-24 06:23:59.985418"], ["id", 1]]
  [1m[35m (18.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 9], ["current_sign_in_at", "2020-11-24 06:24:00.007890"], ["last_sign_in_at", "2020-11-24 06:23:47.532703"], ["updated_at", "2020-11-24 06:24:00.010434"], ["id", 1]]
  [1m[35m (58.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.2ms | ActiveRecord: 78.7ms | Allocations: 15041)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 13:24:00 +0700

AbstractController::ActionNotFound - The action 'add_to_cart' could not be found for Api::V1::CartsController:

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:25:11 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"NP_EYXQwlTAY0OqUUHY9Og\\\":{\\\"token\\\":\\\"$2a$10$r7U5STmtx2..uak6hWVhuuSE3QySiL6MDcgfL81qXKerLIAZKtgBO\\\",\\\"expiry\\\":1669187371},\\\"PtWW6YOn5CfrliTgOZsphw\\\":{\\\"token\\\":\\\"$2a$10$7UvFHyFhKxF3HrstZTDgSeDaik.yNtFLOZGZPHgeCpum0VK.hwZSC\\\",\\\"expiry\\\":1669270967},\\\"bztQnyNT0jIfMXK7b7_X9Q\\\":{\\\"token\\\":\\\"$2a$10$MdGSRn4Z5fq2PIjcIDbtxuNo188s4N9LwYU0p51XjsotktPQb.Wkm\\\",\\\"expiry\\\":1669271027},\\\"ZDP4gM_BKmDGauLvFJdAtQ\\\":{\\\"token\\\":\\\"$2a$10$vUXwdo8I.0c4t/NuSZdE7u0hKoVyeDEe62jhukEu/EtxOT5DL47JO\\\",\\\"expiry\\\":1669271039},\\\"x8yTzXdMMuv0xb9TyktV4g\\\":{\\\"token\\\":\\\"$2a$10$gAv1jbkSZG6qUqajohkQDem66jcLt4eRqcT1rg/YIwgLOpz1.tVdq\\\",\\\"expiry\\\":1669271112}}\""], ["updated_at", "2020-11-24 06:25:12.051717"], ["id", 1]]
  [1m[35m (17.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 10], ["current_sign_in_at", "2020-11-24 06:25:12.073107"], ["last_sign_in_at", "2020-11-24 06:24:00.007890"], ["updated_at", "2020-11-24 06:25:12.073582"], ["id", 1]]
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.3ms | ActiveRecord: 28.4ms | Allocations: 25843)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 13:25:12 +0700
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]

AbstractController::ActionNotFound - The action 'add_to_cart' could not be found for Api::V1::CartsController:

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:25:38 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"PtWW6YOn5CfrliTgOZsphw\\\":{\\\"token\\\":\\\"$2a$10$7UvFHyFhKxF3HrstZTDgSeDaik.yNtFLOZGZPHgeCpum0VK.hwZSC\\\",\\\"expiry\\\":1669270967},\\\"bztQnyNT0jIfMXK7b7_X9Q\\\":{\\\"token\\\":\\\"$2a$10$MdGSRn4Z5fq2PIjcIDbtxuNo188s4N9LwYU0p51XjsotktPQb.Wkm\\\",\\\"expiry\\\":1669271027},\\\"ZDP4gM_BKmDGauLvFJdAtQ\\\":{\\\"token\\\":\\\"$2a$10$vUXwdo8I.0c4t/NuSZdE7u0hKoVyeDEe62jhukEu/EtxOT5DL47JO\\\",\\\"expiry\\\":1669271039},\\\"x8yTzXdMMuv0xb9TyktV4g\\\":{\\\"token\\\":\\\"$2a$10$gAv1jbkSZG6qUqajohkQDem66jcLt4eRqcT1rg/YIwgLOpz1.tVdq\\\",\\\"expiry\\\":1669271112},\\\"CMPqcfTr8dzhFB5IH3-KZg\\\":{\\\"token\\\":\\\"$2a$10$O.FWux.1h/9oE9AJqQn0deyRxffrB1LBdg.A5KNJE.pSKxmMnIKDm\\\",\\\"expiry\\\":1669271138}}\""], ["updated_at", "2020-11-24 06:25:38.639968"], ["id", 1]]
  [1m[35m (21.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 11], ["current_sign_in_at", "2020-11-24 06:25:38.664948"], ["last_sign_in_at", "2020-11-24 06:25:12.073107"], ["updated_at", "2020-11-24 06:25:38.665455"], ["id", 1]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.2ms | ActiveRecord: 31.1ms | Allocations: 25756)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 13:25:38 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
Filter chain halted as :check_json_request rendered or redirected
Completed 406 Not Acceptable in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 288)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:29:25 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"bztQnyNT0jIfMXK7b7_X9Q\\\":{\\\"token\\\":\\\"$2a$10$MdGSRn4Z5fq2PIjcIDbtxuNo188s4N9LwYU0p51XjsotktPQb.Wkm\\\",\\\"expiry\\\":1669271027},\\\"ZDP4gM_BKmDGauLvFJdAtQ\\\":{\\\"token\\\":\\\"$2a$10$vUXwdo8I.0c4t/NuSZdE7u0hKoVyeDEe62jhukEu/EtxOT5DL47JO\\\",\\\"expiry\\\":1669271039},\\\"x8yTzXdMMuv0xb9TyktV4g\\\":{\\\"token\\\":\\\"$2a$10$gAv1jbkSZG6qUqajohkQDem66jcLt4eRqcT1rg/YIwgLOpz1.tVdq\\\",\\\"expiry\\\":1669271112},\\\"CMPqcfTr8dzhFB5IH3-KZg\\\":{\\\"token\\\":\\\"$2a$10$O.FWux.1h/9oE9AJqQn0deyRxffrB1LBdg.A5KNJE.pSKxmMnIKDm\\\",\\\"expiry\\\":1669271138},\\\"0t7cyyocUxayJT95Rx0jYw\\\":{\\\"token\\\":\\\"$2a$10$C2WuXlKIU5BfIC7/HK0k6ObywSgANaxjdm8q8UJhqp.4GPJQUhqkW\\\",\\\"expiry\\\":1669271366}}\""], ["updated_at", "2020-11-24 06:29:26.101150"], ["id", 1]]
  [1m[35m (17.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 12], ["current_sign_in_at", "2020-11-24 06:29:26.122142"], ["last_sign_in_at", "2020-11-24 06:25:38.664948"], ["updated_at", "2020-11-24 06:29:26.122615"], ["id", 1]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.2ms | ActiveRecord: 27.4ms | Allocations: 25771)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 13:29:26 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{"product"=>{"product_id"=>1, "qty"=>1}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 222ms (ActiveRecord: 0.3ms | Allocations: 92393)



NoMethodError - undefined method `auth_user' for #<Api::V1::CartsController:0x00007fe27c0f9c70>:

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:29:51 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"ZDP4gM_BKmDGauLvFJdAtQ\\\":{\\\"token\\\":\\\"$2a$10$vUXwdo8I.0c4t/NuSZdE7u0hKoVyeDEe62jhukEu/EtxOT5DL47JO\\\",\\\"expiry\\\":1669271039},\\\"x8yTzXdMMuv0xb9TyktV4g\\\":{\\\"token\\\":\\\"$2a$10$gAv1jbkSZG6qUqajohkQDem66jcLt4eRqcT1rg/YIwgLOpz1.tVdq\\\",\\\"expiry\\\":1669271112},\\\"CMPqcfTr8dzhFB5IH3-KZg\\\":{\\\"token\\\":\\\"$2a$10$O.FWux.1h/9oE9AJqQn0deyRxffrB1LBdg.A5KNJE.pSKxmMnIKDm\\\",\\\"expiry\\\":1669271138},\\\"0t7cyyocUxayJT95Rx0jYw\\\":{\\\"token\\\":\\\"$2a$10$C2WuXlKIU5BfIC7/HK0k6ObywSgANaxjdm8q8UJhqp.4GPJQUhqkW\\\",\\\"expiry\\\":1669271366},\\\"ISLeXeAlopFY5ShFFKfk3g\\\":{\\\"token\\\":\\\"$2a$10$6rS.N.8CtaGJWQ9z5xY6o.2I1hwYolfsvAmkLrYaTDVjJ60h8KFny\\\",\\\"expiry\\\":1669271391}}\""], ["updated_at", "2020-11-24 06:29:51.401750"], ["id", 1]]
  [1m[35m (47.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 13], ["current_sign_in_at", "2020-11-24 06:29:51.452509"], ["last_sign_in_at", "2020-11-24 06:29:26.122142"], ["updated_at", "2020-11-24 06:29:51.453290"], ["id", 1]]
  [1m[35m (48.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.2ms | ActiveRecord: 97.1ms | Allocations: 15042)


Started GET "/api/v1/user" for ::1 at 2020-11-24 13:29:51 +0700
Processing by Api::V1::UsersController#show as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  Rendering api/v1/users/show.json.jbuilder
  Rendered api/v1/users/_info.json.jbuilder (Duration: 0.2ms | Allocations: 94)
  Rendered api/v1/users/show.json.jbuilder (Duration: 0.9ms | Allocations: 466)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 135ms (Views: 2.2ms | ActiveRecord: 0.5ms | Allocations: 4559)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:30:00 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"x8yTzXdMMuv0xb9TyktV4g\\\":{\\\"token\\\":\\\"$2a$10$gAv1jbkSZG6qUqajohkQDem66jcLt4eRqcT1rg/YIwgLOpz1.tVdq\\\",\\\"expiry\\\":1669271112},\\\"CMPqcfTr8dzhFB5IH3-KZg\\\":{\\\"token\\\":\\\"$2a$10$O.FWux.1h/9oE9AJqQn0deyRxffrB1LBdg.A5KNJE.pSKxmMnIKDm\\\",\\\"expiry\\\":1669271138},\\\"0t7cyyocUxayJT95Rx0jYw\\\":{\\\"token\\\":\\\"$2a$10$C2WuXlKIU5BfIC7/HK0k6ObywSgANaxjdm8q8UJhqp.4GPJQUhqkW\\\",\\\"expiry\\\":1669271366},\\\"ISLeXeAlopFY5ShFFKfk3g\\\":{\\\"token\\\":\\\"$2a$10$6rS.N.8CtaGJWQ9z5xY6o.2I1hwYolfsvAmkLrYaTDVjJ60h8KFny\\\",\\\"expiry\\\":1669271391},\\\"cFnPk3MMkgmY4J5QB059mQ\\\":{\\\"token\\\":\\\"$2a$10$86FgXpNg7PwePgCfIzF0yurkZkH2gN1BaY5loRM43yBuiAQe19Txy\\\",\\\"expiry\\\":1669271400}}\""], ["updated_at", "2020-11-24 06:30:00.600080"], ["id", 1]]
  [1m[35m (43.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 14], ["current_sign_in_at", "2020-11-24 06:30:00.647459"], ["last_sign_in_at", "2020-11-24 06:29:51.452509"], ["updated_at", "2020-11-24 06:30:00.648624"], ["id", 1]]
  [1m[35m (48.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 0.3ms | ActiveRecord: 94.5ms | Allocations: 15017)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 13:30:00 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{"product"=>{"product_id"=>1, "qty"=>1}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 218ms (ActiveRecord: 0.3ms | Allocations: 100654)



NoMethodError - undefined method `auth_user' for #<Api::V1::CartsController:0x0000000007e44f88>:

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:32:40 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (15.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"CMPqcfTr8dzhFB5IH3-KZg\\\":{\\\"token\\\":\\\"$2a$10$O.FWux.1h/9oE9AJqQn0deyRxffrB1LBdg.A5KNJE.pSKxmMnIKDm\\\",\\\"expiry\\\":1669271138},\\\"0t7cyyocUxayJT95Rx0jYw\\\":{\\\"token\\\":\\\"$2a$10$C2WuXlKIU5BfIC7/HK0k6ObywSgANaxjdm8q8UJhqp.4GPJQUhqkW\\\",\\\"expiry\\\":1669271366},\\\"ISLeXeAlopFY5ShFFKfk3g\\\":{\\\"token\\\":\\\"$2a$10$6rS.N.8CtaGJWQ9z5xY6o.2I1hwYolfsvAmkLrYaTDVjJ60h8KFny\\\",\\\"expiry\\\":1669271391},\\\"cFnPk3MMkgmY4J5QB059mQ\\\":{\\\"token\\\":\\\"$2a$10$86FgXpNg7PwePgCfIzF0yurkZkH2gN1BaY5loRM43yBuiAQe19Txy\\\",\\\"expiry\\\":1669271400},\\\"5eVwlgvZZElha6z2e6bL2g\\\":{\\\"token\\\":\\\"$2a$10$yFQRE8AOzsbppG91.Un4xesdEDKoDIFIMKSCBe12Fg//VGuV87h.a\\\",\\\"expiry\\\":1669271560}}\""], ["updated_at", "2020-11-24 06:32:40.864094"], ["id", 1]]
  [1m[35m (24.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 15], ["current_sign_in_at", "2020-11-24 06:32:40.909116"], ["last_sign_in_at", "2020-11-24 06:30:00.647459"], ["updated_at", "2020-11-24 06:32:40.909747"], ["id", 1]]
  [1m[35m (24.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 530ms (Views: 0.3ms | ActiveRecord: 74.5ms | Allocations: 25805)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 13:32:41 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{"product"=>{"product_id"=>1, "qty"=>1}}}
  [1m[36mUser Load (4.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mShoppingCart Load (0.9ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
Completed 500 Internal Server Error in 280ms (ActiveRecord: 10.5ms | Allocations: 15579)



NameError - uninitialized constant Product::Mongoid:
  app/models/product.rb:2:in `<class:Product>'
  app/models/product.rb:1:in `<main>'
  app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:36:56 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"0t7cyyocUxayJT95Rx0jYw\\\":{\\\"token\\\":\\\"$2a$10$C2WuXlKIU5BfIC7/HK0k6ObywSgANaxjdm8q8UJhqp.4GPJQUhqkW\\\",\\\"expiry\\\":1669271366},\\\"ISLeXeAlopFY5ShFFKfk3g\\\":{\\\"token\\\":\\\"$2a$10$6rS.N.8CtaGJWQ9z5xY6o.2I1hwYolfsvAmkLrYaTDVjJ60h8KFny\\\",\\\"expiry\\\":1669271391},\\\"cFnPk3MMkgmY4J5QB059mQ\\\":{\\\"token\\\":\\\"$2a$10$86FgXpNg7PwePgCfIzF0yurkZkH2gN1BaY5loRM43yBuiAQe19Txy\\\",\\\"expiry\\\":1669271400},\\\"5eVwlgvZZElha6z2e6bL2g\\\":{\\\"token\\\":\\\"$2a$10$yFQRE8AOzsbppG91.Un4xesdEDKoDIFIMKSCBe12Fg//VGuV87h.a\\\",\\\"expiry\\\":1669271560},\\\"xS_3ySW0J3NNRKU5UTEdFg\\\":{\\\"token\\\":\\\"$2a$10$xe5JkVpuRBW7BxT8Tf5T4OCFCIVpbfgd.bRgaYDM1WbW01io9xPLm\\\",\\\"expiry\\\":1669271817}}\""], ["updated_at", "2020-11-24 06:36:57.301477"], ["id", 1]]
  [1m[35m (26.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 16], ["current_sign_in_at", "2020-11-24 06:36:57.331677"], ["last_sign_in_at", "2020-11-24 06:32:40.909116"], ["updated_at", "2020-11-24 06:36:57.332436"], ["id", 1]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.2ms | ActiveRecord: 34.9ms | Allocations: 25772)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 13:36:57 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{"product"=>{"product_id"=>1, "qty"=>1}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mShoppingCart Load (0.2ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
Completed 500 Internal Server Error in 93ms (ActiveRecord: 4.0ms | Allocations: 14161)



PG::UndefinedTable - ERROR:  relation "products" does not exist
LINE 8:  WHERE a.attrelid = '"products"'::regclass
                            ^
:
  app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'

DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /home/bainur/.rvm/rubies/ruby-2.7.1/lib/ruby/gems/2.7.0/gems/rake-13.0.1/lib/rake/task.rb:281)
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:47:36 +0700
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m

ActiveRecord::PendingMigrationError - Migrations are pending. To resolve this issue, run:

        rails db:migrate RAILS_ENV=development

:

  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2997034632337992540)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to Products (20201123071039)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (160.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "store_id" integer NOT NULL, "name" character varying NOT NULL, "description" text NOT NULL, "price" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (53.0ms)[0m  [1m[35mCREATE  INDEX  "index_products_on_name" ON "products"  ("name")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201123071039"]]
  [1m[35m (24.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to ProductVariants (20201123071140)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (101.2ms)[0m  [1m[35mCREATE TABLE "product_variants" ("id" bigserial primary key, "product_id" integer NOT NULL, "sku" character varying NOT NULL, "quantity" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201123071140"]]
  [1m[35m (26.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to Variants (20201123071148)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (146.8ms)[0m  [1m[35mCREATE TABLE "variants" ("id" bigserial primary key, "store_id" integer NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201123071148"]]
  [1m[35m (24.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to ProductVariantDetails (20201123071155)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (47.1ms)[0m  [1m[35mCREATE TABLE "product_variant_details" ("id" bigserial primary key, "product_variant_id" integer NOT NULL, "variant_id" integer NOT NULL, "variant_item_id" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201123071155"]]
  [1m[35m (25.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to VariantItems (20201123071205)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (125.6ms)[0m  [1m[35mCREATE TABLE "variant_items" ("id" bigserial primary key, "variant_id" integer NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201123071205"]]
  [1m[35m (10.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to Stores (20201123071554)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (102.7ms)[0m  [1m[35mCREATE TABLE "stores" ("id" bigserial primary key, "name" character varying NOT NULL, "description" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201123071554"]]
  [1m[35m (18.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to Carts (20201123072013)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (80.9ms)[0m  [1m[35mCREATE TABLE "carts" ("id" bigserial primary key, "user_id" integer NOT NULL, "store_id" integer NOT NULL, "product_variant_id" integer NOT NULL, "quantity" integer NOT NULL, "notes" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201123072013"]]
  [1m[35m (19.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2997034632337992540)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mAdminUser Destroy (16.1ms)[0m  [1m[31mDELETE FROM "admin_users"[0m
  [1m[36mSetting Destroy (5.8ms)[0m  [1m[31mDELETE FROM "settings"[0m
  [1m[36mStore Destroy (0.3ms)[0m  [1m[31mDELETE FROM "stores"[0m
  [1m[36mProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAdminUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "admin_users" WHERE "admin_users"."email" = $1 LIMIT $2[0m  [["email", "admin@example.com"], ["LIMIT", 1]]
  [1m[36mAdminUser Create (8.1ms)[0m  [1m[32mINSERT INTO "admin_users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "admin@example.com"], ["encrypted_password", "$2a$11$uN/z/wEIX6K/NvSO18OcKeLKwPNme6OG/H9acj9IHJ/.zbbl3lqFW"], ["created_at", "2020-11-24 06:47:53.713269"], ["updated_at", "2020-11-24 06:47:53.713269"]]
  [1m[35m (23.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mSetting Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "settings" WHERE "settings"."key" = $1 LIMIT $2[0m  [["key", "min_version"], ["LIMIT", 1]]
  [1m[36mSetting Create (12.4ms)[0m  [1m[32mINSERT INTO "settings" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["key", "min_version"], ["value", "0.0"], ["created_at", "2020-11-24 06:47:53.758970"], ["updated_at", "2020-11-24 06:47:53.758970"]]
  [1m[35m (15.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Create (0.4ms)[0m  [1m[32mINSERT INTO "stores" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Store 1"], ["description", "Store 1 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."], ["created_at", "2020-11-24 06:47:53.803349"], ["updated_at", "2020-11-24 06:47:53.803349"]]
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Create (0.3ms)[0m  [1m[32mINSERT INTO "stores" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Store 2"], ["description", "Store 2 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."], ["created_at", "2020-11-24 06:47:53.848341"], ["updated_at", "2020-11-24 06:47:53.848341"]]
  [1m[35m (13.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Create (0.3ms)[0m  [1m[32mINSERT INTO "stores" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Store 3"], ["description", "Store 3 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."], ["created_at", "2020-11-24 06:47:53.872834"], ["updated_at", "2020-11-24 06:47:53.872834"]]
  [1m[35m (11.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Create (0.2ms)[0m  [1m[32mINSERT INTO "stores" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Store 4"], ["description", "Store 4 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."], ["created_at", "2020-11-24 06:47:53.892080"], ["updated_at", "2020-11-24 06:47:53.892080"]]
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Create (0.3ms)[0m  [1m[32mINSERT INTO "stores" ("name", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Store 5"], ["description", "Store 5 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."], ["created_at", "2020-11-24 06:47:53.903809"], ["updated_at", "2020-11-24 06:47:53.903809"]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores"."id" FROM "stores"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVariant Create (0.5ms)[0m  [1m[32mINSERT INTO "variants" ("store_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["store_id", 1], ["name", "color"], ["created_at", "2020-11-24 06:47:53.939357"], ["updated_at", "2020-11-24 06:47:53.939357"]]
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores"."id" FROM "stores"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mVariant Create (0.3ms)[0m  [1m[32mINSERT INTO "variants" ("store_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["store_id", 2], ["name", "size"], ["created_at", "2020-11-24 06:47:53.968191"], ["updated_at", "2020-11-24 06:47:53.968191"]]
  [1m[35m (8.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVariantItem Create (0.4ms)[0m  [1m[32mINSERT INTO "variant_items" ("variant_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["variant_id", 1], ["name", "red"], ["created_at", "2020-11-24 06:47:53.992271"], ["updated_at", "2020-11-24 06:47:53.992271"]]
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVariantItem Create (0.2ms)[0m  [1m[32mINSERT INTO "variant_items" ("variant_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["variant_id", 1], ["name", "black"], ["created_at", "2020-11-24 06:47:54.013384"], ["updated_at", "2020-11-24 06:47:54.013384"]]
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVariantItem Create (0.2ms)[0m  [1m[32mINSERT INTO "variant_items" ("variant_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["variant_id", 1], ["name", "blue"], ["created_at", "2020-11-24 06:47:54.024651"], ["updated_at", "2020-11-24 06:47:54.024651"]]
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVariantItem Create (0.2ms)[0m  [1m[32mINSERT INTO "variant_items" ("variant_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["variant_id", 2], ["name", "X"], ["created_at", "2020-11-24 06:47:54.035761"], ["updated_at", "2020-11-24 06:47:54.035761"]]
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVariantItem Create (0.2ms)[0m  [1m[32mINSERT INTO "variant_items" ("variant_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["variant_id", 2], ["name", "M"], ["created_at", "2020-11-24 06:47:54.046870"], ["updated_at", "2020-11-24 06:47:54.046870"]]
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVariantItem Create (0.2ms)[0m  [1m[32mINSERT INTO "variant_items" ("variant_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["variant_id", 2], ["name", "L"], ["created_at", "2020-11-24 06:47:54.057934"], ["updated_at", "2020-11-24 06:47:54.057934"]]
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVariantItem Load (0.2ms)[0m  [1m[34mSELECT "variant_items".* FROM "variant_items" WHERE "variant_items"."variant_id" = $1[0m  [["variant_id", 1]]
  [1m[36mVariantItem Load (0.2ms)[0m  [1m[34mSELECT "variant_items".* FROM "variant_items" WHERE "variant_items"."variant_id" = $1[0m  [["variant_id", 2]]
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores"."id" FROM "stores"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("store_id", "name", "description", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["store_id", 1], ["name", "Product 1"], ["description", "Product 1 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets."], ["price", 100000], ["created_at", "2020-11-24 06:47:54.082551"], ["updated_at", "2020-11-24 06:47:54.082551"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductVariant Create (0.4ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 1], ["sku", "productID-1/red/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.103066"], ["updated_at", "2020-11-24 06:47:54.103066"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 1], ["sku", "productID-1/red/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.105991"], ["updated_at", "2020-11-24 06:47:54.105991"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 1], ["sku", "productID-1/red/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.107595"], ["updated_at", "2020-11-24 06:47:54.107595"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 1], ["sku", "productID-1/black/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.108978"], ["updated_at", "2020-11-24 06:47:54.108978"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 1], ["sku", "productID-1/black/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.110382"], ["updated_at", "2020-11-24 06:47:54.110382"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 1], ["sku", "productID-1/black/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.111781"], ["updated_at", "2020-11-24 06:47:54.111781"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 1], ["sku", "productID-1/blue/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.113130"], ["updated_at", "2020-11-24 06:47:54.113130"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 1], ["sku", "productID-1/blue/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.114465"], ["updated_at", "2020-11-24 06:47:54.114465"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 1], ["sku", "productID-1/blue/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.115812"], ["updated_at", "2020-11-24 06:47:54.115812"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores"."id" FROM "stores"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("store_id", "name", "description", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["store_id", 3], ["name", "Product 2"], ["description", "Product 2 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets."], ["price", 100000], ["created_at", "2020-11-24 06:47:54.127769"], ["updated_at", "2020-11-24 06:47:54.127769"]]
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 2], ["sku", "productID-2/red/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.137698"], ["updated_at", "2020-11-24 06:47:54.137698"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 2], ["sku", "productID-2/red/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.140137"], ["updated_at", "2020-11-24 06:47:54.140137"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 2], ["sku", "productID-2/red/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.141574"], ["updated_at", "2020-11-24 06:47:54.141574"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 2], ["sku", "productID-2/black/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.142989"], ["updated_at", "2020-11-24 06:47:54.142989"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 2], ["sku", "productID-2/black/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.144368"], ["updated_at", "2020-11-24 06:47:54.144368"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 2], ["sku", "productID-2/black/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.145760"], ["updated_at", "2020-11-24 06:47:54.145760"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 2], ["sku", "productID-2/blue/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.147246"], ["updated_at", "2020-11-24 06:47:54.147246"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 2], ["sku", "productID-2/blue/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.148674"], ["updated_at", "2020-11-24 06:47:54.148674"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 2], ["sku", "productID-2/blue/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.150062"], ["updated_at", "2020-11-24 06:47:54.150062"]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores"."id" FROM "stores"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("store_id", "name", "description", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["store_id", 3], ["name", "Product 3"], ["description", "Product 3 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets."], ["price", 100000], ["created_at", "2020-11-24 06:47:54.160771"], ["updated_at", "2020-11-24 06:47:54.160771"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductVariant Create (0.3ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 3], ["sku", "productID-3/red/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.171404"], ["updated_at", "2020-11-24 06:47:54.171404"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 3], ["sku", "productID-3/red/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.174019"], ["updated_at", "2020-11-24 06:47:54.174019"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 3], ["sku", "productID-3/red/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.175480"], ["updated_at", "2020-11-24 06:47:54.175480"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 3], ["sku", "productID-3/black/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.176926"], ["updated_at", "2020-11-24 06:47:54.176926"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 3], ["sku", "productID-3/black/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.178383"], ["updated_at", "2020-11-24 06:47:54.178383"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 3], ["sku", "productID-3/black/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.179783"], ["updated_at", "2020-11-24 06:47:54.179783"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 3], ["sku", "productID-3/blue/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.181176"], ["updated_at", "2020-11-24 06:47:54.181176"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 3], ["sku", "productID-3/blue/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.182534"], ["updated_at", "2020-11-24 06:47:54.182534"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 3], ["sku", "productID-3/blue/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.184001"], ["updated_at", "2020-11-24 06:47:54.184001"]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores"."id" FROM "stores"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("store_id", "name", "description", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["store_id", 4], ["name", "Product 4"], ["description", "Product 4 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets."], ["price", 100000], ["created_at", "2020-11-24 06:47:54.194200"], ["updated_at", "2020-11-24 06:47:54.194200"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 4], ["sku", "productID-4/red/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.204075"], ["updated_at", "2020-11-24 06:47:54.204075"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 4], ["sku", "productID-4/red/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.206563"], ["updated_at", "2020-11-24 06:47:54.206563"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 4], ["sku", "productID-4/red/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.207933"], ["updated_at", "2020-11-24 06:47:54.207933"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 4], ["sku", "productID-4/black/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.209415"], ["updated_at", "2020-11-24 06:47:54.209415"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 4], ["sku", "productID-4/black/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.210828"], ["updated_at", "2020-11-24 06:47:54.210828"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 4], ["sku", "productID-4/black/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.212226"], ["updated_at", "2020-11-24 06:47:54.212226"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 4], ["sku", "productID-4/blue/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.213649"], ["updated_at", "2020-11-24 06:47:54.213649"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 4], ["sku", "productID-4/blue/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.215001"], ["updated_at", "2020-11-24 06:47:54.215001"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 4], ["sku", "productID-4/blue/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.216345"], ["updated_at", "2020-11-24 06:47:54.216345"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores"."id" FROM "stores"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("store_id", "name", "description", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["store_id", 5], ["name", "Product 5"], ["description", "Product 5 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets."], ["price", 100000], ["created_at", "2020-11-24 06:47:54.227647"], ["updated_at", "2020-11-24 06:47:54.227647"]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductVariant Create (0.3ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 5], ["sku", "productID-5/red/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.238106"], ["updated_at", "2020-11-24 06:47:54.238106"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 5], ["sku", "productID-5/red/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.240852"], ["updated_at", "2020-11-24 06:47:54.240852"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 5], ["sku", "productID-5/red/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.242297"], ["updated_at", "2020-11-24 06:47:54.242297"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 5], ["sku", "productID-5/black/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.243730"], ["updated_at", "2020-11-24 06:47:54.243730"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 5], ["sku", "productID-5/black/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.245134"], ["updated_at", "2020-11-24 06:47:54.245134"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 5], ["sku", "productID-5/black/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.246554"], ["updated_at", "2020-11-24 06:47:54.246554"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 5], ["sku", "productID-5/blue/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.247951"], ["updated_at", "2020-11-24 06:47:54.247951"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 5], ["sku", "productID-5/blue/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.249385"], ["updated_at", "2020-11-24 06:47:54.249385"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 5], ["sku", "productID-5/blue/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.250774"], ["updated_at", "2020-11-24 06:47:54.250774"]]
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores"."id" FROM "stores"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("store_id", "name", "description", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["store_id", 1], ["name", "Product 6"], ["description", "Product 6 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets."], ["price", 100000], ["created_at", "2020-11-24 06:47:54.260691"], ["updated_at", "2020-11-24 06:47:54.260691"]]
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 6], ["sku", "productID-6/red/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.270519"], ["updated_at", "2020-11-24 06:47:54.270519"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 6], ["sku", "productID-6/red/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.273044"], ["updated_at", "2020-11-24 06:47:54.273044"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 6], ["sku", "productID-6/red/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.274504"], ["updated_at", "2020-11-24 06:47:54.274504"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 6], ["sku", "productID-6/black/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.275954"], ["updated_at", "2020-11-24 06:47:54.275954"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 6], ["sku", "productID-6/black/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.277364"], ["updated_at", "2020-11-24 06:47:54.277364"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 6], ["sku", "productID-6/black/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.278779"], ["updated_at", "2020-11-24 06:47:54.278779"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 6], ["sku", "productID-6/blue/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.280220"], ["updated_at", "2020-11-24 06:47:54.280220"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 6], ["sku", "productID-6/blue/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.281633"], ["updated_at", "2020-11-24 06:47:54.281633"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 6], ["sku", "productID-6/blue/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.283032"], ["updated_at", "2020-11-24 06:47:54.283032"]]
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores"."id" FROM "stores"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("store_id", "name", "description", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["store_id", 3], ["name", "Product 7"], ["description", "Product 7 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets."], ["price", 100000], ["created_at", "2020-11-24 06:47:54.294137"], ["updated_at", "2020-11-24 06:47:54.294137"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 7], ["sku", "productID-7/red/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.304059"], ["updated_at", "2020-11-24 06:47:54.304059"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 7], ["sku", "productID-7/red/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.306618"], ["updated_at", "2020-11-24 06:47:54.306618"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 7], ["sku", "productID-7/red/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.308028"], ["updated_at", "2020-11-24 06:47:54.308028"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 7], ["sku", "productID-7/black/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.309460"], ["updated_at", "2020-11-24 06:47:54.309460"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 7], ["sku", "productID-7/black/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.310927"], ["updated_at", "2020-11-24 06:47:54.310927"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 7], ["sku", "productID-7/black/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.312331"], ["updated_at", "2020-11-24 06:47:54.312331"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 7], ["sku", "productID-7/blue/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.313709"], ["updated_at", "2020-11-24 06:47:54.313709"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 7], ["sku", "productID-7/blue/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.315127"], ["updated_at", "2020-11-24 06:47:54.315127"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 7], ["sku", "productID-7/blue/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.316522"], ["updated_at", "2020-11-24 06:47:54.316522"]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores"."id" FROM "stores"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("store_id", "name", "description", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["store_id", 1], ["name", "Product 8"], ["description", "Product 8 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets."], ["price", 100000], ["created_at", "2020-11-24 06:47:54.327661"], ["updated_at", "2020-11-24 06:47:54.327661"]]
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 8], ["sku", "productID-8/red/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.337408"], ["updated_at", "2020-11-24 06:47:54.337408"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 8], ["sku", "productID-8/red/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.339863"], ["updated_at", "2020-11-24 06:47:54.339863"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 8], ["sku", "productID-8/red/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.341325"], ["updated_at", "2020-11-24 06:47:54.341325"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 8], ["sku", "productID-8/black/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.342689"], ["updated_at", "2020-11-24 06:47:54.342689"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 8], ["sku", "productID-8/black/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.344068"], ["updated_at", "2020-11-24 06:47:54.344068"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 8], ["sku", "productID-8/black/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.345466"], ["updated_at", "2020-11-24 06:47:54.345466"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 8], ["sku", "productID-8/blue/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.346832"], ["updated_at", "2020-11-24 06:47:54.346832"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 8], ["sku", "productID-8/blue/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.348211"], ["updated_at", "2020-11-24 06:47:54.348211"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 8], ["sku", "productID-8/blue/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.349559"], ["updated_at", "2020-11-24 06:47:54.349559"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores"."id" FROM "stores"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("store_id", "name", "description", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["store_id", 5], ["name", "Product 9"], ["description", "Product 9 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets."], ["price", 100000], ["created_at", "2020-11-24 06:47:54.360466"], ["updated_at", "2020-11-24 06:47:54.360466"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 9], ["sku", "productID-9/red/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.370306"], ["updated_at", "2020-11-24 06:47:54.370306"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 9], ["sku", "productID-9/red/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.372782"], ["updated_at", "2020-11-24 06:47:54.372782"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 9], ["sku", "productID-9/red/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.374229"], ["updated_at", "2020-11-24 06:47:54.374229"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 9], ["sku", "productID-9/black/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.375625"], ["updated_at", "2020-11-24 06:47:54.375625"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 9], ["sku", "productID-9/black/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.377090"], ["updated_at", "2020-11-24 06:47:54.377090"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 9], ["sku", "productID-9/black/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.378621"], ["updated_at", "2020-11-24 06:47:54.378621"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 9], ["sku", "productID-9/blue/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.380218"], ["updated_at", "2020-11-24 06:47:54.380218"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 9], ["sku", "productID-9/blue/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.381782"], ["updated_at", "2020-11-24 06:47:54.381782"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 9], ["sku", "productID-9/blue/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.383354"], ["updated_at", "2020-11-24 06:47:54.383354"]]
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores"."id" FROM "stores"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("store_id", "name", "description", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["store_id", 5], ["name", "Product 10"], ["description", "Product 10 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets."], ["price", 100000], ["created_at", "2020-11-24 06:47:54.398471"], ["updated_at", "2020-11-24 06:47:54.398471"]]
  [1m[35m (12.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 10], ["sku", "productID-10/red/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.415269"], ["updated_at", "2020-11-24 06:47:54.415269"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 10], ["sku", "productID-10/red/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.417725"], ["updated_at", "2020-11-24 06:47:54.417725"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 10], ["sku", "productID-10/red/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.419078"], ["updated_at", "2020-11-24 06:47:54.419078"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 10], ["sku", "productID-10/black/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.420442"], ["updated_at", "2020-11-24 06:47:54.420442"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 10], ["sku", "productID-10/black/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.421837"], ["updated_at", "2020-11-24 06:47:54.421837"]]
  [1m[36mProductVariant Create (0.1ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 10], ["sku", "productID-10/black/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.423179"], ["updated_at", "2020-11-24 06:47:54.423179"]]
  [1m[36mProductVariant Create (0.2ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 10], ["sku", "productID-10/blue/X"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.424557"], ["updated_at", "2020-11-24 06:47:54.424557"]]
  [1m[36mProductVariant Create (0.1ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 10], ["sku", "productID-10/blue/M"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.425957"], ["updated_at", "2020-11-24 06:47:54.425957"]]
  [1m[36mProductVariant Create (0.1ms)[0m  [1m[32mINSERT INTO "product_variants" ("product_id", "sku", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 10], ["sku", "productID-10/blue/L"], ["quantity", 10], ["created_at", "2020-11-24 06:47:54.427322"], ["updated_at", "2020-11-24 06:47:54.427322"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" ORDER BY "product_variants"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:47:59 +0700
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"ISLeXeAlopFY5ShFFKfk3g\\\":{\\\"token\\\":\\\"$2a$10$6rS.N.8CtaGJWQ9z5xY6o.2I1hwYolfsvAmkLrYaTDVjJ60h8KFny\\\",\\\"expiry\\\":1669271391},\\\"cFnPk3MMkgmY4J5QB059mQ\\\":{\\\"token\\\":\\\"$2a$10$86FgXpNg7PwePgCfIzF0yurkZkH2gN1BaY5loRM43yBuiAQe19Txy\\\",\\\"expiry\\\":1669271400},\\\"5eVwlgvZZElha6z2e6bL2g\\\":{\\\"token\\\":\\\"$2a$10$yFQRE8AOzsbppG91.Un4xesdEDKoDIFIMKSCBe12Fg//VGuV87h.a\\\",\\\"expiry\\\":1669271560},\\\"xS_3ySW0J3NNRKU5UTEdFg\\\":{\\\"token\\\":\\\"$2a$10$xe5JkVpuRBW7BxT8Tf5T4OCFCIVpbfgd.bRgaYDM1WbW01io9xPLm\\\",\\\"expiry\\\":1669271817},\\\"CG-s-LvsZdscmpKGZl-9cw\\\":{\\\"token\\\":\\\"$2a$10$E5IT/bdOYWhUnPPkNles6.t5e/Cj1dmJOllzny6jeHYpQnBzgBa5m\\\",\\\"expiry\\\":1669272479}}\""], ["updated_at", "2020-11-24 06:47:59.523417"], ["id", 1]]
  [1m[35m (50.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 17], ["current_sign_in_at", "2020-11-24 06:47:59.586459"], ["last_sign_in_at", "2020-11-24 06:36:57.331677"], ["updated_at", "2020-11-24 06:47:59.587126"], ["id", 1]]
  [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.2ms | ActiveRecord: 68.9ms | Allocations: 27475)


Started GET "/api/v1/products" for ::1 at 2020-11-24 13:47:59 +0700
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
  [1m[36mProductVariant Load (0.5ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."product_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)[0m  [["product_id", 1], ["product_id", 2], ["product_id", 3], ["product_id", 4], ["product_id", 5], ["product_id", 6], ["product_id", 7], ["product_id", 8], ["product_id", 9], ["product_id", 10]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 140ms (Views: 0.1ms | ActiveRecord: 5.7ms | Allocations: 42952)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:48:16 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"cFnPk3MMkgmY4J5QB059mQ\\\":{\\\"token\\\":\\\"$2a$10$86FgXpNg7PwePgCfIzF0yurkZkH2gN1BaY5loRM43yBuiAQe19Txy\\\",\\\"expiry\\\":1669271400},\\\"5eVwlgvZZElha6z2e6bL2g\\\":{\\\"token\\\":\\\"$2a$10$yFQRE8AOzsbppG91.Un4xesdEDKoDIFIMKSCBe12Fg//VGuV87h.a\\\",\\\"expiry\\\":1669271560},\\\"xS_3ySW0J3NNRKU5UTEdFg\\\":{\\\"token\\\":\\\"$2a$10$xe5JkVpuRBW7BxT8Tf5T4OCFCIVpbfgd.bRgaYDM1WbW01io9xPLm\\\",\\\"expiry\\\":1669271817},\\\"CG-s-LvsZdscmpKGZl-9cw\\\":{\\\"token\\\":\\\"$2a$10$E5IT/bdOYWhUnPPkNles6.t5e/Cj1dmJOllzny6jeHYpQnBzgBa5m\\\",\\\"expiry\\\":1669272479},\\\"ZUmTkLK1_5tRP3qnJ2G4YA\\\":{\\\"token\\\":\\\"$2a$10$0JBYGsJM66MOWIZq1a.elOg70ZzVDom8F6YBrhwcWOmRGrs1V3r96\\\",\\\"expiry\\\":1669272496}}\""], ["updated_at", "2020-11-24 06:48:16.568185"], ["id", 1]]
  [1m[35m (45.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 18], ["current_sign_in_at", "2020-11-24 06:48:16.618303"], ["last_sign_in_at", "2020-11-24 06:47:59.586459"], ["updated_at", "2020-11-24 06:48:16.619035"], ["id", 1]]
  [1m[35m (49.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 0.2ms | ActiveRecord: 96.7ms | Allocations: 15041)


Started GET "/api/v1/products" for ::1 at 2020-11-24 13:48:16 +0700
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
  [1m[36mProductVariant Load (0.7ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."product_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)[0m  [["product_id", 1], ["product_id", 2], ["product_id", 3], ["product_id", 4], ["product_id", 5], ["product_id", 6], ["product_id", 7], ["product_id", 8], ["product_id", 9], ["product_id", 10]]
  ↳ app/controllers/api/v1/products_controller.rb:8:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 117ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 30318)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 13:59:20 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"5eVwlgvZZElha6z2e6bL2g\\\":{\\\"token\\\":\\\"$2a$10$yFQRE8AOzsbppG91.Un4xesdEDKoDIFIMKSCBe12Fg//VGuV87h.a\\\",\\\"expiry\\\":1669271560},\\\"xS_3ySW0J3NNRKU5UTEdFg\\\":{\\\"token\\\":\\\"$2a$10$xe5JkVpuRBW7BxT8Tf5T4OCFCIVpbfgd.bRgaYDM1WbW01io9xPLm\\\",\\\"expiry\\\":1669271817},\\\"CG-s-LvsZdscmpKGZl-9cw\\\":{\\\"token\\\":\\\"$2a$10$E5IT/bdOYWhUnPPkNles6.t5e/Cj1dmJOllzny6jeHYpQnBzgBa5m\\\",\\\"expiry\\\":1669272479},\\\"ZUmTkLK1_5tRP3qnJ2G4YA\\\":{\\\"token\\\":\\\"$2a$10$0JBYGsJM66MOWIZq1a.elOg70ZzVDom8F6YBrhwcWOmRGrs1V3r96\\\",\\\"expiry\\\":1669272496},\\\"UmNvKElnKeDYgVNuzH4m8w\\\":{\\\"token\\\":\\\"$2a$10$rdkb0ZBOhsZPcwUPNTfu5.5FMeO13lqXbzSa2r7.jLeoArITLRHSG\\\",\\\"expiry\\\":1669273160}}\""], ["updated_at", "2020-11-24 06:59:20.258387"], ["id", 1]]
  [1m[35m (41.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 19], ["current_sign_in_at", "2020-11-24 06:59:20.304527"], ["last_sign_in_at", "2020-11-24 06:48:16.618303"], ["updated_at", "2020-11-24 06:59:20.305266"], ["id", 1]]
  [1m[35m (70.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 0.2ms | ActiveRecord: 115.1ms | Allocations: 15205)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 13:59:20 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mShoppingCart Load (0.6ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
Couldn't find Product without an ID
Completed 404 Not Found in 102ms (Views: 0.2ms | ActiveRecord: 6.6ms | Allocations: 13975)


  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:00:33 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (1.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"xS_3ySW0J3NNRKU5UTEdFg\\\":{\\\"token\\\":\\\"$2a$10$xe5JkVpuRBW7BxT8Tf5T4OCFCIVpbfgd.bRgaYDM1WbW01io9xPLm\\\",\\\"expiry\\\":1669271817},\\\"CG-s-LvsZdscmpKGZl-9cw\\\":{\\\"token\\\":\\\"$2a$10$E5IT/bdOYWhUnPPkNles6.t5e/Cj1dmJOllzny6jeHYpQnBzgBa5m\\\",\\\"expiry\\\":1669272479},\\\"ZUmTkLK1_5tRP3qnJ2G4YA\\\":{\\\"token\\\":\\\"$2a$10$0JBYGsJM66MOWIZq1a.elOg70ZzVDom8F6YBrhwcWOmRGrs1V3r96\\\",\\\"expiry\\\":1669272496},\\\"UmNvKElnKeDYgVNuzH4m8w\\\":{\\\"token\\\":\\\"$2a$10$rdkb0ZBOhsZPcwUPNTfu5.5FMeO13lqXbzSa2r7.jLeoArITLRHSG\\\",\\\"expiry\\\":1669273160},\\\"CbO_fYUKpsCgufWeHh7Kwg\\\":{\\\"token\\\":\\\"$2a$10$mds5eG2h7e2BiAShX/J6yOjsmhbEqGuG1SqcWL/5GmCPH2RIHTORa\\\",\\\"expiry\\\":1669273234}}\""], ["updated_at", "2020-11-24 07:00:34.086742"], ["id", 1]]
  [1m[35m (18.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 20], ["current_sign_in_at", "2020-11-24 07:00:34.113799"], ["last_sign_in_at", "2020-11-24 06:59:20.304527"], ["updated_at", "2020-11-24 07:00:34.115400"], ["id", 1]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 0.2ms | ActiveRecord: 32.8ms | Allocations: 25887)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:00:34 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mShoppingCart Load (0.3ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
Completed 500 Internal Server Error in 104ms (ActiveRecord: 6.6ms | Allocations: 20532)



NoMethodError - undefined method `add' for #<ShoppingCart:0x0000000007551e08>:
  app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:01:49 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"CG-s-LvsZdscmpKGZl-9cw\\\":{\\\"token\\\":\\\"$2a$10$E5IT/bdOYWhUnPPkNles6.t5e/Cj1dmJOllzny6jeHYpQnBzgBa5m\\\",\\\"expiry\\\":1669272479},\\\"ZUmTkLK1_5tRP3qnJ2G4YA\\\":{\\\"token\\\":\\\"$2a$10$0JBYGsJM66MOWIZq1a.elOg70ZzVDom8F6YBrhwcWOmRGrs1V3r96\\\",\\\"expiry\\\":1669272496},\\\"UmNvKElnKeDYgVNuzH4m8w\\\":{\\\"token\\\":\\\"$2a$10$rdkb0ZBOhsZPcwUPNTfu5.5FMeO13lqXbzSa2r7.jLeoArITLRHSG\\\",\\\"expiry\\\":1669273160},\\\"CbO_fYUKpsCgufWeHh7Kwg\\\":{\\\"token\\\":\\\"$2a$10$mds5eG2h7e2BiAShX/J6yOjsmhbEqGuG1SqcWL/5GmCPH2RIHTORa\\\",\\\"expiry\\\":1669273234},\\\"uUNng0tajmCYM14GJFXPZw\\\":{\\\"token\\\":\\\"$2a$10$api0PcycefUngJOFc0vtN.F29w2cftfaoM89e7CTNIc4Sx9zJUWmS\\\",\\\"expiry\\\":1669273309}}\""], ["updated_at", "2020-11-24 07:01:49.785974"], ["id", 1]]
  [1m[35m (40.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 21], ["current_sign_in_at", "2020-11-24 07:01:49.830560"], ["last_sign_in_at", "2020-11-24 07:00:34.113799"], ["updated_at", "2020-11-24 07:01:49.831154"], ["id", 1]]
  [1m[35m (24.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.2ms | ActiveRecord: 69.9ms | Allocations: 25769)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:01:49 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mShoppingCart Load (0.3ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
Completed 422 Unprocessable Entity in 129ms (ActiveRecord: 10.1ms | Allocations: 21517)



ActiveRecord::RecordNotSaved - You cannot call create unless the parent is saved:
  app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:02:29 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"ZUmTkLK1_5tRP3qnJ2G4YA\\\":{\\\"token\\\":\\\"$2a$10$0JBYGsJM66MOWIZq1a.elOg70ZzVDom8F6YBrhwcWOmRGrs1V3r96\\\",\\\"expiry\\\":1669272496},\\\"UmNvKElnKeDYgVNuzH4m8w\\\":{\\\"token\\\":\\\"$2a$10$rdkb0ZBOhsZPcwUPNTfu5.5FMeO13lqXbzSa2r7.jLeoArITLRHSG\\\",\\\"expiry\\\":1669273160},\\\"CbO_fYUKpsCgufWeHh7Kwg\\\":{\\\"token\\\":\\\"$2a$10$mds5eG2h7e2BiAShX/J6yOjsmhbEqGuG1SqcWL/5GmCPH2RIHTORa\\\",\\\"expiry\\\":1669273234},\\\"uUNng0tajmCYM14GJFXPZw\\\":{\\\"token\\\":\\\"$2a$10$api0PcycefUngJOFc0vtN.F29w2cftfaoM89e7CTNIc4Sx9zJUWmS\\\",\\\"expiry\\\":1669273309},\\\"2Pyldf9kzF5iKSDfYHTcxQ\\\":{\\\"token\\\":\\\"$2a$10$Qg1v8Ux16fa8qFI8YBLiHe.aXHnP0GTVaojlRs2KD74.uP2sjziuK\\\",\\\"expiry\\\":1669273349}}\""], ["updated_at", "2020-11-24 07:02:29.703584"], ["id", 1]]
  [1m[35m (49.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 22], ["current_sign_in_at", "2020-11-24 07:02:29.757231"], ["last_sign_in_at", "2020-11-24 07:01:49.830560"], ["updated_at", "2020-11-24 07:02:29.757667"], ["id", 1]]
  [1m[35m (49.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 346ms (Views: 0.3ms | ActiveRecord: 103.3ms | Allocations: 25807)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:02:29 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 406ms (ActiveRecord: 1.6ms | Allocations: 182417)



NameError - undefined local variable or method `xxx' for #<Api::V1::CartsController:0x00007f64b48af820>:
  app/controllers/api/v1/carts_controller.rb:25:in `shopping_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:02:41 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"UmNvKElnKeDYgVNuzH4m8w\\\":{\\\"token\\\":\\\"$2a$10$rdkb0ZBOhsZPcwUPNTfu5.5FMeO13lqXbzSa2r7.jLeoArITLRHSG\\\",\\\"expiry\\\":1669273160},\\\"CbO_fYUKpsCgufWeHh7Kwg\\\":{\\\"token\\\":\\\"$2a$10$mds5eG2h7e2BiAShX/J6yOjsmhbEqGuG1SqcWL/5GmCPH2RIHTORa\\\",\\\"expiry\\\":1669273234},\\\"uUNng0tajmCYM14GJFXPZw\\\":{\\\"token\\\":\\\"$2a$10$api0PcycefUngJOFc0vtN.F29w2cftfaoM89e7CTNIc4Sx9zJUWmS\\\",\\\"expiry\\\":1669273309},\\\"2Pyldf9kzF5iKSDfYHTcxQ\\\":{\\\"token\\\":\\\"$2a$10$Qg1v8Ux16fa8qFI8YBLiHe.aXHnP0GTVaojlRs2KD74.uP2sjziuK\\\",\\\"expiry\\\":1669273349},\\\"21zm3EQbM8Y4detYhRswqg\\\":{\\\"token\\\":\\\"$2a$10$ybAuTofYZA9Jhs40qBWcNewWQWJNyff3NK37zSE9D2qVc1kKTc7p.\\\",\\\"expiry\\\":1669273361}}\""], ["updated_at", "2020-11-24 07:02:41.992422"], ["id", 1]]
  [1m[35m (16.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 23], ["current_sign_in_at", "2020-11-24 07:02:42.014379"], ["last_sign_in_at", "2020-11-24 07:02:29.757231"], ["updated_at", "2020-11-24 07:02:42.014970"], ["id", 1]]
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.3ms | ActiveRecord: 23.9ms | Allocations: 25819)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:02:42 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 423ms (ActiveRecord: 1.3ms | Allocations: 196291)



NameError - undefined local variable or method `yyy' for #<Api::V1::CartsController:0x00007f64bce1c710>:
  app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:03:04 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"CbO_fYUKpsCgufWeHh7Kwg\\\":{\\\"token\\\":\\\"$2a$10$mds5eG2h7e2BiAShX/J6yOjsmhbEqGuG1SqcWL/5GmCPH2RIHTORa\\\",\\\"expiry\\\":1669273234},\\\"uUNng0tajmCYM14GJFXPZw\\\":{\\\"token\\\":\\\"$2a$10$api0PcycefUngJOFc0vtN.F29w2cftfaoM89e7CTNIc4Sx9zJUWmS\\\",\\\"expiry\\\":1669273309},\\\"2Pyldf9kzF5iKSDfYHTcxQ\\\":{\\\"token\\\":\\\"$2a$10$Qg1v8Ux16fa8qFI8YBLiHe.aXHnP0GTVaojlRs2KD74.uP2sjziuK\\\",\\\"expiry\\\":1669273349},\\\"21zm3EQbM8Y4detYhRswqg\\\":{\\\"token\\\":\\\"$2a$10$ybAuTofYZA9Jhs40qBWcNewWQWJNyff3NK37zSE9D2qVc1kKTc7p.\\\",\\\"expiry\\\":1669273361},\\\"yYU_ITSW_-TJ19DqRERY-w\\\":{\\\"token\\\":\\\"$2a$10$g6tMYEfmsvpcfwx4vuIkH.AnWZk98UyaOuWkm/nv55P1NMUKSE.I.\\\",\\\"expiry\\\":1669273384}}\""], ["updated_at", "2020-11-24 07:03:04.540191"], ["id", 1]]
  [1m[35m (22.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 24], ["current_sign_in_at", "2020-11-24 07:03:04.567941"], ["last_sign_in_at", "2020-11-24 07:02:42.014379"], ["updated_at", "2020-11-24 07:03:04.568775"], ["id", 1]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.8ms | ActiveRecord: 31.4ms | Allocations: 25822)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:03:04 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mShoppingCart Load (0.4ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:11:in `add_to_cart'
Completed 422 Unprocessable Entity in 138ms (ActiveRecord: 12.5ms | Allocations: 20698)



ActiveRecord::RecordNotSaved - You cannot call create unless the parent is saved:
  app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'

  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCart Load (0.6ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCart Load (0.3ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mShoppingCart Load (0.2ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" ORDER BY "shopping_carts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:14:57 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"uUNng0tajmCYM14GJFXPZw\\\":{\\\"token\\\":\\\"$2a$10$api0PcycefUngJOFc0vtN.F29w2cftfaoM89e7CTNIc4Sx9zJUWmS\\\",\\\"expiry\\\":1669273309},\\\"2Pyldf9kzF5iKSDfYHTcxQ\\\":{\\\"token\\\":\\\"$2a$10$Qg1v8Ux16fa8qFI8YBLiHe.aXHnP0GTVaojlRs2KD74.uP2sjziuK\\\",\\\"expiry\\\":1669273349},\\\"21zm3EQbM8Y4detYhRswqg\\\":{\\\"token\\\":\\\"$2a$10$ybAuTofYZA9Jhs40qBWcNewWQWJNyff3NK37zSE9D2qVc1kKTc7p.\\\",\\\"expiry\\\":1669273361},\\\"yYU_ITSW_-TJ19DqRERY-w\\\":{\\\"token\\\":\\\"$2a$10$g6tMYEfmsvpcfwx4vuIkH.AnWZk98UyaOuWkm/nv55P1NMUKSE.I.\\\",\\\"expiry\\\":1669273384},\\\"vMZn4i7F6lPsnN1yZ23XAw\\\":{\\\"token\\\":\\\"$2a$10$t5r4CnETVON3fY/oBMMzcexKPPvINZYDUAbqIpjegkuMH7D/UzAwO\\\",\\\"expiry\\\":1669274098}}\""], ["updated_at", "2020-11-24 07:14:58.145533"], ["id", 1]]
  [1m[35m (18.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 25], ["current_sign_in_at", "2020-11-24 07:14:58.169320"], ["last_sign_in_at", "2020-11-24 07:03:04.567941"], ["updated_at", "2020-11-24 07:14:58.169852"], ["id", 1]]
  [1m[35m (13.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.2ms | ActiveRecord: 34.1ms | Allocations: 25487)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:14:58 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'
  [1m[36mShoppingCart Load (0.7ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'
Completed 500 Internal Server Error in 105ms (ActiveRecord: 7.3ms | Allocations: 11279)



ActiveModel::UnknownAttributeError - unknown attribute 'order_id' for Cart.:
  app/controllers/api/v1/carts_controller.rb:28:in `shopping_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:15:12 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"2Pyldf9kzF5iKSDfYHTcxQ\\\":{\\\"token\\\":\\\"$2a$10$Qg1v8Ux16fa8qFI8YBLiHe.aXHnP0GTVaojlRs2KD74.uP2sjziuK\\\",\\\"expiry\\\":1669273349},\\\"21zm3EQbM8Y4detYhRswqg\\\":{\\\"token\\\":\\\"$2a$10$ybAuTofYZA9Jhs40qBWcNewWQWJNyff3NK37zSE9D2qVc1kKTc7p.\\\",\\\"expiry\\\":1669273361},\\\"yYU_ITSW_-TJ19DqRERY-w\\\":{\\\"token\\\":\\\"$2a$10$g6tMYEfmsvpcfwx4vuIkH.AnWZk98UyaOuWkm/nv55P1NMUKSE.I.\\\",\\\"expiry\\\":1669273384},\\\"vMZn4i7F6lPsnN1yZ23XAw\\\":{\\\"token\\\":\\\"$2a$10$t5r4CnETVON3fY/oBMMzcexKPPvINZYDUAbqIpjegkuMH7D/UzAwO\\\",\\\"expiry\\\":1669274098},\\\"jMzrv6QXwzV3DnKjhoSApg\\\":{\\\"token\\\":\\\"$2a$10$QcLgNWW1MbeV5U3gqjQkaefLw8W/FNRUDbbhZk.U3I1Q874zZZm3G\\\",\\\"expiry\\\":1669274113}}\""], ["updated_at", "2020-11-24 07:15:13.256734"], ["id", 1]]
  [1m[35m (17.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 26], ["current_sign_in_at", "2020-11-24 07:15:13.277816"], ["last_sign_in_at", "2020-11-24 07:14:58.169320"], ["updated_at", "2020-11-24 07:15:13.278258"], ["id", 1]]
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.3ms | ActiveRecord: 28.2ms | Allocations: 25803)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:15:13 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'
  [1m[36mShoppingCart Load (0.4ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:11:in `add_to_cart'
Completed 422 Unprocessable Entity in 111ms (ActiveRecord: 11.9ms | Allocations: 18926)



ActiveRecord::RecordNotSaved - You cannot call create unless the parent is saved:
  app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'

  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:16:06 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"21zm3EQbM8Y4detYhRswqg\\\":{\\\"token\\\":\\\"$2a$10$ybAuTofYZA9Jhs40qBWcNewWQWJNyff3NK37zSE9D2qVc1kKTc7p.\\\",\\\"expiry\\\":1669273361},\\\"yYU_ITSW_-TJ19DqRERY-w\\\":{\\\"token\\\":\\\"$2a$10$g6tMYEfmsvpcfwx4vuIkH.AnWZk98UyaOuWkm/nv55P1NMUKSE.I.\\\",\\\"expiry\\\":1669273384},\\\"vMZn4i7F6lPsnN1yZ23XAw\\\":{\\\"token\\\":\\\"$2a$10$t5r4CnETVON3fY/oBMMzcexKPPvINZYDUAbqIpjegkuMH7D/UzAwO\\\",\\\"expiry\\\":1669274098},\\\"jMzrv6QXwzV3DnKjhoSApg\\\":{\\\"token\\\":\\\"$2a$10$QcLgNWW1MbeV5U3gqjQkaefLw8W/FNRUDbbhZk.U3I1Q874zZZm3G\\\",\\\"expiry\\\":1669274113},\\\"SIzo_E-MjqpPoTP1lrr5Zg\\\":{\\\"token\\\":\\\"$2a$10$27BC7sndo9nYgtaXdw1YV.A0lBrMPRN7tqv6jnOvQwIgq3rRFwjSu\\\",\\\"expiry\\\":1669274167}}\""], ["updated_at", "2020-11-24 07:16:07.154627"], ["id", 1]]
  [1m[35m (13.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 27], ["current_sign_in_at", "2020-11-24 07:16:07.172984"], ["last_sign_in_at", "2020-11-24 07:15:13.277816"], ["updated_at", "2020-11-24 07:16:07.173853"], ["id", 1]]
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.3ms | ActiveRecord: 21.7ms | Allocations: 25786)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:16:07 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'
  [1m[36mShoppingCart Load (0.3ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `shopping_cart'
Validation failed: Store can't be blank, Product variant can't be blank, Quantity can't be blank
Completed 400 Bad Request in 92ms (Views: 0.3ms | ActiveRecord: 7.9ms | Allocations: 10901)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:17:50 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"yYU_ITSW_-TJ19DqRERY-w\\\":{\\\"token\\\":\\\"$2a$10$g6tMYEfmsvpcfwx4vuIkH.AnWZk98UyaOuWkm/nv55P1NMUKSE.I.\\\",\\\"expiry\\\":1669273384},\\\"vMZn4i7F6lPsnN1yZ23XAw\\\":{\\\"token\\\":\\\"$2a$10$t5r4CnETVON3fY/oBMMzcexKPPvINZYDUAbqIpjegkuMH7D/UzAwO\\\",\\\"expiry\\\":1669274098},\\\"jMzrv6QXwzV3DnKjhoSApg\\\":{\\\"token\\\":\\\"$2a$10$QcLgNWW1MbeV5U3gqjQkaefLw8W/FNRUDbbhZk.U3I1Q874zZZm3G\\\",\\\"expiry\\\":1669274113},\\\"SIzo_E-MjqpPoTP1lrr5Zg\\\":{\\\"token\\\":\\\"$2a$10$27BC7sndo9nYgtaXdw1YV.A0lBrMPRN7tqv6jnOvQwIgq3rRFwjSu\\\",\\\"expiry\\\":1669274167},\\\"pO9WPeMKAWJM2Y9N8g69Ag\\\":{\\\"token\\\":\\\"$2a$10$cfhLPde2EZg9TI/Qp/utLudj3aVOkNvyx4.M1RbaEvVEIu4NChVva\\\",\\\"expiry\\\":1669274270}}\""], ["updated_at", "2020-11-24 07:17:50.460777"], ["id", 1]]
  [1m[35m (88.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 28], ["current_sign_in_at", "2020-11-24 07:17:50.554055"], ["last_sign_in_at", "2020-11-24 07:16:07.172984"], ["updated_at", "2020-11-24 07:17:50.554732"], ["id", 1]]
  [1m[35m (17.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 363ms (Views: 0.3ms | ActiveRecord: 110.9ms | Allocations: 25789)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:17:50 +0700

SyntaxError - syntax error, unexpected local variable or method, expecting ':'
        shopping_cart.add(@product, @product.price...
        ^~~~~~~~~~~~~
:
  app/controllers/api/v1/carts_controller.rb:14:in `'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:18:20 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"vMZn4i7F6lPsnN1yZ23XAw\\\":{\\\"token\\\":\\\"$2a$10$t5r4CnETVON3fY/oBMMzcexKPPvINZYDUAbqIpjegkuMH7D/UzAwO\\\",\\\"expiry\\\":1669274098},\\\"jMzrv6QXwzV3DnKjhoSApg\\\":{\\\"token\\\":\\\"$2a$10$QcLgNWW1MbeV5U3gqjQkaefLw8W/FNRUDbbhZk.U3I1Q874zZZm3G\\\",\\\"expiry\\\":1669274113},\\\"SIzo_E-MjqpPoTP1lrr5Zg\\\":{\\\"token\\\":\\\"$2a$10$27BC7sndo9nYgtaXdw1YV.A0lBrMPRN7tqv6jnOvQwIgq3rRFwjSu\\\",\\\"expiry\\\":1669274167},\\\"pO9WPeMKAWJM2Y9N8g69Ag\\\":{\\\"token\\\":\\\"$2a$10$cfhLPde2EZg9TI/Qp/utLudj3aVOkNvyx4.M1RbaEvVEIu4NChVva\\\",\\\"expiry\\\":1669274270},\\\"tGtGl0pwfPq2uVty_Y6ADQ\\\":{\\\"token\\\":\\\"$2a$10$zWBCle2DclmVSKy8iA9UaeB/XC/YSaZKx193etKGpWxiQ7LrT.i5C\\\",\\\"expiry\\\":1669274300}}\""], ["updated_at", "2020-11-24 07:18:20.634997"], ["id", 1]]
  [1m[35m (25.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 29], ["current_sign_in_at", "2020-11-24 07:18:20.665545"], ["last_sign_in_at", "2020-11-24 07:17:50.554055"], ["updated_at", "2020-11-24 07:18:20.666065"], ["id", 1]]
  [1m[35m (71.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 352ms (Views: 0.6ms | ActiveRecord: 101.8ms | Allocations: 25773)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:18:20 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "qty"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mShoppingCart Load (0.3ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
Validation failed: Store can't be blank, Product variant can't be blank, Quantity can't be blank
Completed 400 Bad Request in 106ms (Views: 0.3ms | ActiveRecord: 9.4ms | Allocations: 16086)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:18:41 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"jMzrv6QXwzV3DnKjhoSApg\\\":{\\\"token\\\":\\\"$2a$10$QcLgNWW1MbeV5U3gqjQkaefLw8W/FNRUDbbhZk.U3I1Q874zZZm3G\\\",\\\"expiry\\\":1669274113},\\\"SIzo_E-MjqpPoTP1lrr5Zg\\\":{\\\"token\\\":\\\"$2a$10$27BC7sndo9nYgtaXdw1YV.A0lBrMPRN7tqv6jnOvQwIgq3rRFwjSu\\\",\\\"expiry\\\":1669274167},\\\"pO9WPeMKAWJM2Y9N8g69Ag\\\":{\\\"token\\\":\\\"$2a$10$cfhLPde2EZg9TI/Qp/utLudj3aVOkNvyx4.M1RbaEvVEIu4NChVva\\\",\\\"expiry\\\":1669274270},\\\"tGtGl0pwfPq2uVty_Y6ADQ\\\":{\\\"token\\\":\\\"$2a$10$zWBCle2DclmVSKy8iA9UaeB/XC/YSaZKx193etKGpWxiQ7LrT.i5C\\\",\\\"expiry\\\":1669274300},\\\"cUEd_QqpFgK6WSFsSM7J9A\\\":{\\\"token\\\":\\\"$2a$10$13BJlGhWSVpuMhClxBteUODXSuXPpmZPegJ9KGTdTJFpzsPQMFOE6\\\",\\\"expiry\\\":1669274321}}\""], ["updated_at", "2020-11-24 07:18:41.597813"], ["id", 1]]
  [1m[35m (39.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 30], ["current_sign_in_at", "2020-11-24 07:18:41.654880"], ["last_sign_in_at", "2020-11-24 07:18:20.665545"], ["updated_at", "2020-11-24 07:18:41.655532"], ["id", 1]]
  [1m[35m (67.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 360ms (Views: 0.3ms | ActiveRecord: 109.3ms | Allocations: 15024)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:18:41 +0700
Error occurred while parsing request parameters.
Contents:

{
    "product": {
        "product_id": 1,
        "quantity": 1,
        "store_id": 1,         
    }
}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]

JSON::ParserError - 784: unexpected token at '{
    "product": {
        "product_id": 1,
        "quantity": 1,
        "store_id": 1,         
    }
}':

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:18:50 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"SIzo_E-MjqpPoTP1lrr5Zg\\\":{\\\"token\\\":\\\"$2a$10$27BC7sndo9nYgtaXdw1YV.A0lBrMPRN7tqv6jnOvQwIgq3rRFwjSu\\\",\\\"expiry\\\":1669274167},\\\"pO9WPeMKAWJM2Y9N8g69Ag\\\":{\\\"token\\\":\\\"$2a$10$cfhLPde2EZg9TI/Qp/utLudj3aVOkNvyx4.M1RbaEvVEIu4NChVva\\\",\\\"expiry\\\":1669274270},\\\"tGtGl0pwfPq2uVty_Y6ADQ\\\":{\\\"token\\\":\\\"$2a$10$zWBCle2DclmVSKy8iA9UaeB/XC/YSaZKx193etKGpWxiQ7LrT.i5C\\\",\\\"expiry\\\":1669274300},\\\"cUEd_QqpFgK6WSFsSM7J9A\\\":{\\\"token\\\":\\\"$2a$10$13BJlGhWSVpuMhClxBteUODXSuXPpmZPegJ9KGTdTJFpzsPQMFOE6\\\",\\\"expiry\\\":1669274321},\\\"E-FLb3eDSwQbZRIc1UMRUQ\\\":{\\\"token\\\":\\\"$2a$10$B/Hq0vE/XSeqLW0qEvRHcOCl/GGZB14UNwKqNySrH7rOEvIhqI0PO\\\",\\\"expiry\\\":1669274331}}\""], ["updated_at", "2020-11-24 07:18:51.152675"], ["id", 1]]
  [1m[35m (61.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 31], ["current_sign_in_at", "2020-11-24 07:18:51.217842"], ["last_sign_in_at", "2020-11-24 07:18:41.654880"], ["updated_at", "2020-11-24 07:18:51.218425"], ["id", 1]]
  [1m[35m (82.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 374ms (Views: 0.2ms | ActiveRecord: 145.7ms | Allocations: 15018)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:18:51 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "quantity"=>1, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mShoppingCart Load (0.4ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
Validation failed: Store can't be blank, Product variant can't be blank, Quantity can't be blank
Completed 400 Bad Request in 86ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 6009)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:20:35 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"pO9WPeMKAWJM2Y9N8g69Ag\\\":{\\\"token\\\":\\\"$2a$10$cfhLPde2EZg9TI/Qp/utLudj3aVOkNvyx4.M1RbaEvVEIu4NChVva\\\",\\\"expiry\\\":1669274270},\\\"tGtGl0pwfPq2uVty_Y6ADQ\\\":{\\\"token\\\":\\\"$2a$10$zWBCle2DclmVSKy8iA9UaeB/XC/YSaZKx193etKGpWxiQ7LrT.i5C\\\",\\\"expiry\\\":1669274300},\\\"cUEd_QqpFgK6WSFsSM7J9A\\\":{\\\"token\\\":\\\"$2a$10$13BJlGhWSVpuMhClxBteUODXSuXPpmZPegJ9KGTdTJFpzsPQMFOE6\\\",\\\"expiry\\\":1669274321},\\\"E-FLb3eDSwQbZRIc1UMRUQ\\\":{\\\"token\\\":\\\"$2a$10$B/Hq0vE/XSeqLW0qEvRHcOCl/GGZB14UNwKqNySrH7rOEvIhqI0PO\\\",\\\"expiry\\\":1669274331},\\\"eWCch1QBY0OkZcLEm6b1_A\\\":{\\\"token\\\":\\\"$2a$10$fKSch7f0uqc5f35Ypi1vLuUNtRInDzrHtyPThpqR0FOmKg.CqKwMi\\\",\\\"expiry\\\":1669274436}}\""], ["updated_at", "2020-11-24 07:20:36.067731"], ["id", 1]]
  [1m[35m (26.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 32], ["current_sign_in_at", "2020-11-24 07:20:36.098756"], ["last_sign_in_at", "2020-11-24 07:18:51.217842"], ["updated_at", "2020-11-24 07:20:36.099308"], ["id", 1]]
  [1m[35m (27.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 0.2ms | ActiveRecord: 59.4ms | Allocations: 25804)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:20:36 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "quantity"=>1, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mShoppingCart Load (0.3ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
Validation failed: Product variant can't be blank
Completed 400 Bad Request in 104ms (Views: 0.2ms | ActiveRecord: 8.4ms | Allocations: 15295)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:21:27 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"tGtGl0pwfPq2uVty_Y6ADQ\\\":{\\\"token\\\":\\\"$2a$10$zWBCle2DclmVSKy8iA9UaeB/XC/YSaZKx193etKGpWxiQ7LrT.i5C\\\",\\\"expiry\\\":1669274300},\\\"cUEd_QqpFgK6WSFsSM7J9A\\\":{\\\"token\\\":\\\"$2a$10$13BJlGhWSVpuMhClxBteUODXSuXPpmZPegJ9KGTdTJFpzsPQMFOE6\\\",\\\"expiry\\\":1669274321},\\\"E-FLb3eDSwQbZRIc1UMRUQ\\\":{\\\"token\\\":\\\"$2a$10$B/Hq0vE/XSeqLW0qEvRHcOCl/GGZB14UNwKqNySrH7rOEvIhqI0PO\\\",\\\"expiry\\\":1669274331},\\\"eWCch1QBY0OkZcLEm6b1_A\\\":{\\\"token\\\":\\\"$2a$10$fKSch7f0uqc5f35Ypi1vLuUNtRInDzrHtyPThpqR0FOmKg.CqKwMi\\\",\\\"expiry\\\":1669274436},\\\"e6iMr_4XIJXJhMxKp_JH8g\\\":{\\\"token\\\":\\\"$2a$10$HxkHTaq7XRJ20FPoIUtgFuaJpw3.S0/BhrvmpCmQuTAIgjfKdnjwy\\\",\\\"expiry\\\":1669274487}}\""], ["updated_at", "2020-11-24 07:21:27.683933"], ["id", 1]]
  [1m[35m (19.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 33], ["current_sign_in_at", "2020-11-24 07:21:27.707348"], ["last_sign_in_at", "2020-11-24 07:20:36.098756"], ["updated_at", "2020-11-24 07:21:27.707966"], ["id", 1]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.2ms | ActiveRecord: 28.7ms | Allocations: 25772)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:21:27 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "quantity"=>1, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mShoppingCart Load (0.3ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "product_variant_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["product_variant_id", 1], ["quantity", 1], ["created_at", "2020-11-24 07:21:27.880640"], ["updated_at", "2020-11-24 07:21:27.880640"]]
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[35m (39.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.4ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 1], ["owner_type", "Cart"], ["item_type", "Product"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.3ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 1], ["owner_type", "Cart"], ["quantity", 1], ["item_id", 1], ["item_type", "Product"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-24 07:21:27.959173"], ["updated_at", "2020-11-24 07:21:27.959173"]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (77.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
No template found for Api::V1::CartsController#add_to_cart, rendering head :no_content
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 274ms (ActiveRecord: 129.2ms | Allocations: 38586)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:21:43 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"cUEd_QqpFgK6WSFsSM7J9A\\\":{\\\"token\\\":\\\"$2a$10$13BJlGhWSVpuMhClxBteUODXSuXPpmZPegJ9KGTdTJFpzsPQMFOE6\\\",\\\"expiry\\\":1669274321},\\\"E-FLb3eDSwQbZRIc1UMRUQ\\\":{\\\"token\\\":\\\"$2a$10$B/Hq0vE/XSeqLW0qEvRHcOCl/GGZB14UNwKqNySrH7rOEvIhqI0PO\\\",\\\"expiry\\\":1669274331},\\\"eWCch1QBY0OkZcLEm6b1_A\\\":{\\\"token\\\":\\\"$2a$10$fKSch7f0uqc5f35Ypi1vLuUNtRInDzrHtyPThpqR0FOmKg.CqKwMi\\\",\\\"expiry\\\":1669274436},\\\"e6iMr_4XIJXJhMxKp_JH8g\\\":{\\\"token\\\":\\\"$2a$10$HxkHTaq7XRJ20FPoIUtgFuaJpw3.S0/BhrvmpCmQuTAIgjfKdnjwy\\\",\\\"expiry\\\":1669274487},\\\"fu9PLjCYGO6I2zmAVwkU6w\\\":{\\\"token\\\":\\\"$2a$10$APA7YZOGfEjgCBU8EDqzzekKCP3G..TzQR8hGFqW7cYQty5MFMFrO\\\",\\\"expiry\\\":1669274503}}\""], ["updated_at", "2020-11-24 07:21:43.365874"], ["id", 1]]
  [1m[35m (45.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 34], ["current_sign_in_at", "2020-11-24 07:21:43.416251"], ["last_sign_in_at", "2020-11-24 07:21:27.707348"], ["updated_at", "2020-11-24 07:21:43.416774"], ["id", 1]]
  [1m[35m (37.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.2ms | ActiveRecord: 85.4ms | Allocations: 15018)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:21:43 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "quantity"=>2, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mShoppingCart Load (0.2ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mCart Create (0.2ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "product_variant_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["product_variant_id", 1], ["quantity", 2], ["created_at", "2020-11-24 07:21:43.565341"], ["updated_at", "2020-11-24 07:21:43.565341"]]
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[35m (24.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 2], ["owner_type", "Cart"], ["item_type", "Product"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.2ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 2], ["owner_type", "Cart"], ["quantity", 2], ["item_id", 1], ["item_type", "Product"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-24 07:21:43.598768"], ["updated_at", "2020-11-24 07:21:43.598768"]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (63.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
No template found for Api::V1::CartsController#add_to_cart, rendering head :no_content
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 179ms (ActiveRecord: 90.4ms | Allocations: 14643)


  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCart Load (0.5ms)[0m  [1m[34mSELECT "shopping_carts".* FROM "shopping_carts" WHERE (order_id is null) AND "shopping_carts"."user_id" = $1 ORDER BY "shopping_carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Destroy (25.7ms)[0m  [1m[31mDELETE FROM "carts"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:22:27 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"E-FLb3eDSwQbZRIc1UMRUQ\\\":{\\\"token\\\":\\\"$2a$10$B/Hq0vE/XSeqLW0qEvRHcOCl/GGZB14UNwKqNySrH7rOEvIhqI0PO\\\",\\\"expiry\\\":1669274331},\\\"eWCch1QBY0OkZcLEm6b1_A\\\":{\\\"token\\\":\\\"$2a$10$fKSch7f0uqc5f35Ypi1vLuUNtRInDzrHtyPThpqR0FOmKg.CqKwMi\\\",\\\"expiry\\\":1669274436},\\\"e6iMr_4XIJXJhMxKp_JH8g\\\":{\\\"token\\\":\\\"$2a$10$HxkHTaq7XRJ20FPoIUtgFuaJpw3.S0/BhrvmpCmQuTAIgjfKdnjwy\\\",\\\"expiry\\\":1669274487},\\\"fu9PLjCYGO6I2zmAVwkU6w\\\":{\\\"token\\\":\\\"$2a$10$APA7YZOGfEjgCBU8EDqzzekKCP3G..TzQR8hGFqW7cYQty5MFMFrO\\\",\\\"expiry\\\":1669274503},\\\"6xTZATYAJ3WceZUIZHmTjw\\\":{\\\"token\\\":\\\"$2a$10$IGfVbdOeDnYOBodHiptMj.ThXKru0mYp3CDIPxFC.ZMhzKVnqRU8e\\\",\\\"expiry\\\":1669274548}}\""], ["updated_at", "2020-11-24 07:22:28.285375"], ["id", 1]]
  [1m[35m (140.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 35], ["current_sign_in_at", "2020-11-24 07:22:28.429932"], ["last_sign_in_at", "2020-11-24 07:21:43.416251"], ["updated_at", "2020-11-24 07:22:28.430775"], ["id", 1]]
  [1m[35m (30.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 418ms (Views: 0.2ms | ActiveRecord: 175.6ms | Allocations: 25801)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:22:28 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "quantity"=>2, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE (order_id is null) AND "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
Completed 500 Internal Server Error in 76ms (ActiveRecord: 3.0ms | Allocations: 4120)



PG::UndefinedColumn - ERROR:  column "order_id" does not exist
LINE 1: SELECT "carts".* FROM "carts" WHERE (order_id is null) AND "...
                                             ^
:
  app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:22:47 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"eWCch1QBY0OkZcLEm6b1_A\\\":{\\\"token\\\":\\\"$2a$10$fKSch7f0uqc5f35Ypi1vLuUNtRInDzrHtyPThpqR0FOmKg.CqKwMi\\\",\\\"expiry\\\":1669274436},\\\"e6iMr_4XIJXJhMxKp_JH8g\\\":{\\\"token\\\":\\\"$2a$10$HxkHTaq7XRJ20FPoIUtgFuaJpw3.S0/BhrvmpCmQuTAIgjfKdnjwy\\\",\\\"expiry\\\":1669274487},\\\"fu9PLjCYGO6I2zmAVwkU6w\\\":{\\\"token\\\":\\\"$2a$10$APA7YZOGfEjgCBU8EDqzzekKCP3G..TzQR8hGFqW7cYQty5MFMFrO\\\",\\\"expiry\\\":1669274503},\\\"6xTZATYAJ3WceZUIZHmTjw\\\":{\\\"token\\\":\\\"$2a$10$IGfVbdOeDnYOBodHiptMj.ThXKru0mYp3CDIPxFC.ZMhzKVnqRU8e\\\",\\\"expiry\\\":1669274548},\\\"JPLwtbL4O1XLtJuyVQE3zQ\\\":{\\\"token\\\":\\\"$2a$10$VdCDgv92CJ9eLJPo80xJJ.sM/AEyN/FLpMdSSUblClYHfHVKSe5PG\\\",\\\"expiry\\\":1669274568}}\""], ["updated_at", "2020-11-24 07:22:48.188446"], ["id", 1]]
  [1m[35m (23.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 36], ["current_sign_in_at", "2020-11-24 07:22:48.215850"], ["last_sign_in_at", "2020-11-24 07:22:28.429932"], ["updated_at", "2020-11-24 07:22:48.216508"], ["id", 1]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.2ms | ActiveRecord: 32.8ms | Allocations: 25802)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:22:48 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "quantity"=>2, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "product_variant_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["product_variant_id", 1], ["quantity", 2], ["created_at", "2020-11-24 07:22:48.364205"], ["updated_at", "2020-11-24 07:22:48.364205"]]
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[35m (35.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 3], ["owner_type", "Cart"], ["item_type", "Product"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.3ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 3], ["owner_type", "Cart"], ["quantity", 2], ["item_id", 1], ["item_type", "Product"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-24 07:22:48.423934"], ["updated_at", "2020-11-24 07:22:48.423934"]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (73.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
No template found for Api::V1::CartsController#add_to_cart, rendering head :no_content
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 233ms (ActiveRecord: 118.8ms | Allocations: 30738)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:23:00 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"e6iMr_4XIJXJhMxKp_JH8g\\\":{\\\"token\\\":\\\"$2a$10$HxkHTaq7XRJ20FPoIUtgFuaJpw3.S0/BhrvmpCmQuTAIgjfKdnjwy\\\",\\\"expiry\\\":1669274487},\\\"fu9PLjCYGO6I2zmAVwkU6w\\\":{\\\"token\\\":\\\"$2a$10$APA7YZOGfEjgCBU8EDqzzekKCP3G..TzQR8hGFqW7cYQty5MFMFrO\\\",\\\"expiry\\\":1669274503},\\\"6xTZATYAJ3WceZUIZHmTjw\\\":{\\\"token\\\":\\\"$2a$10$IGfVbdOeDnYOBodHiptMj.ThXKru0mYp3CDIPxFC.ZMhzKVnqRU8e\\\",\\\"expiry\\\":1669274548},\\\"JPLwtbL4O1XLtJuyVQE3zQ\\\":{\\\"token\\\":\\\"$2a$10$VdCDgv92CJ9eLJPo80xJJ.sM/AEyN/FLpMdSSUblClYHfHVKSe5PG\\\",\\\"expiry\\\":1669274568},\\\"a7ta0u4jfV3nYq2Fqhugmg\\\":{\\\"token\\\":\\\"$2a$10$GKyf8oxpoDSqC/fqMWYxoOFfLdxQUuoaCVEs.AnlTiGpslQ4NqkNq\\\",\\\"expiry\\\":1669274580}}\""], ["updated_at", "2020-11-24 07:23:00.358036"], ["id", 1]]
  [1m[35m (46.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 37], ["current_sign_in_at", "2020-11-24 07:23:00.407585"], ["last_sign_in_at", "2020-11-24 07:22:48.215850"], ["updated_at", "2020-11-24 07:23:00.408093"], ["id", 1]]
  [1m[35m (72.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 351ms (Views: 0.3ms | ActiveRecord: 119.9ms | Allocations: 15018)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:23:00 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 3], ["owner_type", "Cart"], ["item_type", "Product"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 5], ["updated_at", "2020-11-24 07:23:00.596797"], ["id", 3]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (44.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
No template found for Api::V1::CartsController#add_to_cart, rendering head :no_content
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 134ms (ActiveRecord: 46.3ms | Allocations: 11430)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:27:43 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"fu9PLjCYGO6I2zmAVwkU6w\\\":{\\\"token\\\":\\\"$2a$10$APA7YZOGfEjgCBU8EDqzzekKCP3G..TzQR8hGFqW7cYQty5MFMFrO\\\",\\\"expiry\\\":1669274503},\\\"6xTZATYAJ3WceZUIZHmTjw\\\":{\\\"token\\\":\\\"$2a$10$IGfVbdOeDnYOBodHiptMj.ThXKru0mYp3CDIPxFC.ZMhzKVnqRU8e\\\",\\\"expiry\\\":1669274548},\\\"JPLwtbL4O1XLtJuyVQE3zQ\\\":{\\\"token\\\":\\\"$2a$10$VdCDgv92CJ9eLJPo80xJJ.sM/AEyN/FLpMdSSUblClYHfHVKSe5PG\\\",\\\"expiry\\\":1669274568},\\\"a7ta0u4jfV3nYq2Fqhugmg\\\":{\\\"token\\\":\\\"$2a$10$GKyf8oxpoDSqC/fqMWYxoOFfLdxQUuoaCVEs.AnlTiGpslQ4NqkNq\\\",\\\"expiry\\\":1669274580},\\\"RIFDKCUTuDKXewk834ZnGQ\\\":{\\\"token\\\":\\\"$2a$10$EZ7Isthq4NpM0B.7SYAV3OwKKKGATnjScaUvCNDpiUijwElG/OviW\\\",\\\"expiry\\\":1669274864}}\""], ["updated_at", "2020-11-24 07:27:44.185655"], ["id", 1]]
  [1m[35m (41.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 38], ["current_sign_in_at", "2020-11-24 07:27:44.245083"], ["last_sign_in_at", "2020-11-24 07:23:00.407585"], ["updated_at", "2020-11-24 07:27:44.246953"], ["id", 1]]
  [1m[35m (20.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 329ms (Views: 0.4ms | ActiveRecord: 68.0ms | Allocations: 25803)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:27:44 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
Couldn't find Product without an ID
Completed 404 Not Found in 88ms (Views: 0.2ms | ActiveRecord: 5.2ms | Allocations: 8430)


  [1m[36mCart Destroy (24.7ms)[0m  [1m[31mDELETE FROM "carts"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:28:53 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"6xTZATYAJ3WceZUIZHmTjw\\\":{\\\"token\\\":\\\"$2a$10$IGfVbdOeDnYOBodHiptMj.ThXKru0mYp3CDIPxFC.ZMhzKVnqRU8e\\\",\\\"expiry\\\":1669274548},\\\"JPLwtbL4O1XLtJuyVQE3zQ\\\":{\\\"token\\\":\\\"$2a$10$VdCDgv92CJ9eLJPo80xJJ.sM/AEyN/FLpMdSSUblClYHfHVKSe5PG\\\",\\\"expiry\\\":1669274568},\\\"a7ta0u4jfV3nYq2Fqhugmg\\\":{\\\"token\\\":\\\"$2a$10$GKyf8oxpoDSqC/fqMWYxoOFfLdxQUuoaCVEs.AnlTiGpslQ4NqkNq\\\",\\\"expiry\\\":1669274580},\\\"RIFDKCUTuDKXewk834ZnGQ\\\":{\\\"token\\\":\\\"$2a$10$EZ7Isthq4NpM0B.7SYAV3OwKKKGATnjScaUvCNDpiUijwElG/OviW\\\",\\\"expiry\\\":1669274864},\\\"NwmZi_G-VLEcQIhRu4GmrQ\\\":{\\\"token\\\":\\\"$2a$10$YYP4xU6Mt2.F39e75AmMD.6rGU3R6Hm4oEZuABR/OFuYB0RgWAvxK\\\",\\\"expiry\\\":1669274933}}\""], ["updated_at", "2020-11-24 07:28:53.530086"], ["id", 1]]
  [1m[35m (24.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 39], ["current_sign_in_at", "2020-11-24 07:28:53.558163"], ["last_sign_in_at", "2020-11-24 07:27:44.245083"], ["updated_at", "2020-11-24 07:28:53.558591"], ["id", 1]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.2ms | ActiveRecord: 34.1ms | Allocations: 25797)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:28:53 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.4ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
Validation failed: Product variant can't be blank
Completed 400 Bad Request in 98ms (Views: 0.2ms | ActiveRecord: 7.5ms | Allocations: 12563)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:29:14 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"JPLwtbL4O1XLtJuyVQE3zQ\\\":{\\\"token\\\":\\\"$2a$10$VdCDgv92CJ9eLJPo80xJJ.sM/AEyN/FLpMdSSUblClYHfHVKSe5PG\\\",\\\"expiry\\\":1669274568},\\\"a7ta0u4jfV3nYq2Fqhugmg\\\":{\\\"token\\\":\\\"$2a$10$GKyf8oxpoDSqC/fqMWYxoOFfLdxQUuoaCVEs.AnlTiGpslQ4NqkNq\\\",\\\"expiry\\\":1669274580},\\\"RIFDKCUTuDKXewk834ZnGQ\\\":{\\\"token\\\":\\\"$2a$10$EZ7Isthq4NpM0B.7SYAV3OwKKKGATnjScaUvCNDpiUijwElG/OviW\\\",\\\"expiry\\\":1669274864},\\\"NwmZi_G-VLEcQIhRu4GmrQ\\\":{\\\"token\\\":\\\"$2a$10$YYP4xU6Mt2.F39e75AmMD.6rGU3R6Hm4oEZuABR/OFuYB0RgWAvxK\\\",\\\"expiry\\\":1669274933},\\\"3pMgRtz_YHiXeWeyY7pbxw\\\":{\\\"token\\\":\\\"$2a$10$OqwaTSkvgHE6nlA1VHdCEuFl2M3/FLzYzU0.t6f3JZf0YZj.4IxnW\\\",\\\"expiry\\\":1669274954}}\""], ["updated_at", "2020-11-24 07:29:14.563477"], ["id", 1]]
  [1m[35m (24.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 40], ["current_sign_in_at", "2020-11-24 07:29:14.592240"], ["last_sign_in_at", "2020-11-24 07:28:53.558163"], ["updated_at", "2020-11-24 07:29:14.592864"], ["id", 1]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.2ms | ActiveRecord: 34.2ms | Allocations: 25771)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:29:14 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "product_variant_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["product_variant_id", 1], ["quantity", 3], ["created_at", "2020-11-24 07:29:14.764126"], ["updated_at", "2020-11-24 07:29:14.764126"]]
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[35m (33.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
Completed 500 Internal Server Error in 145ms (ActiveRecord: 40.1ms | Allocations: 16370)



NoMethodError - undefined method `price' for #<ProductVariant:0x0000000002326750>:
  app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:30:16 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"a7ta0u4jfV3nYq2Fqhugmg\\\":{\\\"token\\\":\\\"$2a$10$GKyf8oxpoDSqC/fqMWYxoOFfLdxQUuoaCVEs.AnlTiGpslQ4NqkNq\\\",\\\"expiry\\\":1669274580},\\\"RIFDKCUTuDKXewk834ZnGQ\\\":{\\\"token\\\":\\\"$2a$10$EZ7Isthq4NpM0B.7SYAV3OwKKKGATnjScaUvCNDpiUijwElG/OviW\\\",\\\"expiry\\\":1669274864},\\\"NwmZi_G-VLEcQIhRu4GmrQ\\\":{\\\"token\\\":\\\"$2a$10$YYP4xU6Mt2.F39e75AmMD.6rGU3R6Hm4oEZuABR/OFuYB0RgWAvxK\\\",\\\"expiry\\\":1669274933},\\\"3pMgRtz_YHiXeWeyY7pbxw\\\":{\\\"token\\\":\\\"$2a$10$OqwaTSkvgHE6nlA1VHdCEuFl2M3/FLzYzU0.t6f3JZf0YZj.4IxnW\\\",\\\"expiry\\\":1669274954},\\\"tjpyfFWKDawB-G4ohzzqyg\\\":{\\\"token\\\":\\\"$2a$10$OIlgemBSxy7qC6b.xQd96OVvWJSdK7lGjYBOZZT79lLijaLxjzfBi\\\",\\\"expiry\\\":1669275016}}\""], ["updated_at", "2020-11-24 07:30:16.567024"], ["id", 1]]
  [1m[35m (23.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 41], ["current_sign_in_at", "2020-11-24 07:30:16.595825"], ["last_sign_in_at", "2020-11-24 07:29:14.592240"], ["updated_at", "2020-11-24 07:30:16.596443"], ["id", 1]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.3ms | ActiveRecord: 31.4ms | Allocations: 25780)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:30:16 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 4], ["owner_type", "Cart"], ["item_type", "Product"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.3ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 4], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 1], ["item_type", "Product"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-24 07:30:16.791818"], ["updated_at", "2020-11-24 07:30:16.791818"]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (32.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
No template found for Api::V1::CartsController#add_to_cart, rendering head :no_content
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 166ms (ActiveRecord: 43.3ms | Allocations: 33784)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:30:46 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"RIFDKCUTuDKXewk834ZnGQ\\\":{\\\"token\\\":\\\"$2a$10$EZ7Isthq4NpM0B.7SYAV3OwKKKGATnjScaUvCNDpiUijwElG/OviW\\\",\\\"expiry\\\":1669274864},\\\"NwmZi_G-VLEcQIhRu4GmrQ\\\":{\\\"token\\\":\\\"$2a$10$YYP4xU6Mt2.F39e75AmMD.6rGU3R6Hm4oEZuABR/OFuYB0RgWAvxK\\\",\\\"expiry\\\":1669274933},\\\"3pMgRtz_YHiXeWeyY7pbxw\\\":{\\\"token\\\":\\\"$2a$10$OqwaTSkvgHE6nlA1VHdCEuFl2M3/FLzYzU0.t6f3JZf0YZj.4IxnW\\\",\\\"expiry\\\":1669274954},\\\"tjpyfFWKDawB-G4ohzzqyg\\\":{\\\"token\\\":\\\"$2a$10$OIlgemBSxy7qC6b.xQd96OVvWJSdK7lGjYBOZZT79lLijaLxjzfBi\\\",\\\"expiry\\\":1669275016},\\\"eGtQTO2jOCSIiSy8vQyDOg\\\":{\\\"token\\\":\\\"$2a$10$BsRSoroGS5/ZcnqiYn6PPehrexO/Jjg7FKGIxkPkQVSgKq4BN6ENu\\\",\\\"expiry\\\":1669275046}}\""], ["updated_at", "2020-11-24 07:30:46.923943"], ["id", 1]]
  [1m[35m (19.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 42], ["current_sign_in_at", "2020-11-24 07:30:46.950357"], ["last_sign_in_at", "2020-11-24 07:30:16.595825"], ["updated_at", "2020-11-24 07:30:46.950970"], ["id", 1]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.3ms | ActiveRecord: 26.9ms | Allocations: 25816)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:30:46 +0700

SyntaxError - syntax error, unexpected ':', expecting `end'
        render :json :ok
                     ^
:
  app/controllers/api/v1/carts_controller.rb:24:in `'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:30:57 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"NwmZi_G-VLEcQIhRu4GmrQ\\\":{\\\"token\\\":\\\"$2a$10$YYP4xU6Mt2.F39e75AmMD.6rGU3R6Hm4oEZuABR/OFuYB0RgWAvxK\\\",\\\"expiry\\\":1669274933},\\\"3pMgRtz_YHiXeWeyY7pbxw\\\":{\\\"token\\\":\\\"$2a$10$OqwaTSkvgHE6nlA1VHdCEuFl2M3/FLzYzU0.t6f3JZf0YZj.4IxnW\\\",\\\"expiry\\\":1669274954},\\\"tjpyfFWKDawB-G4ohzzqyg\\\":{\\\"token\\\":\\\"$2a$10$OIlgemBSxy7qC6b.xQd96OVvWJSdK7lGjYBOZZT79lLijaLxjzfBi\\\",\\\"expiry\\\":1669275016},\\\"eGtQTO2jOCSIiSy8vQyDOg\\\":{\\\"token\\\":\\\"$2a$10$BsRSoroGS5/ZcnqiYn6PPehrexO/Jjg7FKGIxkPkQVSgKq4BN6ENu\\\",\\\"expiry\\\":1669275046},\\\"Ejm3tWW88GGpFWJzFh-N8g\\\":{\\\"token\\\":\\\"$2a$10$qL8GzXtYmaVxWY9P9cwbxOgNkyGG4gUA/KQEpEwRN3f02hJJB4L4S\\\",\\\"expiry\\\":1669275057}}\""], ["updated_at", "2020-11-24 07:30:57.589013"], ["id", 1]]
  [1m[35m (16.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 43], ["current_sign_in_at", "2020-11-24 07:30:57.609884"], ["last_sign_in_at", "2020-11-24 07:30:46.950357"], ["updated_at", "2020-11-24 07:30:57.610322"], ["id", 1]]
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.2ms | ActiveRecord: 25.8ms | Allocations: 25797)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:30:57 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.4ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 4], ["owner_type", "Cart"], ["item_type", "Product"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 6], ["updated_at", "2020-11-24 07:30:57.793697"], ["id", 4]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (22.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 157ms (Views: 0.2ms | ActiveRecord: 35.6ms | Allocations: 33796)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:31:18 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"3pMgRtz_YHiXeWeyY7pbxw\\\":{\\\"token\\\":\\\"$2a$10$OqwaTSkvgHE6nlA1VHdCEuFl2M3/FLzYzU0.t6f3JZf0YZj.4IxnW\\\",\\\"expiry\\\":1669274954},\\\"tjpyfFWKDawB-G4ohzzqyg\\\":{\\\"token\\\":\\\"$2a$10$OIlgemBSxy7qC6b.xQd96OVvWJSdK7lGjYBOZZT79lLijaLxjzfBi\\\",\\\"expiry\\\":1669275016},\\\"eGtQTO2jOCSIiSy8vQyDOg\\\":{\\\"token\\\":\\\"$2a$10$BsRSoroGS5/ZcnqiYn6PPehrexO/Jjg7FKGIxkPkQVSgKq4BN6ENu\\\",\\\"expiry\\\":1669275046},\\\"Ejm3tWW88GGpFWJzFh-N8g\\\":{\\\"token\\\":\\\"$2a$10$qL8GzXtYmaVxWY9P9cwbxOgNkyGG4gUA/KQEpEwRN3f02hJJB4L4S\\\",\\\"expiry\\\":1669275057},\\\"dakgy92uJgxRqEBiP-ETlQ\\\":{\\\"token\\\":\\\"$2a$10$RUO5kxtEmQAE548P2h5e0Ok4RV.wC8oX5LsMzMOt1uzr0puz4wg1.\\\",\\\"expiry\\\":1669275079}}\""], ["updated_at", "2020-11-24 07:31:19.298842"], ["id", 1]]
  [1m[35m (16.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 44], ["current_sign_in_at", "2020-11-24 07:31:19.321341"], ["last_sign_in_at", "2020-11-24 07:30:57.609884"], ["updated_at", "2020-11-24 07:31:19.322241"], ["id", 1]]
  [1m[35m (12.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.2ms | ActiveRecord: 33.5ms | Allocations: 25812)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:31:19 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 4], ["owner_type", "Cart"], ["item_type", "Product"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.4ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 9], ["updated_at", "2020-11-24 07:31:19.548886"], ["id", 4]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (21.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 166ms (Views: 0.2ms | ActiveRecord: 32.2ms | Allocations: 33810)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:31:32 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"tjpyfFWKDawB-G4ohzzqyg\\\":{\\\"token\\\":\\\"$2a$10$OIlgemBSxy7qC6b.xQd96OVvWJSdK7lGjYBOZZT79lLijaLxjzfBi\\\",\\\"expiry\\\":1669275016},\\\"eGtQTO2jOCSIiSy8vQyDOg\\\":{\\\"token\\\":\\\"$2a$10$BsRSoroGS5/ZcnqiYn6PPehrexO/Jjg7FKGIxkPkQVSgKq4BN6ENu\\\",\\\"expiry\\\":1669275046},\\\"Ejm3tWW88GGpFWJzFh-N8g\\\":{\\\"token\\\":\\\"$2a$10$qL8GzXtYmaVxWY9P9cwbxOgNkyGG4gUA/KQEpEwRN3f02hJJB4L4S\\\",\\\"expiry\\\":1669275057},\\\"dakgy92uJgxRqEBiP-ETlQ\\\":{\\\"token\\\":\\\"$2a$10$RUO5kxtEmQAE548P2h5e0Ok4RV.wC8oX5LsMzMOt1uzr0puz4wg1.\\\",\\\"expiry\\\":1669275079},\\\"Ob3VQ6-HUl4FsRx2ps1IeA\\\":{\\\"token\\\":\\\"$2a$10$Ss5ymf5325BJ/oJpD0zVlejMxcukpBnHkkpnSKRKw.9mcOIziSEti\\\",\\\"expiry\\\":1669275092}}\""], ["updated_at", "2020-11-24 07:31:32.776025"], ["id", 1]]
  [1m[35m (18.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 45], ["current_sign_in_at", "2020-11-24 07:31:32.799282"], ["last_sign_in_at", "2020-11-24 07:31:19.321341"], ["updated_at", "2020-11-24 07:31:32.799738"], ["id", 1]]
  [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.4ms | ActiveRecord: 27.4ms | Allocations: 25812)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:31:32 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 4], ["owner_type", "Cart"], ["item_type", "Product"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 12], ["updated_at", "2020-11-24 07:31:32.999905"], ["id", 4]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (28.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 163ms (Views: 0.2ms | ActiveRecord: 40.0ms | Allocations: 33809)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:31:57 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"eGtQTO2jOCSIiSy8vQyDOg\\\":{\\\"token\\\":\\\"$2a$10$BsRSoroGS5/ZcnqiYn6PPehrexO/Jjg7FKGIxkPkQVSgKq4BN6ENu\\\",\\\"expiry\\\":1669275046},\\\"Ejm3tWW88GGpFWJzFh-N8g\\\":{\\\"token\\\":\\\"$2a$10$qL8GzXtYmaVxWY9P9cwbxOgNkyGG4gUA/KQEpEwRN3f02hJJB4L4S\\\",\\\"expiry\\\":1669275057},\\\"dakgy92uJgxRqEBiP-ETlQ\\\":{\\\"token\\\":\\\"$2a$10$RUO5kxtEmQAE548P2h5e0Ok4RV.wC8oX5LsMzMOt1uzr0puz4wg1.\\\",\\\"expiry\\\":1669275079},\\\"Ob3VQ6-HUl4FsRx2ps1IeA\\\":{\\\"token\\\":\\\"$2a$10$Ss5ymf5325BJ/oJpD0zVlejMxcukpBnHkkpnSKRKw.9mcOIziSEti\\\",\\\"expiry\\\":1669275092},\\\"qTJroz0DUQ0j83STZcTNug\\\":{\\\"token\\\":\\\"$2a$10$VKqyWOYK/OmXvOAtSfqpLeJw7JzfX8djQkiKpuK78TnrjHWALUCn2\\\",\\\"expiry\\\":1669275117}}\""], ["updated_at", "2020-11-24 07:31:57.888805"], ["id", 1]]
  [1m[35m (45.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 46], ["current_sign_in_at", "2020-11-24 07:31:57.938134"], ["last_sign_in_at", "2020-11-24 07:31:32.799282"], ["updated_at", "2020-11-24 07:31:57.938604"], ["id", 1]]
  [1m[35m (72.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 350ms (Views: 0.2ms | ActiveRecord: 119.0ms | Allocations: 15019)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:31:58 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 4], ["owner_type", "Cart"], ["item_type", "Product"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.4ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 15], ["updated_at", "2020-11-24 07:31:58.133903"], ["id", 4]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (32.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 128ms (Views: 0.2ms | ActiveRecord: 33.9ms | Allocations: 12025)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:32:23 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Ejm3tWW88GGpFWJzFh-N8g\\\":{\\\"token\\\":\\\"$2a$10$qL8GzXtYmaVxWY9P9cwbxOgNkyGG4gUA/KQEpEwRN3f02hJJB4L4S\\\",\\\"expiry\\\":1669275057},\\\"dakgy92uJgxRqEBiP-ETlQ\\\":{\\\"token\\\":\\\"$2a$10$RUO5kxtEmQAE548P2h5e0Ok4RV.wC8oX5LsMzMOt1uzr0puz4wg1.\\\",\\\"expiry\\\":1669275079},\\\"Ob3VQ6-HUl4FsRx2ps1IeA\\\":{\\\"token\\\":\\\"$2a$10$Ss5ymf5325BJ/oJpD0zVlejMxcukpBnHkkpnSKRKw.9mcOIziSEti\\\",\\\"expiry\\\":1669275092},\\\"qTJroz0DUQ0j83STZcTNug\\\":{\\\"token\\\":\\\"$2a$10$VKqyWOYK/OmXvOAtSfqpLeJw7JzfX8djQkiKpuK78TnrjHWALUCn2\\\",\\\"expiry\\\":1669275117},\\\"2TW4aiNvwX-y0TUvRO2_yg\\\":{\\\"token\\\":\\\"$2a$10$tB2aqvnxGqh6bsRwqDDCleKfYG2hmdFoao12bbEqXkFDmM4L6uCEe\\\",\\\"expiry\\\":1669275143}}\""], ["updated_at", "2020-11-24 07:32:23.696997"], ["id", 1]]
  [1m[35m (32.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 47], ["current_sign_in_at", "2020-11-24 07:32:23.733426"], ["last_sign_in_at", "2020-11-24 07:31:57.938134"], ["updated_at", "2020-11-24 07:32:23.733912"], ["id", 1]]
  [1m[35m (52.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 0.2ms | ActiveRecord: 86.1ms | Allocations: 15017)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:32:23 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>0}, "cart"=>{}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 4], ["owner_type", "Cart"], ["item_type", "Product"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 18], ["updated_at", "2020-11-24 07:32:23.951111"], ["id", 4]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (20.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 114ms (Views: 0.2ms | ActiveRecord: 23.2ms | Allocations: 12030)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:34:13 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"dakgy92uJgxRqEBiP-ETlQ\\\":{\\\"token\\\":\\\"$2a$10$RUO5kxtEmQAE548P2h5e0Ok4RV.wC8oX5LsMzMOt1uzr0puz4wg1.\\\",\\\"expiry\\\":1669275079},\\\"Ob3VQ6-HUl4FsRx2ps1IeA\\\":{\\\"token\\\":\\\"$2a$10$Ss5ymf5325BJ/oJpD0zVlejMxcukpBnHkkpnSKRKw.9mcOIziSEti\\\",\\\"expiry\\\":1669275092},\\\"qTJroz0DUQ0j83STZcTNug\\\":{\\\"token\\\":\\\"$2a$10$VKqyWOYK/OmXvOAtSfqpLeJw7JzfX8djQkiKpuK78TnrjHWALUCn2\\\",\\\"expiry\\\":1669275117},\\\"2TW4aiNvwX-y0TUvRO2_yg\\\":{\\\"token\\\":\\\"$2a$10$tB2aqvnxGqh6bsRwqDDCleKfYG2hmdFoao12bbEqXkFDmM4L6uCEe\\\",\\\"expiry\\\":1669275143},\\\"7KIzV6ZKYUefDCXr1fWI3A\\\":{\\\"token\\\":\\\"$2a$10$ikI4SGvolGC9T3T8dEttr.wUeMVy8bsBeM35VJ7oiVAA0SEu4K8vC\\\",\\\"expiry\\\":1669275254}}\""], ["updated_at", "2020-11-24 07:34:14.052514"], ["id", 1]]
  [1m[35m (24.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 48], ["current_sign_in_at", "2020-11-24 07:34:14.082226"], ["last_sign_in_at", "2020-11-24 07:32:23.733426"], ["updated_at", "2020-11-24 07:34:14.082800"], ["id", 1]]
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.2ms | ActiveRecord: 34.5ms | Allocations: 25818)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:34:14 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>0}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 4], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.3ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 4], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 1], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-24 07:34:14.292085"], ["updated_at", "2020-11-24 07:34:14.292085"]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (51.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 189ms (Views: 0.3ms | ActiveRecord: 63.7ms | Allocations: 33651)


  [1m[36mCart Destroy (58.9ms)[0m  [1m[31mDELETE FROM "carts"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:34:22 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Ob3VQ6-HUl4FsRx2ps1IeA\\\":{\\\"token\\\":\\\"$2a$10$Ss5ymf5325BJ/oJpD0zVlejMxcukpBnHkkpnSKRKw.9mcOIziSEti\\\",\\\"expiry\\\":1669275092},\\\"qTJroz0DUQ0j83STZcTNug\\\":{\\\"token\\\":\\\"$2a$10$VKqyWOYK/OmXvOAtSfqpLeJw7JzfX8djQkiKpuK78TnrjHWALUCn2\\\",\\\"expiry\\\":1669275117},\\\"2TW4aiNvwX-y0TUvRO2_yg\\\":{\\\"token\\\":\\\"$2a$10$tB2aqvnxGqh6bsRwqDDCleKfYG2hmdFoao12bbEqXkFDmM4L6uCEe\\\",\\\"expiry\\\":1669275143},\\\"7KIzV6ZKYUefDCXr1fWI3A\\\":{\\\"token\\\":\\\"$2a$10$ikI4SGvolGC9T3T8dEttr.wUeMVy8bsBeM35VJ7oiVAA0SEu4K8vC\\\",\\\"expiry\\\":1669275254},\\\"ttNy3kck-TR4pjEkGTc4ww\\\":{\\\"token\\\":\\\"$2a$10$L7gbtIlH8JwlCzKJnZgaROQmXQ/uNiJ6FFaGrlu4HODXRtEpqQW.W\\\",\\\"expiry\\\":1669275262}}\""], ["updated_at", "2020-11-24 07:34:22.343491"], ["id", 1]]
  [1m[35m (69.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 49], ["current_sign_in_at", "2020-11-24 07:34:22.417314"], ["last_sign_in_at", "2020-11-24 07:34:14.082226"], ["updated_at", "2020-11-24 07:34:22.418060"], ["id", 1]]
  [1m[35m (20.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.3ms | ActiveRecord: 92.0ms | Allocations: 15018)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:34:22 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>0}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mCart Create (0.2ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "product_variant_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 1], ["store_id", 0], ["product_variant_id", 1], ["quantity", 3], ["created_at", "2020-11-24 07:34:22.562783"], ["updated_at", "2020-11-24 07:34:22.562783"]]
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[35m (46.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.4ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 5], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.5ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 5], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 1], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-24 07:34:22.619990"], ["updated_at", "2020-11-24 07:34:22.619990"]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 152ms (Views: 0.1ms | ActiveRecord: 57.6ms | Allocations: 14461)


  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:34:50 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"qTJroz0DUQ0j83STZcTNug\\\":{\\\"token\\\":\\\"$2a$10$VKqyWOYK/OmXvOAtSfqpLeJw7JzfX8djQkiKpuK78TnrjHWALUCn2\\\",\\\"expiry\\\":1669275117},\\\"2TW4aiNvwX-y0TUvRO2_yg\\\":{\\\"token\\\":\\\"$2a$10$tB2aqvnxGqh6bsRwqDDCleKfYG2hmdFoao12bbEqXkFDmM4L6uCEe\\\",\\\"expiry\\\":1669275143},\\\"7KIzV6ZKYUefDCXr1fWI3A\\\":{\\\"token\\\":\\\"$2a$10$ikI4SGvolGC9T3T8dEttr.wUeMVy8bsBeM35VJ7oiVAA0SEu4K8vC\\\",\\\"expiry\\\":1669275254},\\\"ttNy3kck-TR4pjEkGTc4ww\\\":{\\\"token\\\":\\\"$2a$10$L7gbtIlH8JwlCzKJnZgaROQmXQ/uNiJ6FFaGrlu4HODXRtEpqQW.W\\\",\\\"expiry\\\":1669275262},\\\"haUEua4KFas9t21lp06_Sg\\\":{\\\"token\\\":\\\"$2a$10$dSckHRPgaM/d5I2bHxfH6.rQBjlJbpbhhLfSJ4sOLPHbA4pCd9.IS\\\",\\\"expiry\\\":1669275290}}\""], ["updated_at", "2020-11-24 07:34:50.365744"], ["id", 1]]
  [1m[35m (22.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 50], ["current_sign_in_at", "2020-11-24 07:34:50.392192"], ["last_sign_in_at", "2020-11-24 07:34:22.417314"], ["updated_at", "2020-11-24 07:34:50.392692"], ["id", 1]]
  [1m[35m (49.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.2ms | ActiveRecord: 74.0ms | Allocations: 15017)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:34:50 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1, "notes"=>"Beli yang banyak"}, "cart"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 5], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 6], ["updated_at", "2020-11-24 07:34:50.567146"], ["id", 6]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[35m (53.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 157ms (Views: 0.3ms | ActiveRecord: 55.6ms | Allocations: 12233)


  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:35:21 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"2TW4aiNvwX-y0TUvRO2_yg\\\":{\\\"token\\\":\\\"$2a$10$tB2aqvnxGqh6bsRwqDDCleKfYG2hmdFoao12bbEqXkFDmM4L6uCEe\\\",\\\"expiry\\\":1669275143},\\\"7KIzV6ZKYUefDCXr1fWI3A\\\":{\\\"token\\\":\\\"$2a$10$ikI4SGvolGC9T3T8dEttr.wUeMVy8bsBeM35VJ7oiVAA0SEu4K8vC\\\",\\\"expiry\\\":1669275254},\\\"ttNy3kck-TR4pjEkGTc4ww\\\":{\\\"token\\\":\\\"$2a$10$L7gbtIlH8JwlCzKJnZgaROQmXQ/uNiJ6FFaGrlu4HODXRtEpqQW.W\\\",\\\"expiry\\\":1669275262},\\\"haUEua4KFas9t21lp06_Sg\\\":{\\\"token\\\":\\\"$2a$10$dSckHRPgaM/d5I2bHxfH6.rQBjlJbpbhhLfSJ4sOLPHbA4pCd9.IS\\\",\\\"expiry\\\":1669275290},\\\"FgPULFTUQ4dNctXOABu6Xg\\\":{\\\"token\\\":\\\"$2a$10$uA9.oOmMS7VQnqwbBnVRde0nF3kXGExTwXa9W13SEFdBk1jL097j6\\\",\\\"expiry\\\":1669275322}}\""], ["updated_at", "2020-11-24 07:35:22.128489"], ["id", 1]]
  [1m[35m (21.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 51], ["current_sign_in_at", "2020-11-24 07:35:22.153780"], ["last_sign_in_at", "2020-11-24 07:34:50.392192"], ["updated_at", "2020-11-24 07:35:22.154325"], ["id", 1]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.2ms | ActiveRecord: 32.0ms | Allocations: 25802)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:35:22 +0700

SyntaxError - syntax error, unexpected ')', expecting =>
...e_id,quantity: quantity, notes)
...                              ^
:
  app/controllers/api/v1/carts_controller.rb:21:in `'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:35:32 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"7KIzV6ZKYUefDCXr1fWI3A\\\":{\\\"token\\\":\\\"$2a$10$ikI4SGvolGC9T3T8dEttr.wUeMVy8bsBeM35VJ7oiVAA0SEu4K8vC\\\",\\\"expiry\\\":1669275254},\\\"ttNy3kck-TR4pjEkGTc4ww\\\":{\\\"token\\\":\\\"$2a$10$L7gbtIlH8JwlCzKJnZgaROQmXQ/uNiJ6FFaGrlu4HODXRtEpqQW.W\\\",\\\"expiry\\\":1669275262},\\\"haUEua4KFas9t21lp06_Sg\\\":{\\\"token\\\":\\\"$2a$10$dSckHRPgaM/d5I2bHxfH6.rQBjlJbpbhhLfSJ4sOLPHbA4pCd9.IS\\\",\\\"expiry\\\":1669275290},\\\"FgPULFTUQ4dNctXOABu6Xg\\\":{\\\"token\\\":\\\"$2a$10$uA9.oOmMS7VQnqwbBnVRde0nF3kXGExTwXa9W13SEFdBk1jL097j6\\\",\\\"expiry\\\":1669275322},\\\"WnUdTLl0k7WV20oPSuZzeQ\\\":{\\\"token\\\":\\\"$2a$10$V7NHJJ6TAuyBOSELp3uDCuzLSmFizdOPeDbb6N1SqNdWLtVdpUceC\\\",\\\"expiry\\\":1669275332}}\""], ["updated_at", "2020-11-24 07:35:33.005064"], ["id", 1]]
  [1m[35m (16.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 52], ["current_sign_in_at", "2020-11-24 07:35:33.025863"], ["last_sign_in_at", "2020-11-24 07:35:22.153780"], ["updated_at", "2020-11-24 07:35:33.026283"], ["id", 1]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.2ms | ActiveRecord: 26.4ms | Allocations: 25806)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:35:33 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1, "notes"=>"Beli yang banyak"}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:16:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 5], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 9], ["updated_at", "2020-11-24 07:35:33.218591"], ["id", 6]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[35m (22.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 160ms (Views: 0.2ms | ActiveRecord: 35.7ms | Allocations: 33831)


  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:36:04 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"ttNy3kck-TR4pjEkGTc4ww\\\":{\\\"token\\\":\\\"$2a$10$L7gbtIlH8JwlCzKJnZgaROQmXQ/uNiJ6FFaGrlu4HODXRtEpqQW.W\\\",\\\"expiry\\\":1669275262},\\\"haUEua4KFas9t21lp06_Sg\\\":{\\\"token\\\":\\\"$2a$10$dSckHRPgaM/d5I2bHxfH6.rQBjlJbpbhhLfSJ4sOLPHbA4pCd9.IS\\\",\\\"expiry\\\":1669275290},\\\"FgPULFTUQ4dNctXOABu6Xg\\\":{\\\"token\\\":\\\"$2a$10$uA9.oOmMS7VQnqwbBnVRde0nF3kXGExTwXa9W13SEFdBk1jL097j6\\\",\\\"expiry\\\":1669275322},\\\"WnUdTLl0k7WV20oPSuZzeQ\\\":{\\\"token\\\":\\\"$2a$10$V7NHJJ6TAuyBOSELp3uDCuzLSmFizdOPeDbb6N1SqNdWLtVdpUceC\\\",\\\"expiry\\\":1669275332},\\\"O2KJMn0fB8khLJWZnFnU4A\\\":{\\\"token\\\":\\\"$2a$10$MIAn5ULalNlR2HwXfw0mC.JcpdaV4LNI0d.IWxuyFA/sKn/G28rwq\\\",\\\"expiry\\\":1669275364}}\""], ["updated_at", "2020-11-24 07:36:04.493152"], ["id", 1]]
  [1m[35m (51.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 53], ["current_sign_in_at", "2020-11-24 07:36:04.549503"], ["last_sign_in_at", "2020-11-24 07:35:33.025863"], ["updated_at", "2020-11-24 07:36:04.550105"], ["id", 1]]
  [1m[35m (31.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.3ms | ActiveRecord: 85.1ms | Allocations: 15018)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:36:04 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1, "notes"=>"Beli yang banyak"}, "cart"=>{}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:16:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 5], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 12], ["updated_at", "2020-11-24 07:36:04.743471"], ["id", 6]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[35m (17.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 120ms (Views: 0.2ms | ActiveRecord: 19.7ms | Allocations: 12029)


  [1m[36mCart Destroy (36.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:36:32 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"haUEua4KFas9t21lp06_Sg\\\":{\\\"token\\\":\\\"$2a$10$dSckHRPgaM/d5I2bHxfH6.rQBjlJbpbhhLfSJ4sOLPHbA4pCd9.IS\\\",\\\"expiry\\\":1669275290},\\\"FgPULFTUQ4dNctXOABu6Xg\\\":{\\\"token\\\":\\\"$2a$10$uA9.oOmMS7VQnqwbBnVRde0nF3kXGExTwXa9W13SEFdBk1jL097j6\\\",\\\"expiry\\\":1669275322},\\\"WnUdTLl0k7WV20oPSuZzeQ\\\":{\\\"token\\\":\\\"$2a$10$V7NHJJ6TAuyBOSELp3uDCuzLSmFizdOPeDbb6N1SqNdWLtVdpUceC\\\",\\\"expiry\\\":1669275332},\\\"O2KJMn0fB8khLJWZnFnU4A\\\":{\\\"token\\\":\\\"$2a$10$MIAn5ULalNlR2HwXfw0mC.JcpdaV4LNI0d.IWxuyFA/sKn/G28rwq\\\",\\\"expiry\\\":1669275364},\\\"Kodk6__uiHSrtxdKrUxquA\\\":{\\\"token\\\":\\\"$2a$10$ijgg4GHNPI2pIDddcm7HZOuAKwWQbqRXSYoa2THrLK3iw3wYY6hBq\\\",\\\"expiry\\\":1669275393}}\""], ["updated_at", "2020-11-24 07:36:33.085681"], ["id", 1]]
  [1m[35m (19.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 54], ["current_sign_in_at", "2020-11-24 07:36:33.110737"], ["last_sign_in_at", "2020-11-24 07:36:04.549503"], ["updated_at", "2020-11-24 07:36:33.111332"], ["id", 1]]
  [1m[35m (56.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 317ms (Views: 0.3ms | ActiveRecord: 77.2ms | Allocations: 15021)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:36:33 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1, "notes"=>"Beli yang banyak"}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:16:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "product_variant_id", "quantity", "notes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["product_variant_id", 1], ["quantity", 3], ["notes", "Beli yang banyak"], ["created_at", "2020-11-24 07:36:33.300371"], ["updated_at", "2020-11-24 07:36:33.300371"]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (16.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 6], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.3ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 6], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 1], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-24 07:36:33.327945"], ["updated_at", "2020-11-24 07:36:33.327945"]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[35m (44.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `add_to_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 163ms (Views: 0.4ms | ActiveRecord: 63.2ms | Allocations: 14568)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:39:06 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"FgPULFTUQ4dNctXOABu6Xg\\\":{\\\"token\\\":\\\"$2a$10$uA9.oOmMS7VQnqwbBnVRde0nF3kXGExTwXa9W13SEFdBk1jL097j6\\\",\\\"expiry\\\":1669275322},\\\"WnUdTLl0k7WV20oPSuZzeQ\\\":{\\\"token\\\":\\\"$2a$10$V7NHJJ6TAuyBOSELp3uDCuzLSmFizdOPeDbb6N1SqNdWLtVdpUceC\\\",\\\"expiry\\\":1669275332},\\\"O2KJMn0fB8khLJWZnFnU4A\\\":{\\\"token\\\":\\\"$2a$10$MIAn5ULalNlR2HwXfw0mC.JcpdaV4LNI0d.IWxuyFA/sKn/G28rwq\\\",\\\"expiry\\\":1669275364},\\\"Kodk6__uiHSrtxdKrUxquA\\\":{\\\"token\\\":\\\"$2a$10$ijgg4GHNPI2pIDddcm7HZOuAKwWQbqRXSYoa2THrLK3iw3wYY6hBq\\\",\\\"expiry\\\":1669275393},\\\"0e9xcTrA4wZviuLQfY5CnQ\\\":{\\\"token\\\":\\\"$2a$10$1HHSYaMTyhBxXlMJMT2VD.b3jY1F.yBjQzd09BPc7obuIYUoOimTO\\\",\\\"expiry\\\":1669275547}}\""], ["updated_at", "2020-11-24 07:39:07.348119"], ["id", 1]]
  [1m[35m (18.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 55], ["current_sign_in_at", "2020-11-24 07:39:07.370696"], ["last_sign_in_at", "2020-11-24 07:36:33.110737"], ["updated_at", "2020-11-24 07:39:07.371244"], ["id", 1]]
  [1m[35m (3.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.2ms | ActiveRecord: 27.6ms | Allocations: 25813)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:39:07 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1, "notes"=>"Beli yang banyak"}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 6], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 6], ["updated_at", "2020-11-24 07:39:07.573380"], ["id", 7]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[35m (26.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 160ms (Views: 0.2ms | ActiveRecord: 36.4ms | Allocations: 33812)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:39:44 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"WnUdTLl0k7WV20oPSuZzeQ\\\":{\\\"token\\\":\\\"$2a$10$V7NHJJ6TAuyBOSELp3uDCuzLSmFizdOPeDbb6N1SqNdWLtVdpUceC\\\",\\\"expiry\\\":1669275332},\\\"O2KJMn0fB8khLJWZnFnU4A\\\":{\\\"token\\\":\\\"$2a$10$MIAn5ULalNlR2HwXfw0mC.JcpdaV4LNI0d.IWxuyFA/sKn/G28rwq\\\",\\\"expiry\\\":1669275364},\\\"Kodk6__uiHSrtxdKrUxquA\\\":{\\\"token\\\":\\\"$2a$10$ijgg4GHNPI2pIDddcm7HZOuAKwWQbqRXSYoa2THrLK3iw3wYY6hBq\\\",\\\"expiry\\\":1669275393},\\\"0e9xcTrA4wZviuLQfY5CnQ\\\":{\\\"token\\\":\\\"$2a$10$1HHSYaMTyhBxXlMJMT2VD.b3jY1F.yBjQzd09BPc7obuIYUoOimTO\\\",\\\"expiry\\\":1669275547},\\\"7sGw5vZ49l5v0fwhyEQ0OQ\\\":{\\\"token\\\":\\\"$2a$10$bcg49qu23Dq2f8dnmxHSb.1p38VJnnghahA.RjHc65JlRkNvSUe/O\\\",\\\"expiry\\\":1669275585}}\""], ["updated_at", "2020-11-24 07:39:45.040495"], ["id", 1]]
  [1m[35m (23.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 56], ["current_sign_in_at", "2020-11-24 07:39:45.067522"], ["last_sign_in_at", "2020-11-24 07:39:07.370696"], ["updated_at", "2020-11-24 07:39:45.068036"], ["id", 1]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.2ms | ActiveRecord: 31.0ms | Allocations: 25785)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:39:45 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1, "notes"=>"Beli yang banyak"}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 6], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 9], ["updated_at", "2020-11-24 07:39:45.266160"], ["id", 7]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[35m (18.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 155ms (Views: 0.2ms | ActiveRecord: 28.8ms | Allocations: 33799)


  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 6], ["owner_type", "Cart"]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 6], ["owner_type", "Cart"]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 6], ["owner_type", "Cart"]]
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.4ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.4ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductVariant Load (0.4ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2997034632337992540)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to ModifyCartAndShoppingCart (20201124074931)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.9ms)[0m  [1m[35mALTER TABLE "carts" DROP COLUMN "product_variant_id"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "carts" DROP COLUMN "quantity"[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "carts" DROP COLUMN "notes"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "shopping_cart_items" ADD "notes" text[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201124074931"]]
  [1m[35m (23.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2997034632337992540)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCart Destroy (22.4ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mShoppingCartItem Destroy (25.0ms)[0m  [1m[31mDELETE FROM "shopping_cart_items"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:52:24 +0700
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"O2KJMn0fB8khLJWZnFnU4A\\\":{\\\"token\\\":\\\"$2a$10$MIAn5ULalNlR2HwXfw0mC.JcpdaV4LNI0d.IWxuyFA/sKn/G28rwq\\\",\\\"expiry\\\":1669275364},\\\"Kodk6__uiHSrtxdKrUxquA\\\":{\\\"token\\\":\\\"$2a$10$ijgg4GHNPI2pIDddcm7HZOuAKwWQbqRXSYoa2THrLK3iw3wYY6hBq\\\",\\\"expiry\\\":1669275393},\\\"0e9xcTrA4wZviuLQfY5CnQ\\\":{\\\"token\\\":\\\"$2a$10$1HHSYaMTyhBxXlMJMT2VD.b3jY1F.yBjQzd09BPc7obuIYUoOimTO\\\",\\\"expiry\\\":1669275547},\\\"7sGw5vZ49l5v0fwhyEQ0OQ\\\":{\\\"token\\\":\\\"$2a$10$bcg49qu23Dq2f8dnmxHSb.1p38VJnnghahA.RjHc65JlRkNvSUe/O\\\",\\\"expiry\\\":1669275585},\\\"ZKGSoA3M3ue_PonHIaii_Q\\\":{\\\"token\\\":\\\"$2a$10$p359tmItnJ7gWSpc54vsEOK/CyOE5udQu5FOiaqtu9YG/m1vEhi9.\\\",\\\"expiry\\\":1669276345}}\""], ["updated_at", "2020-11-24 07:52:25.124240"], ["id", 1]]
  [1m[35m (24.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 57], ["current_sign_in_at", "2020-11-24 07:52:25.157524"], ["last_sign_in_at", "2020-11-24 07:39:45.067522"], ["updated_at", "2020-11-24 07:52:25.157941"], ["id", 1]]
  [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.3ms | ActiveRecord: 41.3ms | Allocations: 27476)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:52:25 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1, "notes"=>"Beli yang banyak"}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
Completed 500 Internal Server Error in 102ms (ActiveRecord: 5.1ms | Allocations: 13899)



NoMethodError - undefined method `product_variant_id' for #<Cart:0x00007f3158ae02c8>:
  app/controllers/api/v1/carts_controller.rb:16:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:53:07 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Kodk6__uiHSrtxdKrUxquA\\\":{\\\"token\\\":\\\"$2a$10$ijgg4GHNPI2pIDddcm7HZOuAKwWQbqRXSYoa2THrLK3iw3wYY6hBq\\\",\\\"expiry\\\":1669275393},\\\"0e9xcTrA4wZviuLQfY5CnQ\\\":{\\\"token\\\":\\\"$2a$10$1HHSYaMTyhBxXlMJMT2VD.b3jY1F.yBjQzd09BPc7obuIYUoOimTO\\\",\\\"expiry\\\":1669275547},\\\"7sGw5vZ49l5v0fwhyEQ0OQ\\\":{\\\"token\\\":\\\"$2a$10$bcg49qu23Dq2f8dnmxHSb.1p38VJnnghahA.RjHc65JlRkNvSUe/O\\\",\\\"expiry\\\":1669275585},\\\"ZKGSoA3M3ue_PonHIaii_Q\\\":{\\\"token\\\":\\\"$2a$10$p359tmItnJ7gWSpc54vsEOK/CyOE5udQu5FOiaqtu9YG/m1vEhi9.\\\",\\\"expiry\\\":1669276345},\\\"uALbv42jTR9cgExW4HeR0Q\\\":{\\\"token\\\":\\\"$2a$10$6pOmObLlQCAABaXll2Mh7.8vTum.rDUY.8JwMiJeIRQD9BAwlGCxu\\\",\\\"expiry\\\":1669276387}}\""], ["updated_at", "2020-11-24 07:53:07.689550"], ["id", 1]]
  [1m[35m (58.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 58], ["current_sign_in_at", "2020-11-24 07:53:07.752671"], ["last_sign_in_at", "2020-11-24 07:52:25.157524"], ["updated_at", "2020-11-24 07:53:07.753327"], ["id", 1]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.4ms | ActiveRecord: 67.9ms | Allocations: 25809)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:53:07 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1, "notes"=>"Beli yang banyak"}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:16:in `add_to_cart'
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["created_at", "2020-11-24 07:53:07.914567"], ["updated_at", "2020-11-24 07:53:07.914567"]]
  ↳ app/controllers/api/v1/carts_controller.rb:16:in `add_to_cart'
  [1m[35m (22.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:16:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 7], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.3ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 7], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 1], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-24 07:53:07.977868"], ["updated_at", "2020-11-24 07:53:07.977868"]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (48.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 212ms (Views: 0.2ms | ActiveRecord: 84.3ms | Allocations: 36855)


  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (1.9ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.7ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:53:41 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"0e9xcTrA4wZviuLQfY5CnQ\\\":{\\\"token\\\":\\\"$2a$10$1HHSYaMTyhBxXlMJMT2VD.b3jY1F.yBjQzd09BPc7obuIYUoOimTO\\\",\\\"expiry\\\":1669275547},\\\"7sGw5vZ49l5v0fwhyEQ0OQ\\\":{\\\"token\\\":\\\"$2a$10$bcg49qu23Dq2f8dnmxHSb.1p38VJnnghahA.RjHc65JlRkNvSUe/O\\\",\\\"expiry\\\":1669275585},\\\"ZKGSoA3M3ue_PonHIaii_Q\\\":{\\\"token\\\":\\\"$2a$10$p359tmItnJ7gWSpc54vsEOK/CyOE5udQu5FOiaqtu9YG/m1vEhi9.\\\",\\\"expiry\\\":1669276345},\\\"uALbv42jTR9cgExW4HeR0Q\\\":{\\\"token\\\":\\\"$2a$10$6pOmObLlQCAABaXll2Mh7.8vTum.rDUY.8JwMiJeIRQD9BAwlGCxu\\\",\\\"expiry\\\":1669276387},\\\"BzFieO7mO-XJ3qzZ40DkWg\\\":{\\\"token\\\":\\\"$2a$10$khTiLNNc51i/aGgV/LAc..dHyWQ4tWHKSOZ./mP7zCGi3AEj2GzT6\\\",\\\"expiry\\\":1669276422}}\""], ["updated_at", "2020-11-24 07:53:42.078065"], ["id", 1]]
  [1m[35m (28.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 59], ["current_sign_in_at", "2020-11-24 07:53:42.110243"], ["last_sign_in_at", "2020-11-24 07:53:07.752671"], ["updated_at", "2020-11-24 07:53:42.110718"], ["id", 1]]
  [1m[35m (50.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.3ms | ActiveRecord: 80.5ms | Allocations: 15039)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:53:42 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1, "notes"=>"Beli yang banyak"}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 7], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 86ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 10105)


  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.6ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "shopping_cart_items"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "shopping_cart_items"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shopping_cart_items"[0m
  [1m[36mProductVariant Load (0.4ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" ORDER BY "product_variants"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:54:34 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"7sGw5vZ49l5v0fwhyEQ0OQ\\\":{\\\"token\\\":\\\"$2a$10$bcg49qu23Dq2f8dnmxHSb.1p38VJnnghahA.RjHc65JlRkNvSUe/O\\\",\\\"expiry\\\":1669275585},\\\"ZKGSoA3M3ue_PonHIaii_Q\\\":{\\\"token\\\":\\\"$2a$10$p359tmItnJ7gWSpc54vsEOK/CyOE5udQu5FOiaqtu9YG/m1vEhi9.\\\",\\\"expiry\\\":1669276345},\\\"uALbv42jTR9cgExW4HeR0Q\\\":{\\\"token\\\":\\\"$2a$10$6pOmObLlQCAABaXll2Mh7.8vTum.rDUY.8JwMiJeIRQD9BAwlGCxu\\\",\\\"expiry\\\":1669276387},\\\"BzFieO7mO-XJ3qzZ40DkWg\\\":{\\\"token\\\":\\\"$2a$10$khTiLNNc51i/aGgV/LAc..dHyWQ4tWHKSOZ./mP7zCGi3AEj2GzT6\\\",\\\"expiry\\\":1669276422},\\\"rx0tTYvOw4MZuI9iZrOv4Q\\\":{\\\"token\\\":\\\"$2a$10$hCsLwsj5k.uqBn9Ca73kpu.nWXZ.USyPfikPf2q3PVGUpUj1IXuQy\\\",\\\"expiry\\\":1669276475}}\""], ["updated_at", "2020-11-24 07:54:35.086153"], ["id", 1]]
  [1m[35m (31.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 60], ["current_sign_in_at", "2020-11-24 07:54:35.121350"], ["last_sign_in_at", "2020-11-24 07:53:42.110243"], ["updated_at", "2020-11-24 07:54:35.121947"], ["id", 1]]
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.3ms | ActiveRecord: 44.8ms | Allocations: 15038)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 14:54:35 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>90, "quantity"=>3, "store_id"=>1, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 7], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.3ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 7], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 90], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-24 07:54:35.266204"], ["updated_at", "2020-11-24 07:54:35.266204"]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (35.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 125ms (Views: 0.2ms | ActiveRecord: 37.0ms | Allocations: 11975)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "shopping_cart_items"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shopping_cart_items"[0m
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 14:59:29 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"ZKGSoA3M3ue_PonHIaii_Q\\\":{\\\"token\\\":\\\"$2a$10$p359tmItnJ7gWSpc54vsEOK/CyOE5udQu5FOiaqtu9YG/m1vEhi9.\\\",\\\"expiry\\\":1669276345},\\\"uALbv42jTR9cgExW4HeR0Q\\\":{\\\"token\\\":\\\"$2a$10$6pOmObLlQCAABaXll2Mh7.8vTum.rDUY.8JwMiJeIRQD9BAwlGCxu\\\",\\\"expiry\\\":1669276387},\\\"BzFieO7mO-XJ3qzZ40DkWg\\\":{\\\"token\\\":\\\"$2a$10$khTiLNNc51i/aGgV/LAc..dHyWQ4tWHKSOZ./mP7zCGi3AEj2GzT6\\\",\\\"expiry\\\":1669276422},\\\"rx0tTYvOw4MZuI9iZrOv4Q\\\":{\\\"token\\\":\\\"$2a$10$hCsLwsj5k.uqBn9Ca73kpu.nWXZ.USyPfikPf2q3PVGUpUj1IXuQy\\\",\\\"expiry\\\":1669276475},\\\"6E-mzR0MDhjVtAxJWsvEmg\\\":{\\\"token\\\":\\\"$2a$10$K19WAG/udwgRdZJpNmUWp.OH.4NXCNGsUMIZLRU42pvzWo3HRzvIG\\\",\\\"expiry\\\":1669276769}}\""], ["updated_at", "2020-11-24 07:59:29.648581"], ["id", 1]]
  [1m[35m (28.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 61], ["current_sign_in_at", "2020-11-24 07:59:29.680545"], ["last_sign_in_at", "2020-11-24 07:54:35.121350"], ["updated_at", "2020-11-24 07:59:29.680998"], ["id", 1]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.2ms | ActiveRecord: 39.4ms | Allocations: 25822)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 14:59:29 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 75ms (ActiveRecord: 1.8ms | Allocations: 3445)



ArgumentError - wrong number of arguments (given 2, expected 0):
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:00:08 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"uALbv42jTR9cgExW4HeR0Q\\\":{\\\"token\\\":\\\"$2a$10$6pOmObLlQCAABaXll2Mh7.8vTum.rDUY.8JwMiJeIRQD9BAwlGCxu\\\",\\\"expiry\\\":1669276387},\\\"BzFieO7mO-XJ3qzZ40DkWg\\\":{\\\"token\\\":\\\"$2a$10$khTiLNNc51i/aGgV/LAc..dHyWQ4tWHKSOZ./mP7zCGi3AEj2GzT6\\\",\\\"expiry\\\":1669276422},\\\"rx0tTYvOw4MZuI9iZrOv4Q\\\":{\\\"token\\\":\\\"$2a$10$hCsLwsj5k.uqBn9Ca73kpu.nWXZ.USyPfikPf2q3PVGUpUj1IXuQy\\\",\\\"expiry\\\":1669276475},\\\"6E-mzR0MDhjVtAxJWsvEmg\\\":{\\\"token\\\":\\\"$2a$10$K19WAG/udwgRdZJpNmUWp.OH.4NXCNGsUMIZLRU42pvzWo3HRzvIG\\\",\\\"expiry\\\":1669276769},\\\"AzBqAacv4Fi9RtjhxDbS0w\\\":{\\\"token\\\":\\\"$2a$10$LslvCW8pWqb6VOyVayfagezXvUAybggizWOu/d.FfBH9kTMXpuY7a\\\",\\\"expiry\\\":1669276809}}\""], ["updated_at", "2020-11-24 08:00:09.347020"], ["id", 1]]
  [1m[35m (21.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 62], ["current_sign_in_at", "2020-11-24 08:00:09.374904"], ["last_sign_in_at", "2020-11-24 07:59:29.680545"], ["updated_at", "2020-11-24 08:00:09.375493"], ["id", 1]]
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.2ms | ActiveRecord: 31.2ms | Allocations: 25790)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:00:09 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 74ms (ActiveRecord: 1.2ms | Allocations: 3414)



ArgumentError - wrong number of arguments (given 2, expected 0):
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:00:22 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"BzFieO7mO-XJ3qzZ40DkWg\\\":{\\\"token\\\":\\\"$2a$10$khTiLNNc51i/aGgV/LAc..dHyWQ4tWHKSOZ./mP7zCGi3AEj2GzT6\\\",\\\"expiry\\\":1669276422},\\\"rx0tTYvOw4MZuI9iZrOv4Q\\\":{\\\"token\\\":\\\"$2a$10$hCsLwsj5k.uqBn9Ca73kpu.nWXZ.USyPfikPf2q3PVGUpUj1IXuQy\\\",\\\"expiry\\\":1669276475},\\\"6E-mzR0MDhjVtAxJWsvEmg\\\":{\\\"token\\\":\\\"$2a$10$K19WAG/udwgRdZJpNmUWp.OH.4NXCNGsUMIZLRU42pvzWo3HRzvIG\\\",\\\"expiry\\\":1669276769},\\\"AzBqAacv4Fi9RtjhxDbS0w\\\":{\\\"token\\\":\\\"$2a$10$LslvCW8pWqb6VOyVayfagezXvUAybggizWOu/d.FfBH9kTMXpuY7a\\\",\\\"expiry\\\":1669276809},\\\"d90CnlOVL10o6E944_liXA\\\":{\\\"token\\\":\\\"$2a$10$Kr1XtCitnBTlaMV.Np2TRucr9UzhRZ3FKZmdTlCanOcLdWWpSowiy\\\",\\\"expiry\\\":1669276822}}\""], ["updated_at", "2020-11-24 08:00:22.982738"], ["id", 1]]
  [1m[35m (21.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 63], ["current_sign_in_at", "2020-11-24 08:00:23.008849"], ["last_sign_in_at", "2020-11-24 08:00:09.374904"], ["updated_at", "2020-11-24 08:00:23.009288"], ["id", 1]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.2ms | ActiveRecord: 28.8ms | Allocations: 25769)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:00:23 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 80ms (ActiveRecord: 1.9ms | Allocations: 3409)



ArgumentError - wrong number of arguments (given 1, expected 0):
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:01:04 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"rx0tTYvOw4MZuI9iZrOv4Q\\\":{\\\"token\\\":\\\"$2a$10$hCsLwsj5k.uqBn9Ca73kpu.nWXZ.USyPfikPf2q3PVGUpUj1IXuQy\\\",\\\"expiry\\\":1669276475},\\\"6E-mzR0MDhjVtAxJWsvEmg\\\":{\\\"token\\\":\\\"$2a$10$K19WAG/udwgRdZJpNmUWp.OH.4NXCNGsUMIZLRU42pvzWo3HRzvIG\\\",\\\"expiry\\\":1669276769},\\\"AzBqAacv4Fi9RtjhxDbS0w\\\":{\\\"token\\\":\\\"$2a$10$LslvCW8pWqb6VOyVayfagezXvUAybggizWOu/d.FfBH9kTMXpuY7a\\\",\\\"expiry\\\":1669276809},\\\"d90CnlOVL10o6E944_liXA\\\":{\\\"token\\\":\\\"$2a$10$Kr1XtCitnBTlaMV.Np2TRucr9UzhRZ3FKZmdTlCanOcLdWWpSowiy\\\",\\\"expiry\\\":1669276822},\\\"RsipX9rL3VDHk9LOhhkRaw\\\":{\\\"token\\\":\\\"$2a$10$3iWmMLVEfO/Duni72hBhP.p0607YAkcJQOpEKnwWQAoWZnPh5Mtwm\\\",\\\"expiry\\\":1669276864}}\""], ["updated_at", "2020-11-24 08:01:04.966523"], ["id", 1]]
  [1m[35m (27.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 64], ["current_sign_in_at", "2020-11-24 08:01:04.998804"], ["last_sign_in_at", "2020-11-24 08:00:23.008849"], ["updated_at", "2020-11-24 08:01:04.999243"], ["id", 1]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.2ms | ActiveRecord: 37.9ms | Allocations: 25804)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:01:05 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 86ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 7853)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:01:19 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"6E-mzR0MDhjVtAxJWsvEmg\\\":{\\\"token\\\":\\\"$2a$10$K19WAG/udwgRdZJpNmUWp.OH.4NXCNGsUMIZLRU42pvzWo3HRzvIG\\\",\\\"expiry\\\":1669276769},\\\"AzBqAacv4Fi9RtjhxDbS0w\\\":{\\\"token\\\":\\\"$2a$10$LslvCW8pWqb6VOyVayfagezXvUAybggizWOu/d.FfBH9kTMXpuY7a\\\",\\\"expiry\\\":1669276809},\\\"d90CnlOVL10o6E944_liXA\\\":{\\\"token\\\":\\\"$2a$10$Kr1XtCitnBTlaMV.Np2TRucr9UzhRZ3FKZmdTlCanOcLdWWpSowiy\\\",\\\"expiry\\\":1669276822},\\\"RsipX9rL3VDHk9LOhhkRaw\\\":{\\\"token\\\":\\\"$2a$10$3iWmMLVEfO/Duni72hBhP.p0607YAkcJQOpEKnwWQAoWZnPh5Mtwm\\\",\\\"expiry\\\":1669276864},\\\"17V_HlQwPFQolaU-oH_VAQ\\\":{\\\"token\\\":\\\"$2a$10$Z/78RmgAWVJbgRoxhFhvCOl8/kZ5MsUVi8vIZbqKQop./p45hL2Xe\\\",\\\"expiry\\\":1669276879}}\""], ["updated_at", "2020-11-24 08:01:19.699096"], ["id", 1]]
  [1m[35m (493.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 65], ["current_sign_in_at", "2020-11-24 08:01:20.196515"], ["last_sign_in_at", "2020-11-24 08:01:04.998804"], ["updated_at", "2020-11-24 08:01:20.196916"], ["id", 1]]
  [1m[35m (29.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 761ms (Views: 0.2ms | ActiveRecord: 528.2ms | Allocations: 25785)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:01:20 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 75ms (ActiveRecord: 1.0ms | Allocations: 4776)



NoMethodError - undefined method `to_sym' for {:shopping_cart_items=>[{:product_variant=>:product}]}:Hash
Did you mean?  to_s
               to_set:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:02:38 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"AzBqAacv4Fi9RtjhxDbS0w\\\":{\\\"token\\\":\\\"$2a$10$LslvCW8pWqb6VOyVayfagezXvUAybggizWOu/d.FfBH9kTMXpuY7a\\\",\\\"expiry\\\":1669276809},\\\"d90CnlOVL10o6E944_liXA\\\":{\\\"token\\\":\\\"$2a$10$Kr1XtCitnBTlaMV.Np2TRucr9UzhRZ3FKZmdTlCanOcLdWWpSowiy\\\",\\\"expiry\\\":1669276822},\\\"RsipX9rL3VDHk9LOhhkRaw\\\":{\\\"token\\\":\\\"$2a$10$3iWmMLVEfO/Duni72hBhP.p0607YAkcJQOpEKnwWQAoWZnPh5Mtwm\\\",\\\"expiry\\\":1669276864},\\\"17V_HlQwPFQolaU-oH_VAQ\\\":{\\\"token\\\":\\\"$2a$10$Z/78RmgAWVJbgRoxhFhvCOl8/kZ5MsUVi8vIZbqKQop./p45hL2Xe\\\",\\\"expiry\\\":1669276879},\\\"wdfQPtix6fo0nTr6F6zv-A\\\":{\\\"token\\\":\\\"$2a$10$5FLVdFFylDKBxHbtyHoH5uiO/c3idzCqUWSZIzBBcJ3Rpf.nLtEQ.\\\",\\\"expiry\\\":1669276959}}\""], ["updated_at", "2020-11-24 08:02:39.223855"], ["id", 1]]
  [1m[35m (47.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 66], ["current_sign_in_at", "2020-11-24 08:02:39.274969"], ["last_sign_in_at", "2020-11-24 08:01:20.196515"], ["updated_at", "2020-11-24 08:02:39.275477"], ["id", 1]]
  [1m[35m (3.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 299ms (Views: 0.2ms | ActiveRecord: 54.9ms | Allocations: 25787)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:02:39 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 78ms (ActiveRecord: 1.9ms | Allocations: 4778)



NoMethodError - undefined method `to_sym' for {:shopping_cart_items=>[{:product_variant=>:product}]}:Hash
Did you mean?  to_s
               to_set:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:03:13 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"d90CnlOVL10o6E944_liXA\\\":{\\\"token\\\":\\\"$2a$10$Kr1XtCitnBTlaMV.Np2TRucr9UzhRZ3FKZmdTlCanOcLdWWpSowiy\\\",\\\"expiry\\\":1669276822},\\\"RsipX9rL3VDHk9LOhhkRaw\\\":{\\\"token\\\":\\\"$2a$10$3iWmMLVEfO/Duni72hBhP.p0607YAkcJQOpEKnwWQAoWZnPh5Mtwm\\\",\\\"expiry\\\":1669276864},\\\"17V_HlQwPFQolaU-oH_VAQ\\\":{\\\"token\\\":\\\"$2a$10$Z/78RmgAWVJbgRoxhFhvCOl8/kZ5MsUVi8vIZbqKQop./p45hL2Xe\\\",\\\"expiry\\\":1669276879},\\\"wdfQPtix6fo0nTr6F6zv-A\\\":{\\\"token\\\":\\\"$2a$10$5FLVdFFylDKBxHbtyHoH5uiO/c3idzCqUWSZIzBBcJ3Rpf.nLtEQ.\\\",\\\"expiry\\\":1669276959},\\\"OpORcA8ogqLIxvOZ2Gz46w\\\":{\\\"token\\\":\\\"$2a$10$RlEXliK6FBZDhIPcjQrc4urlKaW6utHGqtDncq8.wZZswW/E9PL0e\\\",\\\"expiry\\\":1669276994}}\""], ["updated_at", "2020-11-24 08:03:14.214967"], ["id", 1]]
  [1m[35m (21.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 67], ["current_sign_in_at", "2020-11-24 08:03:14.242138"], ["last_sign_in_at", "2020-11-24 08:02:39.274969"], ["updated_at", "2020-11-24 08:03:14.242572"], ["id", 1]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.2ms | ActiveRecord: 31.5ms | Allocations: 25803)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:03:14 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 78ms (ActiveRecord: 1.1ms | Allocations: 4772)



NoMethodError - undefined method `to_sym' for {:shopping_cart_items=>{:product_variant=>:product}}:Hash
Did you mean?  to_s
               to_set:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:03:35 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"RsipX9rL3VDHk9LOhhkRaw\\\":{\\\"token\\\":\\\"$2a$10$3iWmMLVEfO/Duni72hBhP.p0607YAkcJQOpEKnwWQAoWZnPh5Mtwm\\\",\\\"expiry\\\":1669276864},\\\"17V_HlQwPFQolaU-oH_VAQ\\\":{\\\"token\\\":\\\"$2a$10$Z/78RmgAWVJbgRoxhFhvCOl8/kZ5MsUVi8vIZbqKQop./p45hL2Xe\\\",\\\"expiry\\\":1669276879},\\\"wdfQPtix6fo0nTr6F6zv-A\\\":{\\\"token\\\":\\\"$2a$10$5FLVdFFylDKBxHbtyHoH5uiO/c3idzCqUWSZIzBBcJ3Rpf.nLtEQ.\\\",\\\"expiry\\\":1669276959},\\\"OpORcA8ogqLIxvOZ2Gz46w\\\":{\\\"token\\\":\\\"$2a$10$RlEXliK6FBZDhIPcjQrc4urlKaW6utHGqtDncq8.wZZswW/E9PL0e\\\",\\\"expiry\\\":1669276994},\\\"fPx09dQOh7deeuMdQfS3gA\\\":{\\\"token\\\":\\\"$2a$10$xQ9Y8mIgntCOwzT6P.N7ve/z5C5hKyOJMp8mdtbwiJx1tAQFWc7zK\\\",\\\"expiry\\\":1669277015}}\""], ["updated_at", "2020-11-24 08:03:35.636760"], ["id", 1]]
  [1m[35m (632.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 68], ["current_sign_in_at", "2020-11-24 08:03:36.272816"], ["last_sign_in_at", "2020-11-24 08:03:14.242138"], ["updated_at", "2020-11-24 08:03:36.273441"], ["id", 1]]
  [1m[35m (52.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 923ms (Views: 0.2ms | ActiveRecord: 689.1ms | Allocations: 25806)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:03:36 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 75ms (ActiveRecord: 1.2ms | Allocations: 4120)



NoMethodError - undefined method `[]' for nil:NilClass:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:04:18 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"17V_HlQwPFQolaU-oH_VAQ\\\":{\\\"token\\\":\\\"$2a$10$Z/78RmgAWVJbgRoxhFhvCOl8/kZ5MsUVi8vIZbqKQop./p45hL2Xe\\\",\\\"expiry\\\":1669276879},\\\"wdfQPtix6fo0nTr6F6zv-A\\\":{\\\"token\\\":\\\"$2a$10$5FLVdFFylDKBxHbtyHoH5uiO/c3idzCqUWSZIzBBcJ3Rpf.nLtEQ.\\\",\\\"expiry\\\":1669276959},\\\"OpORcA8ogqLIxvOZ2Gz46w\\\":{\\\"token\\\":\\\"$2a$10$RlEXliK6FBZDhIPcjQrc4urlKaW6utHGqtDncq8.wZZswW/E9PL0e\\\",\\\"expiry\\\":1669276994},\\\"fPx09dQOh7deeuMdQfS3gA\\\":{\\\"token\\\":\\\"$2a$10$xQ9Y8mIgntCOwzT6P.N7ve/z5C5hKyOJMp8mdtbwiJx1tAQFWc7zK\\\",\\\"expiry\\\":1669277015},\\\"2-MTGXki_TkJ6MkRsyeyzQ\\\":{\\\"token\\\":\\\"$2a$10$ux1V4zRRsLq2X/0hKepya..JvGI2t9o.IDK9GcHFQB11yuwATYZWS\\\",\\\"expiry\\\":1669277059}}\""], ["updated_at", "2020-11-24 08:04:19.256490"], ["id", 1]]
  [1m[35m (14.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 69], ["current_sign_in_at", "2020-11-24 08:04:19.274363"], ["last_sign_in_at", "2020-11-24 08:03:36.272816"], ["updated_at", "2020-11-24 08:04:19.274793"], ["id", 1]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.2ms | ActiveRecord: 24.8ms | Allocations: 25802)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:04:19 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 121ms (Views: 0.1ms | ActiveRecord: 6.5ms | Allocations: 17999)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:04:42 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"wdfQPtix6fo0nTr6F6zv-A\\\":{\\\"token\\\":\\\"$2a$10$5FLVdFFylDKBxHbtyHoH5uiO/c3idzCqUWSZIzBBcJ3Rpf.nLtEQ.\\\",\\\"expiry\\\":1669276959},\\\"OpORcA8ogqLIxvOZ2Gz46w\\\":{\\\"token\\\":\\\"$2a$10$RlEXliK6FBZDhIPcjQrc4urlKaW6utHGqtDncq8.wZZswW/E9PL0e\\\",\\\"expiry\\\":1669276994},\\\"fPx09dQOh7deeuMdQfS3gA\\\":{\\\"token\\\":\\\"$2a$10$xQ9Y8mIgntCOwzT6P.N7ve/z5C5hKyOJMp8mdtbwiJx1tAQFWc7zK\\\",\\\"expiry\\\":1669277015},\\\"2-MTGXki_TkJ6MkRsyeyzQ\\\":{\\\"token\\\":\\\"$2a$10$ux1V4zRRsLq2X/0hKepya..JvGI2t9o.IDK9GcHFQB11yuwATYZWS\\\",\\\"expiry\\\":1669277059},\\\"itIb3uXH03zZkC1J3JgRWA\\\":{\\\"token\\\":\\\"$2a$10$vXFSkWIa2W0zxJJoFNKG4uFK9Qbc/Oju50vqIKHKIgwUHeI0sSdZW\\\",\\\"expiry\\\":1669277082}}\""], ["updated_at", "2020-11-24 08:04:42.637110"], ["id", 1]]
  [1m[35m (19.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 70], ["current_sign_in_at", "2020-11-24 08:04:42.660855"], ["last_sign_in_at", "2020-11-24 08:04:19.274363"], ["updated_at", "2020-11-24 08:04:42.661284"], ["id", 1]]
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.2ms | ActiveRecord: 29.5ms | Allocations: 25786)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:04:42 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 103ms (Views: 0.1ms | ActiveRecord: 5.7ms | Allocations: 17768)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:05:58 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"OpORcA8ogqLIxvOZ2Gz46w\\\":{\\\"token\\\":\\\"$2a$10$RlEXliK6FBZDhIPcjQrc4urlKaW6utHGqtDncq8.wZZswW/E9PL0e\\\",\\\"expiry\\\":1669276994},\\\"fPx09dQOh7deeuMdQfS3gA\\\":{\\\"token\\\":\\\"$2a$10$xQ9Y8mIgntCOwzT6P.N7ve/z5C5hKyOJMp8mdtbwiJx1tAQFWc7zK\\\",\\\"expiry\\\":1669277015},\\\"2-MTGXki_TkJ6MkRsyeyzQ\\\":{\\\"token\\\":\\\"$2a$10$ux1V4zRRsLq2X/0hKepya..JvGI2t9o.IDK9GcHFQB11yuwATYZWS\\\",\\\"expiry\\\":1669277059},\\\"itIb3uXH03zZkC1J3JgRWA\\\":{\\\"token\\\":\\\"$2a$10$vXFSkWIa2W0zxJJoFNKG4uFK9Qbc/Oju50vqIKHKIgwUHeI0sSdZW\\\",\\\"expiry\\\":1669277082},\\\"AujiK6kZdF83ccRZ0BPujw\\\":{\\\"token\\\":\\\"$2a$10$mJAPjVDtnVAjPUiR7IDEMO4zwLUjF7VfDrhqkfvUAOhY8X1NZyvcC\\\",\\\"expiry\\\":1669277158}}\""], ["updated_at", "2020-11-24 08:05:58.679461"], ["id", 1]]
  [1m[35m (14.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 71], ["current_sign_in_at", "2020-11-24 08:05:58.698110"], ["last_sign_in_at", "2020-11-24 08:04:42.660855"], ["updated_at", "2020-11-24 08:05:58.698625"], ["id", 1]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 6.8ms | ActiveRecord: 23.0ms | Allocations: 25769)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:05:58 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
Completed 500 Internal Server Error in 116ms (ActiveRecord: 6.5ms | Allocations: 19289)



NoMethodError - undefined method `product_id' for #<ShoppingCartItem:0x00007f3160451760>
Did you mean?  product_variant:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:06:46 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"fPx09dQOh7deeuMdQfS3gA\\\":{\\\"token\\\":\\\"$2a$10$xQ9Y8mIgntCOwzT6P.N7ve/z5C5hKyOJMp8mdtbwiJx1tAQFWc7zK\\\",\\\"expiry\\\":1669277015},\\\"2-MTGXki_TkJ6MkRsyeyzQ\\\":{\\\"token\\\":\\\"$2a$10$ux1V4zRRsLq2X/0hKepya..JvGI2t9o.IDK9GcHFQB11yuwATYZWS\\\",\\\"expiry\\\":1669277059},\\\"itIb3uXH03zZkC1J3JgRWA\\\":{\\\"token\\\":\\\"$2a$10$vXFSkWIa2W0zxJJoFNKG4uFK9Qbc/Oju50vqIKHKIgwUHeI0sSdZW\\\",\\\"expiry\\\":1669277082},\\\"AujiK6kZdF83ccRZ0BPujw\\\":{\\\"token\\\":\\\"$2a$10$mJAPjVDtnVAjPUiR7IDEMO4zwLUjF7VfDrhqkfvUAOhY8X1NZyvcC\\\",\\\"expiry\\\":1669277158},\\\"_m_SvbJhgpnIKv009O5iZg\\\":{\\\"token\\\":\\\"$2a$10$J0bZWG0nuIoy04YPoCj5Ou4qNEdwu2Y27Vvta9NE1OM1B0Pol3Vle\\\",\\\"expiry\\\":1669277206}}\""], ["updated_at", "2020-11-24 08:06:46.874554"], ["id", 1]]
  [1m[35m (565.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 72], ["current_sign_in_at", "2020-11-24 08:06:47.444489"], ["last_sign_in_at", "2020-11-24 08:05:58.698110"], ["updated_at", "2020-11-24 08:06:47.445125"], ["id", 1]]
  [1m[35m (56.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 877ms (Views: 0.6ms | ActiveRecord: 627.0ms | Allocations: 25773)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:06:47 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
Completed 500 Internal Server Error in 112ms (ActiveRecord: 5.0ms | Allocations: 19243)



NoMethodError - undefined method `product_id' for #<ShoppingCartItem:0x00007f316059e1e0>
Did you mean?  product_variant:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:06:58 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"2-MTGXki_TkJ6MkRsyeyzQ\\\":{\\\"token\\\":\\\"$2a$10$ux1V4zRRsLq2X/0hKepya..JvGI2t9o.IDK9GcHFQB11yuwATYZWS\\\",\\\"expiry\\\":1669277059},\\\"itIb3uXH03zZkC1J3JgRWA\\\":{\\\"token\\\":\\\"$2a$10$vXFSkWIa2W0zxJJoFNKG4uFK9Qbc/Oju50vqIKHKIgwUHeI0sSdZW\\\",\\\"expiry\\\":1669277082},\\\"AujiK6kZdF83ccRZ0BPujw\\\":{\\\"token\\\":\\\"$2a$10$mJAPjVDtnVAjPUiR7IDEMO4zwLUjF7VfDrhqkfvUAOhY8X1NZyvcC\\\",\\\"expiry\\\":1669277158},\\\"_m_SvbJhgpnIKv009O5iZg\\\":{\\\"token\\\":\\\"$2a$10$J0bZWG0nuIoy04YPoCj5Ou4qNEdwu2Y27Vvta9NE1OM1B0Pol3Vle\\\",\\\"expiry\\\":1669277206},\\\"VzP2wRdBRCISaYhcooXCKA\\\":{\\\"token\\\":\\\"$2a$10$JhdfKsW8P/TMzfyi1dshp.sRYBqWCmjb.N2QYrzIYEvR06UEevHLm\\\",\\\"expiry\\\":1669277218}}\""], ["updated_at", "2020-11-24 08:06:58.817590"], ["id", 1]]
  [1m[35m (40.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 73], ["current_sign_in_at", "2020-11-24 08:06:58.863006"], ["last_sign_in_at", "2020-11-24 08:06:47.444489"], ["updated_at", "2020-11-24 08:06:58.863498"], ["id", 1]]
  [1m[35m (24.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.2ms | ActiveRecord: 69.0ms | Allocations: 25770)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:06:58 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
Completed 500 Internal Server Error in 122ms (ActiveRecord: 5.1ms | Allocations: 19228)



NoMethodError - undefined method `product_variant_id' for #<ShoppingCartItem:0x0000000005bece18>
Did you mean?  product_variant
               product_variant=:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:08:12 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"itIb3uXH03zZkC1J3JgRWA\\\":{\\\"token\\\":\\\"$2a$10$vXFSkWIa2W0zxJJoFNKG4uFK9Qbc/Oju50vqIKHKIgwUHeI0sSdZW\\\",\\\"expiry\\\":1669277082},\\\"AujiK6kZdF83ccRZ0BPujw\\\":{\\\"token\\\":\\\"$2a$10$mJAPjVDtnVAjPUiR7IDEMO4zwLUjF7VfDrhqkfvUAOhY8X1NZyvcC\\\",\\\"expiry\\\":1669277158},\\\"_m_SvbJhgpnIKv009O5iZg\\\":{\\\"token\\\":\\\"$2a$10$J0bZWG0nuIoy04YPoCj5Ou4qNEdwu2Y27Vvta9NE1OM1B0Pol3Vle\\\",\\\"expiry\\\":1669277206},\\\"VzP2wRdBRCISaYhcooXCKA\\\":{\\\"token\\\":\\\"$2a$10$JhdfKsW8P/TMzfyi1dshp.sRYBqWCmjb.N2QYrzIYEvR06UEevHLm\\\",\\\"expiry\\\":1669277218},\\\"J3QfsyMphyXuIfXXYxMveQ\\\":{\\\"token\\\":\\\"$2a$10$SxjdKZSHTgXKeSz51ylGre/bRskDGfYIeTDRXRqwMzfyvAsRP9gcC\\\",\\\"expiry\\\":1669277292}}\""], ["updated_at", "2020-11-24 08:08:12.615636"], ["id", 1]]
  [1m[35m (40.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 74], ["current_sign_in_at", "2020-11-24 08:08:12.660378"], ["last_sign_in_at", "2020-11-24 08:06:58.863006"], ["updated_at", "2020-11-24 08:08:12.661061"], ["id", 1]]
  [1m[35m (21.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.2ms | ActiveRecord: 65.7ms | Allocations: 25770)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:08:12 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 88ms (ActiveRecord: 1.7ms | Allocations: 4792)



NoMethodError - undefined method `to_sym' for {:shopping_cart_items=>:product_variant}:Hash
Did you mean?  to_s
               to_set:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:08:25 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"AujiK6kZdF83ccRZ0BPujw\\\":{\\\"token\\\":\\\"$2a$10$mJAPjVDtnVAjPUiR7IDEMO4zwLUjF7VfDrhqkfvUAOhY8X1NZyvcC\\\",\\\"expiry\\\":1669277158},\\\"_m_SvbJhgpnIKv009O5iZg\\\":{\\\"token\\\":\\\"$2a$10$J0bZWG0nuIoy04YPoCj5Ou4qNEdwu2Y27Vvta9NE1OM1B0Pol3Vle\\\",\\\"expiry\\\":1669277206},\\\"VzP2wRdBRCISaYhcooXCKA\\\":{\\\"token\\\":\\\"$2a$10$JhdfKsW8P/TMzfyi1dshp.sRYBqWCmjb.N2QYrzIYEvR06UEevHLm\\\",\\\"expiry\\\":1669277218},\\\"J3QfsyMphyXuIfXXYxMveQ\\\":{\\\"token\\\":\\\"$2a$10$SxjdKZSHTgXKeSz51ylGre/bRskDGfYIeTDRXRqwMzfyvAsRP9gcC\\\",\\\"expiry\\\":1669277292},\\\"au_OitRyC47xbp9pAianzw\\\":{\\\"token\\\":\\\"$2a$10$ZlYC623WfRBGycY5dIuiE.oFTe0L4aGxcL5zSBDslYXd.QRJywm0W\\\",\\\"expiry\\\":1669277305}}\""], ["updated_at", "2020-11-24 08:08:26.184410"], ["id", 1]]
  [1m[35m (460.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 75], ["current_sign_in_at", "2020-11-24 08:08:26.648971"], ["last_sign_in_at", "2020-11-24 08:08:12.660378"], ["updated_at", "2020-11-24 08:08:26.649434"], ["id", 1]]
  [1m[35m (13.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 906ms (Views: 0.2ms | ActiveRecord: 479.2ms | Allocations: 25803)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:08:26 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 92ms (ActiveRecord: 1.3ms | Allocations: 4790)



NoMethodError - undefined method `to_sym' for {:shopping_cart_items=>:product_variant}:Hash
Did you mean?  to_s
               to_set:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

  [1m[36mShoppingCartItem Load (0.5ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.5ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:13:16 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"_m_SvbJhgpnIKv009O5iZg\\\":{\\\"token\\\":\\\"$2a$10$J0bZWG0nuIoy04YPoCj5Ou4qNEdwu2Y27Vvta9NE1OM1B0Pol3Vle\\\",\\\"expiry\\\":1669277206},\\\"VzP2wRdBRCISaYhcooXCKA\\\":{\\\"token\\\":\\\"$2a$10$JhdfKsW8P/TMzfyi1dshp.sRYBqWCmjb.N2QYrzIYEvR06UEevHLm\\\",\\\"expiry\\\":1669277218},\\\"J3QfsyMphyXuIfXXYxMveQ\\\":{\\\"token\\\":\\\"$2a$10$SxjdKZSHTgXKeSz51ylGre/bRskDGfYIeTDRXRqwMzfyvAsRP9gcC\\\",\\\"expiry\\\":1669277292},\\\"au_OitRyC47xbp9pAianzw\\\":{\\\"token\\\":\\\"$2a$10$ZlYC623WfRBGycY5dIuiE.oFTe0L4aGxcL5zSBDslYXd.QRJywm0W\\\",\\\"expiry\\\":1669277305},\\\"4hNx1advy102MBCryjkoOw\\\":{\\\"token\\\":\\\"$2a$10$ZiTy2vKhJYr/XYZINR9kWu3HwHTFSONZJgOE78wUXfJtswW93uc3.\\\",\\\"expiry\\\":1669277596}}\""], ["updated_at", "2020-11-24 08:13:16.415832"], ["id", 1]]
  [1m[35m (44.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 76], ["current_sign_in_at", "2020-11-24 08:13:16.464474"], ["last_sign_in_at", "2020-11-24 08:08:26.648971"], ["updated_at", "2020-11-24 08:13:16.464910"], ["id", 1]]
  [1m[35m (48.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 343ms (Views: 0.3ms | ActiveRecord: 97.8ms | Allocations: 25811)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:13:16 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 86ms (ActiveRecord: 1.3ms | Allocations: 4790)



NoMethodError - undefined method `to_sym' for {:shopping_cart_items=>:product_variant}:Hash
Did you mean?  to_s
               to_set:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:13:40 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"VzP2wRdBRCISaYhcooXCKA\\\":{\\\"token\\\":\\\"$2a$10$JhdfKsW8P/TMzfyi1dshp.sRYBqWCmjb.N2QYrzIYEvR06UEevHLm\\\",\\\"expiry\\\":1669277218},\\\"J3QfsyMphyXuIfXXYxMveQ\\\":{\\\"token\\\":\\\"$2a$10$SxjdKZSHTgXKeSz51ylGre/bRskDGfYIeTDRXRqwMzfyvAsRP9gcC\\\",\\\"expiry\\\":1669277292},\\\"au_OitRyC47xbp9pAianzw\\\":{\\\"token\\\":\\\"$2a$10$ZlYC623WfRBGycY5dIuiE.oFTe0L4aGxcL5zSBDslYXd.QRJywm0W\\\",\\\"expiry\\\":1669277305},\\\"4hNx1advy102MBCryjkoOw\\\":{\\\"token\\\":\\\"$2a$10$ZiTy2vKhJYr/XYZINR9kWu3HwHTFSONZJgOE78wUXfJtswW93uc3.\\\",\\\"expiry\\\":1669277596},\\\"qcbDADVsjNDjmQJr0EwVyw\\\":{\\\"token\\\":\\\"$2a$10$QD3cwsPUll4gzwL.LF9rkeva4iy97bsz9Jbqaw2xhv3buckjTZJN2\\\",\\\"expiry\\\":1669277621}}\""], ["updated_at", "2020-11-24 08:13:41.131205"], ["id", 1]]
  [1m[35m (69.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 77], ["current_sign_in_at", "2020-11-24 08:13:41.205435"], ["last_sign_in_at", "2020-11-24 08:13:16.464474"], ["updated_at", "2020-11-24 08:13:41.205840"], ["id", 1]]
  [1m[35m (12.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 0.2ms | ActiveRecord: 86.7ms | Allocations: 25803)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:13:41 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.1ms | ActiveRecord: 10.9ms | Allocations: 28203)


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:14:34 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"J3QfsyMphyXuIfXXYxMveQ\\\":{\\\"token\\\":\\\"$2a$10$SxjdKZSHTgXKeSz51ylGre/bRskDGfYIeTDRXRqwMzfyvAsRP9gcC\\\",\\\"expiry\\\":1669277292},\\\"au_OitRyC47xbp9pAianzw\\\":{\\\"token\\\":\\\"$2a$10$ZlYC623WfRBGycY5dIuiE.oFTe0L4aGxcL5zSBDslYXd.QRJywm0W\\\",\\\"expiry\\\":1669277305},\\\"4hNx1advy102MBCryjkoOw\\\":{\\\"token\\\":\\\"$2a$10$ZiTy2vKhJYr/XYZINR9kWu3HwHTFSONZJgOE78wUXfJtswW93uc3.\\\",\\\"expiry\\\":1669277596},\\\"qcbDADVsjNDjmQJr0EwVyw\\\":{\\\"token\\\":\\\"$2a$10$QD3cwsPUll4gzwL.LF9rkeva4iy97bsz9Jbqaw2xhv3buckjTZJN2\\\",\\\"expiry\\\":1669277621},\\\"vnvu2iWc6JO0ss-VDrqtow\\\":{\\\"token\\\":\\\"$2a$10$sUsBatL5LOTJixhVvi9j5.PO3nXTMqx1jNOJLB54djgApBEQd5CJC\\\",\\\"expiry\\\":1669277675}}\""], ["updated_at", "2020-11-24 08:14:35.281959"], ["id", 1]]
  [1m[35m (17.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 78], ["current_sign_in_at", "2020-11-24 08:14:35.305225"], ["last_sign_in_at", "2020-11-24 08:13:41.205435"], ["updated_at", "2020-11-24 08:14:35.305697"], ["id", 1]]
  [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.9ms | ActiveRecord: 26.9ms | Allocations: 25786)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:14:35 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 79ms (ActiveRecord: 1.3ms | Allocations: 3578)



ArgumentError - store is not specified as a relationship on CartSerializer:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:14:52 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"au_OitRyC47xbp9pAianzw\\\":{\\\"token\\\":\\\"$2a$10$ZlYC623WfRBGycY5dIuiE.oFTe0L4aGxcL5zSBDslYXd.QRJywm0W\\\",\\\"expiry\\\":1669277305},\\\"4hNx1advy102MBCryjkoOw\\\":{\\\"token\\\":\\\"$2a$10$ZiTy2vKhJYr/XYZINR9kWu3HwHTFSONZJgOE78wUXfJtswW93uc3.\\\",\\\"expiry\\\":1669277596},\\\"qcbDADVsjNDjmQJr0EwVyw\\\":{\\\"token\\\":\\\"$2a$10$QD3cwsPUll4gzwL.LF9rkeva4iy97bsz9Jbqaw2xhv3buckjTZJN2\\\",\\\"expiry\\\":1669277621},\\\"vnvu2iWc6JO0ss-VDrqtow\\\":{\\\"token\\\":\\\"$2a$10$sUsBatL5LOTJixhVvi9j5.PO3nXTMqx1jNOJLB54djgApBEQd5CJC\\\",\\\"expiry\\\":1669277675},\\\"XH-tI8CF494jLORMy_p-KQ\\\":{\\\"token\\\":\\\"$2a$10$IJcuPjGG7pqOtrtWccRkkOkzbWdX7bQm9FFUmIQIgovhDpFyhyPiO\\\",\\\"expiry\\\":1669277692}}\""], ["updated_at", "2020-11-24 08:14:52.401487"], ["id", 1]]
  [1m[35m (47.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 79], ["current_sign_in_at", "2020-11-24 08:14:52.452660"], ["last_sign_in_at", "2020-11-24 08:14:35.305225"], ["updated_at", "2020-11-24 08:14:52.453271"], ["id", 1]]
  [1m[35m (17.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.3ms | ActiveRecord: 70.6ms | Allocations: 25787)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:14:52 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
Completed 500 Internal Server Error in 100ms (ActiveRecord: 6.0ms | Allocations: 13590)



NoMethodError - undefined method `store' for #<Cart:0x00007f3158af52e0>
Did you mean?  store_id:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:15:09 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"4hNx1advy102MBCryjkoOw\\\":{\\\"token\\\":\\\"$2a$10$ZiTy2vKhJYr/XYZINR9kWu3HwHTFSONZJgOE78wUXfJtswW93uc3.\\\",\\\"expiry\\\":1669277596},\\\"qcbDADVsjNDjmQJr0EwVyw\\\":{\\\"token\\\":\\\"$2a$10$QD3cwsPUll4gzwL.LF9rkeva4iy97bsz9Jbqaw2xhv3buckjTZJN2\\\",\\\"expiry\\\":1669277621},\\\"vnvu2iWc6JO0ss-VDrqtow\\\":{\\\"token\\\":\\\"$2a$10$sUsBatL5LOTJixhVvi9j5.PO3nXTMqx1jNOJLB54djgApBEQd5CJC\\\",\\\"expiry\\\":1669277675},\\\"XH-tI8CF494jLORMy_p-KQ\\\":{\\\"token\\\":\\\"$2a$10$IJcuPjGG7pqOtrtWccRkkOkzbWdX7bQm9FFUmIQIgovhDpFyhyPiO\\\",\\\"expiry\\\":1669277692},\\\"6xsXUxplZsZmOJ3UY4pjbA\\\":{\\\"token\\\":\\\"$2a$10$GIqy1CZdMMjgqE5In4hs4OtAgWQaRblPsl0VHusuwTyPpWrqNQ7Lu\\\",\\\"expiry\\\":1669277710}}\""], ["updated_at", "2020-11-24 08:15:10.178189"], ["id", 1]]
  [1m[35m (24.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 80], ["current_sign_in_at", "2020-11-24 08:15:10.206933"], ["last_sign_in_at", "2020-11-24 08:14:52.452660"], ["updated_at", "2020-11-24 08:15:10.207349"], ["id", 1]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 283ms (Views: 0.2ms | ActiveRecord: 35.2ms | Allocations: 25786)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:15:10 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 132ms (Views: 0.1ms | ActiveRecord: 12.3ms | Allocations: 33879)


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:15:45 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"qcbDADVsjNDjmQJr0EwVyw\\\":{\\\"token\\\":\\\"$2a$10$QD3cwsPUll4gzwL.LF9rkeva4iy97bsz9Jbqaw2xhv3buckjTZJN2\\\",\\\"expiry\\\":1669277621},\\\"vnvu2iWc6JO0ss-VDrqtow\\\":{\\\"token\\\":\\\"$2a$10$sUsBatL5LOTJixhVvi9j5.PO3nXTMqx1jNOJLB54djgApBEQd5CJC\\\",\\\"expiry\\\":1669277675},\\\"XH-tI8CF494jLORMy_p-KQ\\\":{\\\"token\\\":\\\"$2a$10$IJcuPjGG7pqOtrtWccRkkOkzbWdX7bQm9FFUmIQIgovhDpFyhyPiO\\\",\\\"expiry\\\":1669277692},\\\"6xsXUxplZsZmOJ3UY4pjbA\\\":{\\\"token\\\":\\\"$2a$10$GIqy1CZdMMjgqE5In4hs4OtAgWQaRblPsl0VHusuwTyPpWrqNQ7Lu\\\",\\\"expiry\\\":1669277710},\\\"LGrwMQFMuUyvPQp3pKYAiA\\\":{\\\"token\\\":\\\"$2a$10$E8NOFxs697wIOrqMuRkzGOe4qn1CjvONyWqe.hVtsS4yC0L./axaS\\\",\\\"expiry\\\":1669277745}}\""], ["updated_at", "2020-11-24 08:15:45.466144"], ["id", 1]]
  [1m[35m (26.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 81], ["current_sign_in_at", "2020-11-24 08:15:45.497752"], ["last_sign_in_at", "2020-11-24 08:15:10.206933"], ["updated_at", "2020-11-24 08:15:45.498710"], ["id", 1]]
  [1m[35m (12.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.3ms | ActiveRecord: 43.2ms | Allocations: 25805)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:15:45 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 77ms (ActiveRecord: 1.6ms | Allocations: 4137)



ArgumentError - product_variant is not specified as a relationship on CartSerializer:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:16:09 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"vnvu2iWc6JO0ss-VDrqtow\\\":{\\\"token\\\":\\\"$2a$10$sUsBatL5LOTJixhVvi9j5.PO3nXTMqx1jNOJLB54djgApBEQd5CJC\\\",\\\"expiry\\\":1669277675},\\\"XH-tI8CF494jLORMy_p-KQ\\\":{\\\"token\\\":\\\"$2a$10$IJcuPjGG7pqOtrtWccRkkOkzbWdX7bQm9FFUmIQIgovhDpFyhyPiO\\\",\\\"expiry\\\":1669277692},\\\"6xsXUxplZsZmOJ3UY4pjbA\\\":{\\\"token\\\":\\\"$2a$10$GIqy1CZdMMjgqE5In4hs4OtAgWQaRblPsl0VHusuwTyPpWrqNQ7Lu\\\",\\\"expiry\\\":1669277710},\\\"LGrwMQFMuUyvPQp3pKYAiA\\\":{\\\"token\\\":\\\"$2a$10$E8NOFxs697wIOrqMuRkzGOe4qn1CjvONyWqe.hVtsS4yC0L./axaS\\\",\\\"expiry\\\":1669277745},\\\"urfh9-53rzPdjcndMQQfnw\\\":{\\\"token\\\":\\\"$2a$10$RuKqon3wAHLfa4KZKtMXT.Y.yR9xAIUL0M/iD47yekwBWTKIwiz6S\\\",\\\"expiry\\\":1669277769}}\""], ["updated_at", "2020-11-24 08:16:09.562031"], ["id", 1]]
  [1m[35m (16.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 82], ["current_sign_in_at", "2020-11-24 08:16:09.582649"], ["last_sign_in_at", "2020-11-24 08:15:45.497752"], ["updated_at", "2020-11-24 08:16:09.583463"], ["id", 1]]
  [1m[35m (13.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.3ms | ActiveRecord: 36.3ms | Allocations: 25791)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:16:09 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 82ms (ActiveRecord: 1.2ms | Allocations: 4991)



NoMethodError - undefined method `to_sym' for {:shopping_cart_items=>:product_variant}:Hash
Did you mean?  to_s
               to_set:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:16:50 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"XH-tI8CF494jLORMy_p-KQ\\\":{\\\"token\\\":\\\"$2a$10$IJcuPjGG7pqOtrtWccRkkOkzbWdX7bQm9FFUmIQIgovhDpFyhyPiO\\\",\\\"expiry\\\":1669277692},\\\"6xsXUxplZsZmOJ3UY4pjbA\\\":{\\\"token\\\":\\\"$2a$10$GIqy1CZdMMjgqE5In4hs4OtAgWQaRblPsl0VHusuwTyPpWrqNQ7Lu\\\",\\\"expiry\\\":1669277710},\\\"LGrwMQFMuUyvPQp3pKYAiA\\\":{\\\"token\\\":\\\"$2a$10$E8NOFxs697wIOrqMuRkzGOe4qn1CjvONyWqe.hVtsS4yC0L./axaS\\\",\\\"expiry\\\":1669277745},\\\"urfh9-53rzPdjcndMQQfnw\\\":{\\\"token\\\":\\\"$2a$10$RuKqon3wAHLfa4KZKtMXT.Y.yR9xAIUL0M/iD47yekwBWTKIwiz6S\\\",\\\"expiry\\\":1669277769},\\\"F3tzOnMYph--LY6U4y3PTQ\\\":{\\\"token\\\":\\\"$2a$10$3qPHlD0gMlLp481sJ2WRg.EczsxP/eV7eV1vlfu66Mx7QMMwDrK3S\\\",\\\"expiry\\\":1669277810}}\""], ["updated_at", "2020-11-24 08:16:50.584560"], ["id", 1]]
  [1m[35m (51.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 83], ["current_sign_in_at", "2020-11-24 08:16:50.640942"], ["last_sign_in_at", "2020-11-24 08:16:09.582649"], ["updated_at", "2020-11-24 08:16:50.641366"], ["id", 1]]
  [1m[35m (24.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 0.3ms | ActiveRecord: 80.4ms | Allocations: 25803)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:16:50 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 132ms (Views: 0.1ms | ActiveRecord: 10.2ms | Allocations: 34690)


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:17:45 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"6xsXUxplZsZmOJ3UY4pjbA\\\":{\\\"token\\\":\\\"$2a$10$GIqy1CZdMMjgqE5In4hs4OtAgWQaRblPsl0VHusuwTyPpWrqNQ7Lu\\\",\\\"expiry\\\":1669277710},\\\"LGrwMQFMuUyvPQp3pKYAiA\\\":{\\\"token\\\":\\\"$2a$10$E8NOFxs697wIOrqMuRkzGOe4qn1CjvONyWqe.hVtsS4yC0L./axaS\\\",\\\"expiry\\\":1669277745},\\\"urfh9-53rzPdjcndMQQfnw\\\":{\\\"token\\\":\\\"$2a$10$RuKqon3wAHLfa4KZKtMXT.Y.yR9xAIUL0M/iD47yekwBWTKIwiz6S\\\",\\\"expiry\\\":1669277769},\\\"F3tzOnMYph--LY6U4y3PTQ\\\":{\\\"token\\\":\\\"$2a$10$3qPHlD0gMlLp481sJ2WRg.EczsxP/eV7eV1vlfu66Mx7QMMwDrK3S\\\",\\\"expiry\\\":1669277810},\\\"m1CFd6QPqvE1h7HSz6ENXA\\\":{\\\"token\\\":\\\"$2a$10$bJ5EFrtZNmkotHaODkmOdeXv.Q22o2WdckubvN3PRSVBUWifFnS/G\\\",\\\"expiry\\\":1669277866}}\""], ["updated_at", "2020-11-24 08:17:46.285003"], ["id", 1]]
  [1m[35m (19.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 84], ["current_sign_in_at", "2020-11-24 08:17:46.309652"], ["last_sign_in_at", "2020-11-24 08:16:50.640942"], ["updated_at", "2020-11-24 08:17:46.310290"], ["id", 1]]
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.2ms | ActiveRecord: 28.7ms | Allocations: 25801)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:17:46 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 133ms (Views: 0.1ms | ActiveRecord: 11.1ms | Allocations: 34709)


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:19:41 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"LGrwMQFMuUyvPQp3pKYAiA\\\":{\\\"token\\\":\\\"$2a$10$E8NOFxs697wIOrqMuRkzGOe4qn1CjvONyWqe.hVtsS4yC0L./axaS\\\",\\\"expiry\\\":1669277745},\\\"urfh9-53rzPdjcndMQQfnw\\\":{\\\"token\\\":\\\"$2a$10$RuKqon3wAHLfa4KZKtMXT.Y.yR9xAIUL0M/iD47yekwBWTKIwiz6S\\\",\\\"expiry\\\":1669277769},\\\"F3tzOnMYph--LY6U4y3PTQ\\\":{\\\"token\\\":\\\"$2a$10$3qPHlD0gMlLp481sJ2WRg.EczsxP/eV7eV1vlfu66Mx7QMMwDrK3S\\\",\\\"expiry\\\":1669277810},\\\"m1CFd6QPqvE1h7HSz6ENXA\\\":{\\\"token\\\":\\\"$2a$10$bJ5EFrtZNmkotHaODkmOdeXv.Q22o2WdckubvN3PRSVBUWifFnS/G\\\",\\\"expiry\\\":1669277866},\\\"zt4uCYqkJsTqtUrSvwzByw\\\":{\\\"token\\\":\\\"$2a$10$GCCGn60dUFYMhyLUYmX6KuvoVJFhqm8lwjhDgJiW4jLXdY3xzGJiG\\\",\\\"expiry\\\":1669277981}}\""], ["updated_at", "2020-11-24 08:19:41.764707"], ["id", 1]]
  [1m[35m (25.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 85], ["current_sign_in_at", "2020-11-24 08:19:41.796990"], ["last_sign_in_at", "2020-11-24 08:17:46.309652"], ["updated_at", "2020-11-24 08:19:41.797540"], ["id", 1]]
  [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.2ms | ActiveRecord: 35.7ms | Allocations: 25806)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:19:41 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 136ms (Views: 0.1ms | ActiveRecord: 11.4ms | Allocations: 34771)


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" ORDER BY "stores"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mStore Load (0.6ms)[0m  [1m[34mSELECT "stores".* FROM "stores" ORDER BY "stores"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mStore Load (0.7ms)[0m  [1m[34mSELECT "stores".* FROM "stores" ORDER BY "stores"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."store_id" = $1[0m  [["store_id", 5]]
  [1m[36mStore Load (0.7ms)[0m  [1m[34mSELECT "stores".* FROM "stores" ORDER BY "stores"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."store_id" = $1 ORDER BY "products"."id" ASC LIMIT $2[0m  [["store_id", 5], ["LIMIT", 1]]
  [1m[36mStore Load (0.4ms)[0m  [1m[34mSELECT "stores".* FROM "stores" ORDER BY "stores"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."store_id" = $1 ORDER BY "products"."id" ASC LIMIT $2[0m  [["store_id", 5], ["LIMIT", 1]]
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."product_id" = $1[0m  [["product_id", 5]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:21:31 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"urfh9-53rzPdjcndMQQfnw\\\":{\\\"token\\\":\\\"$2a$10$RuKqon3wAHLfa4KZKtMXT.Y.yR9xAIUL0M/iD47yekwBWTKIwiz6S\\\",\\\"expiry\\\":1669277769},\\\"F3tzOnMYph--LY6U4y3PTQ\\\":{\\\"token\\\":\\\"$2a$10$3qPHlD0gMlLp481sJ2WRg.EczsxP/eV7eV1vlfu66Mx7QMMwDrK3S\\\",\\\"expiry\\\":1669277810},\\\"m1CFd6QPqvE1h7HSz6ENXA\\\":{\\\"token\\\":\\\"$2a$10$bJ5EFrtZNmkotHaODkmOdeXv.Q22o2WdckubvN3PRSVBUWifFnS/G\\\",\\\"expiry\\\":1669277866},\\\"zt4uCYqkJsTqtUrSvwzByw\\\":{\\\"token\\\":\\\"$2a$10$GCCGn60dUFYMhyLUYmX6KuvoVJFhqm8lwjhDgJiW4jLXdY3xzGJiG\\\",\\\"expiry\\\":1669277981},\\\"utDcIeh_hD2ZfUJcfcsKWg\\\":{\\\"token\\\":\\\"$2a$10$qBwhEXmIqkS.wEuBEXigT.dhFBuSiDrN9t9TgVTBtcoD7pjLzjsQu\\\",\\\"expiry\\\":1669278091}}\""], ["updated_at", "2020-11-24 08:21:31.497637"], ["id", 1]]
  [1m[35m (41.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 86], ["current_sign_in_at", "2020-11-24 08:21:31.543309"], ["last_sign_in_at", "2020-11-24 08:19:41.796990"], ["updated_at", "2020-11-24 08:21:31.544009"], ["id", 1]]
  [1m[35m (18.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 296ms (Views: 0.2ms | ActiveRecord: 62.0ms | Allocations: 15018)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 15:21:31 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 7], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.4ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 7], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 42], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-24 08:21:31.722287"], ["updated_at", "2020-11-24 08:21:31.722287"]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (20.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 136ms (Views: 0.2ms | ActiveRecord: 25.0ms | Allocations: 23138)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:21:36 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"F3tzOnMYph--LY6U4y3PTQ\\\":{\\\"token\\\":\\\"$2a$10$3qPHlD0gMlLp481sJ2WRg.EczsxP/eV7eV1vlfu66Mx7QMMwDrK3S\\\",\\\"expiry\\\":1669277810},\\\"m1CFd6QPqvE1h7HSz6ENXA\\\":{\\\"token\\\":\\\"$2a$10$bJ5EFrtZNmkotHaODkmOdeXv.Q22o2WdckubvN3PRSVBUWifFnS/G\\\",\\\"expiry\\\":1669277866},\\\"zt4uCYqkJsTqtUrSvwzByw\\\":{\\\"token\\\":\\\"$2a$10$GCCGn60dUFYMhyLUYmX6KuvoVJFhqm8lwjhDgJiW4jLXdY3xzGJiG\\\",\\\"expiry\\\":1669277981},\\\"utDcIeh_hD2ZfUJcfcsKWg\\\":{\\\"token\\\":\\\"$2a$10$qBwhEXmIqkS.wEuBEXigT.dhFBuSiDrN9t9TgVTBtcoD7pjLzjsQu\\\",\\\"expiry\\\":1669278091},\\\"I1Ediv4JhZ1Lw7ACIRlurw\\\":{\\\"token\\\":\\\"$2a$10$5UocxxjzZIaY0CDCFGxNAO/MwTGzmdtS5gcofGgK73wq2aIB5KYMu\\\",\\\"expiry\\\":1669278096}}\""], ["updated_at", "2020-11-24 08:21:36.539896"], ["id", 1]]
  [1m[35m (51.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 87], ["current_sign_in_at", "2020-11-24 08:21:36.595592"], ["last_sign_in_at", "2020-11-24 08:21:31.543309"], ["updated_at", "2020-11-24 08:21:36.596083"], ["id", 1]]
  [1m[35m (16.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 308ms (Views: 0.2ms | ActiveRecord: 73.2ms | Allocations: 15017)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:21:36 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 99ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 16007)


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:22:54 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"m1CFd6QPqvE1h7HSz6ENXA\\\":{\\\"token\\\":\\\"$2a$10$bJ5EFrtZNmkotHaODkmOdeXv.Q22o2WdckubvN3PRSVBUWifFnS/G\\\",\\\"expiry\\\":1669277866},\\\"zt4uCYqkJsTqtUrSvwzByw\\\":{\\\"token\\\":\\\"$2a$10$GCCGn60dUFYMhyLUYmX6KuvoVJFhqm8lwjhDgJiW4jLXdY3xzGJiG\\\",\\\"expiry\\\":1669277981},\\\"utDcIeh_hD2ZfUJcfcsKWg\\\":{\\\"token\\\":\\\"$2a$10$qBwhEXmIqkS.wEuBEXigT.dhFBuSiDrN9t9TgVTBtcoD7pjLzjsQu\\\",\\\"expiry\\\":1669278091},\\\"I1Ediv4JhZ1Lw7ACIRlurw\\\":{\\\"token\\\":\\\"$2a$10$5UocxxjzZIaY0CDCFGxNAO/MwTGzmdtS5gcofGgK73wq2aIB5KYMu\\\",\\\"expiry\\\":1669278096},\\\"fHcP4DRsmg3l87_Dh1kcVQ\\\":{\\\"token\\\":\\\"$2a$10$Ew2L1qsJ48h/q0MmG9TTfODKwr1.t5tM.AZADFvWYuLxPQf0yj0NO\\\",\\\"expiry\\\":1669278174}}\""], ["updated_at", "2020-11-24 08:22:54.564078"], ["id", 1]]
  [1m[35m (50.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 88], ["current_sign_in_at", "2020-11-24 08:22:54.619671"], ["last_sign_in_at", "2020-11-24 08:21:36.595592"], ["updated_at", "2020-11-24 08:22:54.620255"], ["id", 1]]
  [1m[35m (48.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 343ms (Views: 0.5ms | ActiveRecord: 103.5ms | Allocations: 25801)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-24 15:22:54 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" DESC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:16:in `add_to_cart'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:16:in `add_to_cart'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 5], ["created_at", "2020-11-24 08:22:54.842459"], ["updated_at", "2020-11-24 08:22:54.842459"]]
  ↳ app/controllers/api/v1/carts_controller.rb:16:in `add_to_cart'
  [1m[35m (52.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:16:in `add_to_cart'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 8], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.3ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 8], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 42], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-24 08:22:54.946107"], ["updated_at", "2020-11-24 08:22:54.946107"]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (26.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 247ms (Views: 0.3ms | ActiveRecord: 99.5ms | Allocations: 41782)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:22:59 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"zt4uCYqkJsTqtUrSvwzByw\\\":{\\\"token\\\":\\\"$2a$10$GCCGn60dUFYMhyLUYmX6KuvoVJFhqm8lwjhDgJiW4jLXdY3xzGJiG\\\",\\\"expiry\\\":1669277981},\\\"utDcIeh_hD2ZfUJcfcsKWg\\\":{\\\"token\\\":\\\"$2a$10$qBwhEXmIqkS.wEuBEXigT.dhFBuSiDrN9t9TgVTBtcoD7pjLzjsQu\\\",\\\"expiry\\\":1669278091},\\\"I1Ediv4JhZ1Lw7ACIRlurw\\\":{\\\"token\\\":\\\"$2a$10$5UocxxjzZIaY0CDCFGxNAO/MwTGzmdtS5gcofGgK73wq2aIB5KYMu\\\",\\\"expiry\\\":1669278096},\\\"fHcP4DRsmg3l87_Dh1kcVQ\\\":{\\\"token\\\":\\\"$2a$10$Ew2L1qsJ48h/q0MmG9TTfODKwr1.t5tM.AZADFvWYuLxPQf0yj0NO\\\",\\\"expiry\\\":1669278174},\\\"3PkqmWdsK2io-uY52axb5A\\\":{\\\"token\\\":\\\"$2a$10$OpgeHDgQiAY8ORt36Y2nq.QHmoK7gKLOgAitMOzS0z8ZEMAxchK96\\\",\\\"expiry\\\":1669278179}}\""], ["updated_at", "2020-11-24 08:22:59.356108"], ["id", 1]]
  [1m[35m (29.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 89], ["current_sign_in_at", "2020-11-24 08:22:59.389525"], ["last_sign_in_at", "2020-11-24 08:22:54.619671"], ["updated_at", "2020-11-24 08:22:59.390128"], ["id", 1]]
  [1m[35m (60.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 0.4ms | ActiveRecord: 91.7ms | Allocations: 15018)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:22:59 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 120ms (Views: 0.1ms | ActiveRecord: 2.5ms | Allocations: 24057)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:23:55 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"utDcIeh_hD2ZfUJcfcsKWg\\\":{\\\"token\\\":\\\"$2a$10$qBwhEXmIqkS.wEuBEXigT.dhFBuSiDrN9t9TgVTBtcoD7pjLzjsQu\\\",\\\"expiry\\\":1669278091},\\\"I1Ediv4JhZ1Lw7ACIRlurw\\\":{\\\"token\\\":\\\"$2a$10$5UocxxjzZIaY0CDCFGxNAO/MwTGzmdtS5gcofGgK73wq2aIB5KYMu\\\",\\\"expiry\\\":1669278096},\\\"fHcP4DRsmg3l87_Dh1kcVQ\\\":{\\\"token\\\":\\\"$2a$10$Ew2L1qsJ48h/q0MmG9TTfODKwr1.t5tM.AZADFvWYuLxPQf0yj0NO\\\",\\\"expiry\\\":1669278174},\\\"3PkqmWdsK2io-uY52axb5A\\\":{\\\"token\\\":\\\"$2a$10$OpgeHDgQiAY8ORt36Y2nq.QHmoK7gKLOgAitMOzS0z8ZEMAxchK96\\\",\\\"expiry\\\":1669278179},\\\"z0qpx0vm5ujfFBIxTpxarA\\\":{\\\"token\\\":\\\"$2a$10$Hm7a0NokPSUDiT9gngQ2ueS280kIypp3TDzB84qqkEYXu1rBHbB9u\\\",\\\"expiry\\\":1669278235}}\""], ["updated_at", "2020-11-24 08:23:55.607824"], ["id", 1]]
  [1m[35m (34.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 90], ["current_sign_in_at", "2020-11-24 08:23:55.646370"], ["last_sign_in_at", "2020-11-24 08:22:59.389525"], ["updated_at", "2020-11-24 08:23:55.646986"], ["id", 1]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.3ms | ActiveRecord: 42.2ms | Allocations: 25800)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:23:55 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
Completed 500 Internal Server Error in 139ms (ActiveRecord: 9.8ms | Allocations: 33850)



NoMethodError - undefined method `product' for #<ShoppingCartItem:0x0000000005f83248>:
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:24:08 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"I1Ediv4JhZ1Lw7ACIRlurw\\\":{\\\"token\\\":\\\"$2a$10$5UocxxjzZIaY0CDCFGxNAO/MwTGzmdtS5gcofGgK73wq2aIB5KYMu\\\",\\\"expiry\\\":1669278096},\\\"fHcP4DRsmg3l87_Dh1kcVQ\\\":{\\\"token\\\":\\\"$2a$10$Ew2L1qsJ48h/q0MmG9TTfODKwr1.t5tM.AZADFvWYuLxPQf0yj0NO\\\",\\\"expiry\\\":1669278174},\\\"3PkqmWdsK2io-uY52axb5A\\\":{\\\"token\\\":\\\"$2a$10$OpgeHDgQiAY8ORt36Y2nq.QHmoK7gKLOgAitMOzS0z8ZEMAxchK96\\\",\\\"expiry\\\":1669278179},\\\"z0qpx0vm5ujfFBIxTpxarA\\\":{\\\"token\\\":\\\"$2a$10$Hm7a0NokPSUDiT9gngQ2ueS280kIypp3TDzB84qqkEYXu1rBHbB9u\\\",\\\"expiry\\\":1669278235},\\\"A5PAwUS5eAQd-aK2giMFQQ\\\":{\\\"token\\\":\\\"$2a$10$gwPep1dsP6QazymE/D14IOlte94BC2FQhe4ITllZbVxYRnqGgXYci\\\",\\\"expiry\\\":1669278249}}\""], ["updated_at", "2020-11-24 08:24:09.166111"], ["id", 1]]
  [1m[35m (20.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 91], ["current_sign_in_at", "2020-11-24 08:24:09.192351"], ["last_sign_in_at", "2020-11-24 08:23:55.646370"], ["updated_at", "2020-11-24 08:24:09.193043"], ["id", 1]]
  [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 0.3ms | ActiveRecord: 37.7ms | Allocations: 25770)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:24:09 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 176ms (Views: 0.1ms | ActiveRecord: 14.3ms | Allocations: 44820)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:24:24 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"fHcP4DRsmg3l87_Dh1kcVQ\\\":{\\\"token\\\":\\\"$2a$10$Ew2L1qsJ48h/q0MmG9TTfODKwr1.t5tM.AZADFvWYuLxPQf0yj0NO\\\",\\\"expiry\\\":1669278174},\\\"3PkqmWdsK2io-uY52axb5A\\\":{\\\"token\\\":\\\"$2a$10$OpgeHDgQiAY8ORt36Y2nq.QHmoK7gKLOgAitMOzS0z8ZEMAxchK96\\\",\\\"expiry\\\":1669278179},\\\"z0qpx0vm5ujfFBIxTpxarA\\\":{\\\"token\\\":\\\"$2a$10$Hm7a0NokPSUDiT9gngQ2ueS280kIypp3TDzB84qqkEYXu1rBHbB9u\\\",\\\"expiry\\\":1669278235},\\\"A5PAwUS5eAQd-aK2giMFQQ\\\":{\\\"token\\\":\\\"$2a$10$gwPep1dsP6QazymE/D14IOlte94BC2FQhe4ITllZbVxYRnqGgXYci\\\",\\\"expiry\\\":1669278249},\\\"nO3d4BiCfdLee3ewJITv_A\\\":{\\\"token\\\":\\\"$2a$10$YHE5hxiJltD1tn40q.NfturghrUhP1c5aF2.O8DnX3KyysZJ8CNaC\\\",\\\"expiry\\\":1669278265}}\""], ["updated_at", "2020-11-24 08:24:25.271151"], ["id", 1]]
  [1m[35m (23.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 92], ["current_sign_in_at", "2020-11-24 08:24:25.300223"], ["last_sign_in_at", "2020-11-24 08:24:09.192351"], ["updated_at", "2020-11-24 08:24:25.300882"], ["id", 1]]
  [1m[35m (58.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 346ms (Views: 0.2ms | ActiveRecord: 87.2ms | Allocations: 25769)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:24:25 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 151ms (Views: 0.1ms | ActiveRecord: 14.4ms | Allocations: 44776)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:24:48 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"3PkqmWdsK2io-uY52axb5A\\\":{\\\"token\\\":\\\"$2a$10$OpgeHDgQiAY8ORt36Y2nq.QHmoK7gKLOgAitMOzS0z8ZEMAxchK96\\\",\\\"expiry\\\":1669278179},\\\"z0qpx0vm5ujfFBIxTpxarA\\\":{\\\"token\\\":\\\"$2a$10$Hm7a0NokPSUDiT9gngQ2ueS280kIypp3TDzB84qqkEYXu1rBHbB9u\\\",\\\"expiry\\\":1669278235},\\\"A5PAwUS5eAQd-aK2giMFQQ\\\":{\\\"token\\\":\\\"$2a$10$gwPep1dsP6QazymE/D14IOlte94BC2FQhe4ITllZbVxYRnqGgXYci\\\",\\\"expiry\\\":1669278249},\\\"nO3d4BiCfdLee3ewJITv_A\\\":{\\\"token\\\":\\\"$2a$10$YHE5hxiJltD1tn40q.NfturghrUhP1c5aF2.O8DnX3KyysZJ8CNaC\\\",\\\"expiry\\\":1669278265},\\\"84JMJ2RQTZ4-bV8e40n6Mw\\\":{\\\"token\\\":\\\"$2a$10$Vg0z3JUolt9k.79PdCJvteN59RT3Q71Nx5aQJUEZMylh6Wi7.0ZD2\\\",\\\"expiry\\\":1669278289}}\""], ["updated_at", "2020-11-24 08:24:49.276220"], ["id", 1]]
  [1m[35m (27.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 93], ["current_sign_in_at", "2020-11-24 08:24:49.307404"], ["last_sign_in_at", "2020-11-24 08:24:25.300223"], ["updated_at", "2020-11-24 08:24:49.307886"], ["id", 1]]
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 277ms (Views: 0.3ms | ActiveRecord: 34.3ms | Allocations: 25801)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:24:49 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 150ms (Views: 0.1ms | ActiveRecord: 12.0ms | Allocations: 44788)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:25:03 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"z0qpx0vm5ujfFBIxTpxarA\\\":{\\\"token\\\":\\\"$2a$10$Hm7a0NokPSUDiT9gngQ2ueS280kIypp3TDzB84qqkEYXu1rBHbB9u\\\",\\\"expiry\\\":1669278235},\\\"A5PAwUS5eAQd-aK2giMFQQ\\\":{\\\"token\\\":\\\"$2a$10$gwPep1dsP6QazymE/D14IOlte94BC2FQhe4ITllZbVxYRnqGgXYci\\\",\\\"expiry\\\":1669278249},\\\"nO3d4BiCfdLee3ewJITv_A\\\":{\\\"token\\\":\\\"$2a$10$YHE5hxiJltD1tn40q.NfturghrUhP1c5aF2.O8DnX3KyysZJ8CNaC\\\",\\\"expiry\\\":1669278265},\\\"84JMJ2RQTZ4-bV8e40n6Mw\\\":{\\\"token\\\":\\\"$2a$10$Vg0z3JUolt9k.79PdCJvteN59RT3Q71Nx5aQJUEZMylh6Wi7.0ZD2\\\",\\\"expiry\\\":1669278289},\\\"KU83aMXfLvkET_NsESe03g\\\":{\\\"token\\\":\\\"$2a$10$cWivicSLrkKPjKMkiC7S6ewJt0ND7/TN91mebAng1Oe1plDlsJ4r6\\\",\\\"expiry\\\":1669278303}}\""], ["updated_at", "2020-11-24 08:25:03.782722"], ["id", 1]]
  [1m[35m (19.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 94], ["current_sign_in_at", "2020-11-24 08:25:03.809787"], ["last_sign_in_at", "2020-11-24 08:24:49.307404"], ["updated_at", "2020-11-24 08:25:03.810552"], ["id", 1]]
  [1m[35m (12.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.3ms | ActiveRecord: 35.8ms | Allocations: 25806)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:25:03 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mShoppingCartItem Load (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:30:in `index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 146ms (Views: 0.1ms | ActiveRecord: 11.6ms | Allocations: 44821)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:30:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:27:06 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"A5PAwUS5eAQd-aK2giMFQQ\\\":{\\\"token\\\":\\\"$2a$10$gwPep1dsP6QazymE/D14IOlte94BC2FQhe4ITllZbVxYRnqGgXYci\\\",\\\"expiry\\\":1669278249},\\\"nO3d4BiCfdLee3ewJITv_A\\\":{\\\"token\\\":\\\"$2a$10$YHE5hxiJltD1tn40q.NfturghrUhP1c5aF2.O8DnX3KyysZJ8CNaC\\\",\\\"expiry\\\":1669278265},\\\"84JMJ2RQTZ4-bV8e40n6Mw\\\":{\\\"token\\\":\\\"$2a$10$Vg0z3JUolt9k.79PdCJvteN59RT3Q71Nx5aQJUEZMylh6Wi7.0ZD2\\\",\\\"expiry\\\":1669278289},\\\"KU83aMXfLvkET_NsESe03g\\\":{\\\"token\\\":\\\"$2a$10$cWivicSLrkKPjKMkiC7S6ewJt0ND7/TN91mebAng1Oe1plDlsJ4r6\\\",\\\"expiry\\\":1669278303},\\\"G_AXsHE2GiUMN527Zk11Pg\\\":{\\\"token\\\":\\\"$2a$10$QM2LyZKofJbeVp21tx4.uuTsOjaR3uFyaXI244PejkEnl2.5t60Ry\\\",\\\"expiry\\\":1669278427}}\""], ["updated_at", "2020-11-24 08:27:07.160194"], ["id", 1]]
  [1m[35m (45.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 95], ["current_sign_in_at", "2020-11-24 08:27:07.210979"], ["last_sign_in_at", "2020-11-24 08:25:03.809787"], ["updated_at", "2020-11-24 08:27:07.211492"], ["id", 1]]
  [1m[35m (19.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.4ms | ActiveRecord: 69.8ms | Allocations: 25785)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:27:07 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:24:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:24:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:24:in `block in <class:ShoppingCartItemSerializer>'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:24:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 171ms (Views: 0.1ms | ActiveRecord: 15.7ms | Allocations: 55665)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:29:07 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"nO3d4BiCfdLee3ewJITv_A\\\":{\\\"token\\\":\\\"$2a$10$YHE5hxiJltD1tn40q.NfturghrUhP1c5aF2.O8DnX3KyysZJ8CNaC\\\",\\\"expiry\\\":1669278265},\\\"84JMJ2RQTZ4-bV8e40n6Mw\\\":{\\\"token\\\":\\\"$2a$10$Vg0z3JUolt9k.79PdCJvteN59RT3Q71Nx5aQJUEZMylh6Wi7.0ZD2\\\",\\\"expiry\\\":1669278289},\\\"KU83aMXfLvkET_NsESe03g\\\":{\\\"token\\\":\\\"$2a$10$cWivicSLrkKPjKMkiC7S6ewJt0ND7/TN91mebAng1Oe1plDlsJ4r6\\\",\\\"expiry\\\":1669278303},\\\"G_AXsHE2GiUMN527Zk11Pg\\\":{\\\"token\\\":\\\"$2a$10$QM2LyZKofJbeVp21tx4.uuTsOjaR3uFyaXI244PejkEnl2.5t60Ry\\\",\\\"expiry\\\":1669278427},\\\"k-UUAX71ChmxKKykSJfXlQ\\\":{\\\"token\\\":\\\"$2a$10$ncfDm8JCK.KUDqYsbho9P.gVgsn3JUIJKLtG4XpHlMr76QzZr/gDu\\\",\\\"expiry\\\":1669278548}}\""], ["updated_at", "2020-11-24 08:29:08.285359"], ["id", 1]]
  [1m[35m (43.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 96], ["current_sign_in_at", "2020-11-24 08:29:08.333002"], ["last_sign_in_at", "2020-11-24 08:27:07.210979"], ["updated_at", "2020-11-24 08:29:08.333654"], ["id", 1]]
  [1m[35m (20.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 312ms (Views: 0.3ms | ActiveRecord: 68.1ms | Allocations: 25801)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:29:08 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
Completed 500 Internal Server Error in 135ms (ActiveRecord: 11.0ms | Allocations: 34525)



NoMethodError - undefined method `product_ids' for #<ShoppingCartItem:0x00007f31585ba078>
Did you mean?  product_variant:
  app/controllers/api/v1/carts_controller.rb:32:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:29:21 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"84JMJ2RQTZ4-bV8e40n6Mw\\\":{\\\"token\\\":\\\"$2a$10$Vg0z3JUolt9k.79PdCJvteN59RT3Q71Nx5aQJUEZMylh6Wi7.0ZD2\\\",\\\"expiry\\\":1669278289},\\\"KU83aMXfLvkET_NsESe03g\\\":{\\\"token\\\":\\\"$2a$10$cWivicSLrkKPjKMkiC7S6ewJt0ND7/TN91mebAng1Oe1plDlsJ4r6\\\",\\\"expiry\\\":1669278303},\\\"G_AXsHE2GiUMN527Zk11Pg\\\":{\\\"token\\\":\\\"$2a$10$QM2LyZKofJbeVp21tx4.uuTsOjaR3uFyaXI244PejkEnl2.5t60Ry\\\",\\\"expiry\\\":1669278427},\\\"k-UUAX71ChmxKKykSJfXlQ\\\":{\\\"token\\\":\\\"$2a$10$ncfDm8JCK.KUDqYsbho9P.gVgsn3JUIJKLtG4XpHlMr76QzZr/gDu\\\",\\\"expiry\\\":1669278548},\\\"0HDHQmTcyoQ60o3iu9CZ5g\\\":{\\\"token\\\":\\\"$2a$10$2ktHCvSE7tvGEHVo08q9l.Go4v.49R.EB6BfxOqCQW/3JDeJokSX.\\\",\\\"expiry\\\":1669278561}}\""], ["updated_at", "2020-11-24 08:29:21.787650"], ["id", 1]]
  [1m[35m (24.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 97], ["current_sign_in_at", "2020-11-24 08:29:21.817028"], ["last_sign_in_at", "2020-11-24 08:29:08.333002"], ["updated_at", "2020-11-24 08:29:21.817633"], ["id", 1]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.3ms | ActiveRecord: 31.9ms | Allocations: 25805)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:29:21 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 146ms (Views: 0.2ms | ActiveRecord: 11.9ms | Allocations: 44793)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:31:29 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"KU83aMXfLvkET_NsESe03g\\\":{\\\"token\\\":\\\"$2a$10$cWivicSLrkKPjKMkiC7S6ewJt0ND7/TN91mebAng1Oe1plDlsJ4r6\\\",\\\"expiry\\\":1669278303},\\\"G_AXsHE2GiUMN527Zk11Pg\\\":{\\\"token\\\":\\\"$2a$10$QM2LyZKofJbeVp21tx4.uuTsOjaR3uFyaXI244PejkEnl2.5t60Ry\\\",\\\"expiry\\\":1669278427},\\\"k-UUAX71ChmxKKykSJfXlQ\\\":{\\\"token\\\":\\\"$2a$10$ncfDm8JCK.KUDqYsbho9P.gVgsn3JUIJKLtG4XpHlMr76QzZr/gDu\\\",\\\"expiry\\\":1669278548},\\\"0HDHQmTcyoQ60o3iu9CZ5g\\\":{\\\"token\\\":\\\"$2a$10$2ktHCvSE7tvGEHVo08q9l.Go4v.49R.EB6BfxOqCQW/3JDeJokSX.\\\",\\\"expiry\\\":1669278561},\\\"aBgOMfJKKxBYiL2ZY5wj7A\\\":{\\\"token\\\":\\\"$2a$10$2t8y1yzUv5qW4gGxQRZVFe3NqJTde5jW.PzwH3YO/ZB/xeBzQ60gq\\\",\\\"expiry\\\":1669278689}}\""], ["updated_at", "2020-11-24 08:31:29.622508"], ["id", 1]]
  [1m[35m (23.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 98], ["current_sign_in_at", "2020-11-24 08:31:29.651032"], ["last_sign_in_at", "2020-11-24 08:29:21.817028"], ["updated_at", "2020-11-24 08:31:29.651605"], ["id", 1]]
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.3ms | ActiveRecord: 30.9ms | Allocations: 25801)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:31:29 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 170ms (Views: 0.2ms | ActiveRecord: 19.9ms | Allocations: 44818)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:31:36 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"G_AXsHE2GiUMN527Zk11Pg\\\":{\\\"token\\\":\\\"$2a$10$QM2LyZKofJbeVp21tx4.uuTsOjaR3uFyaXI244PejkEnl2.5t60Ry\\\",\\\"expiry\\\":1669278427},\\\"k-UUAX71ChmxKKykSJfXlQ\\\":{\\\"token\\\":\\\"$2a$10$ncfDm8JCK.KUDqYsbho9P.gVgsn3JUIJKLtG4XpHlMr76QzZr/gDu\\\",\\\"expiry\\\":1669278548},\\\"0HDHQmTcyoQ60o3iu9CZ5g\\\":{\\\"token\\\":\\\"$2a$10$2ktHCvSE7tvGEHVo08q9l.Go4v.49R.EB6BfxOqCQW/3JDeJokSX.\\\",\\\"expiry\\\":1669278561},\\\"aBgOMfJKKxBYiL2ZY5wj7A\\\":{\\\"token\\\":\\\"$2a$10$2t8y1yzUv5qW4gGxQRZVFe3NqJTde5jW.PzwH3YO/ZB/xeBzQ60gq\\\",\\\"expiry\\\":1669278689},\\\"2WwWwDj10QF052n-9TozAg\\\":{\\\"token\\\":\\\"$2a$10$YsKd6Tpwfcii/BS/DtcoLu/UpP2pCUP4ZdZgauGPrqvv0bjN4oEjC\\\",\\\"expiry\\\":1669278696}}\""], ["updated_at", "2020-11-24 08:31:36.331659"], ["id", 1]]
  [1m[35m (54.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 99], ["current_sign_in_at", "2020-11-24 08:31:36.391798"], ["last_sign_in_at", "2020-11-24 08:31:29.651032"], ["updated_at", "2020-11-24 08:31:36.392525"], ["id", 1]]
  [1m[35m (19.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.3ms | ActiveRecord: 75.2ms | Allocations: 15018)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:31:36 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 98ms (Views: 0.1ms | ActiveRecord: 2.2ms | Allocations: 23118)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:32:04 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"k-UUAX71ChmxKKykSJfXlQ\\\":{\\\"token\\\":\\\"$2a$10$ncfDm8JCK.KUDqYsbho9P.gVgsn3JUIJKLtG4XpHlMr76QzZr/gDu\\\",\\\"expiry\\\":1669278548},\\\"0HDHQmTcyoQ60o3iu9CZ5g\\\":{\\\"token\\\":\\\"$2a$10$2ktHCvSE7tvGEHVo08q9l.Go4v.49R.EB6BfxOqCQW/3JDeJokSX.\\\",\\\"expiry\\\":1669278561},\\\"aBgOMfJKKxBYiL2ZY5wj7A\\\":{\\\"token\\\":\\\"$2a$10$2t8y1yzUv5qW4gGxQRZVFe3NqJTde5jW.PzwH3YO/ZB/xeBzQ60gq\\\",\\\"expiry\\\":1669278689},\\\"2WwWwDj10QF052n-9TozAg\\\":{\\\"token\\\":\\\"$2a$10$YsKd6Tpwfcii/BS/DtcoLu/UpP2pCUP4ZdZgauGPrqvv0bjN4oEjC\\\",\\\"expiry\\\":1669278696},\\\"ksU0x00zfWLx1V0loR1WDA\\\":{\\\"token\\\":\\\"$2a$10$Nw5.MyUzTuRVlTXfo4w2dup7yCRUVR3vrUNRULlyu7qB0wForkmyG\\\",\\\"expiry\\\":1669278725}}\""], ["updated_at", "2020-11-24 08:32:05.127781"], ["id", 1]]
  [1m[35m (19.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 100], ["current_sign_in_at", "2020-11-24 08:32:05.151570"], ["last_sign_in_at", "2020-11-24 08:31:36.391798"], ["updated_at", "2020-11-24 08:32:05.152131"], ["id", 1]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.3ms | ActiveRecord: 28.6ms | Allocations: 25802)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:32:05 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 79ms (ActiveRecord: 1.7ms | Allocations: 4878)



NoMethodError - undefined method `to_sym' for {:product_variant=>:product, :polymorphic=>true}:Hash
Did you mean?  to_s
               to_set:
  app/serializers/shopping_cart_item_serializer.rb:17:in `<class:ShoppingCartItemSerializer>'
  app/serializers/shopping_cart_item_serializer.rb:11:in `<main>'
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:32:13 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"0HDHQmTcyoQ60o3iu9CZ5g\\\":{\\\"token\\\":\\\"$2a$10$2ktHCvSE7tvGEHVo08q9l.Go4v.49R.EB6BfxOqCQW/3JDeJokSX.\\\",\\\"expiry\\\":1669278561},\\\"aBgOMfJKKxBYiL2ZY5wj7A\\\":{\\\"token\\\":\\\"$2a$10$2t8y1yzUv5qW4gGxQRZVFe3NqJTde5jW.PzwH3YO/ZB/xeBzQ60gq\\\",\\\"expiry\\\":1669278689},\\\"2WwWwDj10QF052n-9TozAg\\\":{\\\"token\\\":\\\"$2a$10$YsKd6Tpwfcii/BS/DtcoLu/UpP2pCUP4ZdZgauGPrqvv0bjN4oEjC\\\",\\\"expiry\\\":1669278696},\\\"ksU0x00zfWLx1V0loR1WDA\\\":{\\\"token\\\":\\\"$2a$10$Nw5.MyUzTuRVlTXfo4w2dup7yCRUVR3vrUNRULlyu7qB0wForkmyG\\\",\\\"expiry\\\":1669278725},\\\"aujCGbaQZF38mGA7z1Rdfw\\\":{\\\"token\\\":\\\"$2a$10$is87POPfFaxChiyW8VpBHueRRp00p4TsljQo38DtKy4uUbnHJcweq\\\",\\\"expiry\\\":1669278733}}\""], ["updated_at", "2020-11-24 08:32:13.400416"], ["id", 1]]
  [1m[35m (18.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 101], ["current_sign_in_at", "2020-11-24 08:32:13.429891"], ["last_sign_in_at", "2020-11-24 08:32:05.151570"], ["updated_at", "2020-11-24 08:32:13.430322"], ["id", 1]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 318ms (Views: 0.3ms | ActiveRecord: 28.1ms | Allocations: 25802)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:32:13 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 179ms (Views: 0.2ms | ActiveRecord: 13.8ms | Allocations: 44816)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:34:04 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"aBgOMfJKKxBYiL2ZY5wj7A\\\":{\\\"token\\\":\\\"$2a$10$2t8y1yzUv5qW4gGxQRZVFe3NqJTde5jW.PzwH3YO/ZB/xeBzQ60gq\\\",\\\"expiry\\\":1669278689},\\\"2WwWwDj10QF052n-9TozAg\\\":{\\\"token\\\":\\\"$2a$10$YsKd6Tpwfcii/BS/DtcoLu/UpP2pCUP4ZdZgauGPrqvv0bjN4oEjC\\\",\\\"expiry\\\":1669278696},\\\"ksU0x00zfWLx1V0loR1WDA\\\":{\\\"token\\\":\\\"$2a$10$Nw5.MyUzTuRVlTXfo4w2dup7yCRUVR3vrUNRULlyu7qB0wForkmyG\\\",\\\"expiry\\\":1669278725},\\\"aujCGbaQZF38mGA7z1Rdfw\\\":{\\\"token\\\":\\\"$2a$10$is87POPfFaxChiyW8VpBHueRRp00p4TsljQo38DtKy4uUbnHJcweq\\\",\\\"expiry\\\":1669278733},\\\"VdLHvxIBkT7KasnnD1kqIQ\\\":{\\\"token\\\":\\\"$2a$10$wGJBlC87gL74lLawhFtn6uiQZ5dW3GIQHSUsFDK/kzTB0m2JsP3Yi\\\",\\\"expiry\\\":1669278844}}\""], ["updated_at", "2020-11-24 08:34:04.665019"], ["id", 1]]
  [1m[35m (105.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 102], ["current_sign_in_at", "2020-11-24 08:34:04.776799"], ["last_sign_in_at", "2020-11-24 08:32:13.429891"], ["updated_at", "2020-11-24 08:34:04.777427"], ["id", 1]]
  [1m[35m (48.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 405ms (Views: 0.3ms | ActiveRecord: 158.6ms | Allocations: 25768)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:34:04 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 198ms (Views: 0.1ms | ActiveRecord: 16.5ms | Allocations: 44828)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:36:46 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"2WwWwDj10QF052n-9TozAg\\\":{\\\"token\\\":\\\"$2a$10$YsKd6Tpwfcii/BS/DtcoLu/UpP2pCUP4ZdZgauGPrqvv0bjN4oEjC\\\",\\\"expiry\\\":1669278696},\\\"ksU0x00zfWLx1V0loR1WDA\\\":{\\\"token\\\":\\\"$2a$10$Nw5.MyUzTuRVlTXfo4w2dup7yCRUVR3vrUNRULlyu7qB0wForkmyG\\\",\\\"expiry\\\":1669278725},\\\"aujCGbaQZF38mGA7z1Rdfw\\\":{\\\"token\\\":\\\"$2a$10$is87POPfFaxChiyW8VpBHueRRp00p4TsljQo38DtKy4uUbnHJcweq\\\",\\\"expiry\\\":1669278733},\\\"VdLHvxIBkT7KasnnD1kqIQ\\\":{\\\"token\\\":\\\"$2a$10$wGJBlC87gL74lLawhFtn6uiQZ5dW3GIQHSUsFDK/kzTB0m2JsP3Yi\\\",\\\"expiry\\\":1669278844},\\\"Iw-1lN3DQvok-Co1rHFrGg\\\":{\\\"token\\\":\\\"$2a$10$3JnbT83DL4LE5pIB0muhQeQ040rGrbeSRnPzLgglu1wSmnCMAckzS\\\",\\\"expiry\\\":1669279006}}\""], ["updated_at", "2020-11-24 08:36:46.369451"], ["id", 1]]
  [1m[35m (18.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 103], ["current_sign_in_at", "2020-11-24 08:36:46.391840"], ["last_sign_in_at", "2020-11-24 08:34:04.776799"], ["updated_at", "2020-11-24 08:36:46.392347"], ["id", 1]]
  [1m[35m (68.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 351ms (Views: 0.4ms | ActiveRecord: 90.2ms | Allocations: 25769)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:36:46 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (2.9ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (1.4ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 217ms (Views: 0.1ms | ActiveRecord: 31.7ms | Allocations: 44818)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:37:07 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"ksU0x00zfWLx1V0loR1WDA\\\":{\\\"token\\\":\\\"$2a$10$Nw5.MyUzTuRVlTXfo4w2dup7yCRUVR3vrUNRULlyu7qB0wForkmyG\\\",\\\"expiry\\\":1669278725},\\\"aujCGbaQZF38mGA7z1Rdfw\\\":{\\\"token\\\":\\\"$2a$10$is87POPfFaxChiyW8VpBHueRRp00p4TsljQo38DtKy4uUbnHJcweq\\\",\\\"expiry\\\":1669278733},\\\"VdLHvxIBkT7KasnnD1kqIQ\\\":{\\\"token\\\":\\\"$2a$10$wGJBlC87gL74lLawhFtn6uiQZ5dW3GIQHSUsFDK/kzTB0m2JsP3Yi\\\",\\\"expiry\\\":1669278844},\\\"Iw-1lN3DQvok-Co1rHFrGg\\\":{\\\"token\\\":\\\"$2a$10$3JnbT83DL4LE5pIB0muhQeQ040rGrbeSRnPzLgglu1wSmnCMAckzS\\\",\\\"expiry\\\":1669279006},\\\"75SA2N37KVL7HhfiNgwkVw\\\":{\\\"token\\\":\\\"$2a$10$AIlwbM4fGrlBKch2b6PfSu57PnzUlq8GwcuSeTC86v0GiigPj4Lk6\\\",\\\"expiry\\\":1669279028}}\""], ["updated_at", "2020-11-24 08:37:08.290845"], ["id", 1]]
  [1m[35m (18.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 104], ["current_sign_in_at", "2020-11-24 08:37:08.312742"], ["last_sign_in_at", "2020-11-24 08:36:46.391840"], ["updated_at", "2020-11-24 08:37:08.313466"], ["id", 1]]
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 273ms (Views: 0.2ms | ActiveRecord: 27.4ms | Allocations: 25786)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:37:08 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 101ms (Views: 0.1ms | ActiveRecord: 6.2ms | Allocations: 12798)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:37:19 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"aujCGbaQZF38mGA7z1Rdfw\\\":{\\\"token\\\":\\\"$2a$10$is87POPfFaxChiyW8VpBHueRRp00p4TsljQo38DtKy4uUbnHJcweq\\\",\\\"expiry\\\":1669278733},\\\"VdLHvxIBkT7KasnnD1kqIQ\\\":{\\\"token\\\":\\\"$2a$10$wGJBlC87gL74lLawhFtn6uiQZ5dW3GIQHSUsFDK/kzTB0m2JsP3Yi\\\",\\\"expiry\\\":1669278844},\\\"Iw-1lN3DQvok-Co1rHFrGg\\\":{\\\"token\\\":\\\"$2a$10$3JnbT83DL4LE5pIB0muhQeQ040rGrbeSRnPzLgglu1wSmnCMAckzS\\\",\\\"expiry\\\":1669279006},\\\"75SA2N37KVL7HhfiNgwkVw\\\":{\\\"token\\\":\\\"$2a$10$AIlwbM4fGrlBKch2b6PfSu57PnzUlq8GwcuSeTC86v0GiigPj4Lk6\\\",\\\"expiry\\\":1669279028},\\\"J7F0mN23iBngZWbmd5UO6g\\\":{\\\"token\\\":\\\"$2a$10$B0DAhk126Qm94pW1Q7nhme.E5KRn8xQSzp8SiMuh24CNhOIOKLLdu\\\",\\\"expiry\\\":1669279039}}\""], ["updated_at", "2020-11-24 08:37:19.796584"], ["id", 1]]
  [1m[35m (70.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 105], ["current_sign_in_at", "2020-11-24 08:37:19.871702"], ["last_sign_in_at", "2020-11-24 08:37:08.312742"], ["updated_at", "2020-11-24 08:37:19.872530"], ["id", 1]]
  [1m[35m (48.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.3ms | ActiveRecord: 123.2ms | Allocations: 25804)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:37:19 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 157ms (Views: 0.1ms | ActiveRecord: 13.4ms | Allocations: 44745)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:37:44 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"VdLHvxIBkT7KasnnD1kqIQ\\\":{\\\"token\\\":\\\"$2a$10$wGJBlC87gL74lLawhFtn6uiQZ5dW3GIQHSUsFDK/kzTB0m2JsP3Yi\\\",\\\"expiry\\\":1669278844},\\\"Iw-1lN3DQvok-Co1rHFrGg\\\":{\\\"token\\\":\\\"$2a$10$3JnbT83DL4LE5pIB0muhQeQ040rGrbeSRnPzLgglu1wSmnCMAckzS\\\",\\\"expiry\\\":1669279006},\\\"75SA2N37KVL7HhfiNgwkVw\\\":{\\\"token\\\":\\\"$2a$10$AIlwbM4fGrlBKch2b6PfSu57PnzUlq8GwcuSeTC86v0GiigPj4Lk6\\\",\\\"expiry\\\":1669279028},\\\"J7F0mN23iBngZWbmd5UO6g\\\":{\\\"token\\\":\\\"$2a$10$B0DAhk126Qm94pW1Q7nhme.E5KRn8xQSzp8SiMuh24CNhOIOKLLdu\\\",\\\"expiry\\\":1669279039},\\\"PqQ0HXVHbBjfBwHhbMszZA\\\":{\\\"token\\\":\\\"$2a$10$qTCgdPFN/.bz4BRDLL1aX.EMZh8oIw6aC5Xm8SHoO312i55sUztCO\\\",\\\"expiry\\\":1669279065}}\""], ["updated_at", "2020-11-24 08:37:45.097555"], ["id", 1]]
  [1m[35m (21.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 106], ["current_sign_in_at", "2020-11-24 08:37:45.122810"], ["last_sign_in_at", "2020-11-24 08:37:19.871702"], ["updated_at", "2020-11-24 08:37:45.123320"], ["id", 1]]
  [1m[35m (82.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 353ms (Views: 0.4ms | ActiveRecord: 108.2ms | Allocations: 25801)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:37:45 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 164ms (Views: 0.1ms | ActiveRecord: 12.3ms | Allocations: 44746)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:39:12 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Iw-1lN3DQvok-Co1rHFrGg\\\":{\\\"token\\\":\\\"$2a$10$3JnbT83DL4LE5pIB0muhQeQ040rGrbeSRnPzLgglu1wSmnCMAckzS\\\",\\\"expiry\\\":1669279006},\\\"75SA2N37KVL7HhfiNgwkVw\\\":{\\\"token\\\":\\\"$2a$10$AIlwbM4fGrlBKch2b6PfSu57PnzUlq8GwcuSeTC86v0GiigPj4Lk6\\\",\\\"expiry\\\":1669279028},\\\"J7F0mN23iBngZWbmd5UO6g\\\":{\\\"token\\\":\\\"$2a$10$B0DAhk126Qm94pW1Q7nhme.E5KRn8xQSzp8SiMuh24CNhOIOKLLdu\\\",\\\"expiry\\\":1669279039},\\\"PqQ0HXVHbBjfBwHhbMszZA\\\":{\\\"token\\\":\\\"$2a$10$qTCgdPFN/.bz4BRDLL1aX.EMZh8oIw6aC5Xm8SHoO312i55sUztCO\\\",\\\"expiry\\\":1669279065},\\\"sBQqI79-jt4PmViPpSzzcA\\\":{\\\"token\\\":\\\"$2a$10$eugsG/xuGxApP0tnqi08teugzBX8MruwCrT8YO8H7WKdCxaoUObYK\\\",\\\"expiry\\\":1669279152}}\""], ["updated_at", "2020-11-24 08:39:12.598078"], ["id", 1]]
  [1m[35m (16.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 107], ["current_sign_in_at", "2020-11-24 08:39:12.619608"], ["last_sign_in_at", "2020-11-24 08:37:45.122810"], ["updated_at", "2020-11-24 08:39:12.620367"], ["id", 1]]
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.2ms | ActiveRecord: 24.3ms | Allocations: 25817)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:39:12 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.4ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 200ms (Views: 0.1ms | ActiveRecord: 11.6ms | Allocations: 44725)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:39:37 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"75SA2N37KVL7HhfiNgwkVw\\\":{\\\"token\\\":\\\"$2a$10$AIlwbM4fGrlBKch2b6PfSu57PnzUlq8GwcuSeTC86v0GiigPj4Lk6\\\",\\\"expiry\\\":1669279028},\\\"J7F0mN23iBngZWbmd5UO6g\\\":{\\\"token\\\":\\\"$2a$10$B0DAhk126Qm94pW1Q7nhme.E5KRn8xQSzp8SiMuh24CNhOIOKLLdu\\\",\\\"expiry\\\":1669279039},\\\"PqQ0HXVHbBjfBwHhbMszZA\\\":{\\\"token\\\":\\\"$2a$10$qTCgdPFN/.bz4BRDLL1aX.EMZh8oIw6aC5Xm8SHoO312i55sUztCO\\\",\\\"expiry\\\":1669279065},\\\"sBQqI79-jt4PmViPpSzzcA\\\":{\\\"token\\\":\\\"$2a$10$eugsG/xuGxApP0tnqi08teugzBX8MruwCrT8YO8H7WKdCxaoUObYK\\\",\\\"expiry\\\":1669279152},\\\"jhSrCC8TWucaW39ZpdWYcA\\\":{\\\"token\\\":\\\"$2a$10$vv1fCOLVRP2SoZU6THz5XOS.esvZhCexf/p8y0x5z89RSLI8ehqpG\\\",\\\"expiry\\\":1669279177}}\""], ["updated_at", "2020-11-24 08:39:37.858137"], ["id", 1]]
  [1m[35m (17.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 108], ["current_sign_in_at", "2020-11-24 08:39:37.880965"], ["last_sign_in_at", "2020-11-24 08:39:12.619608"], ["updated_at", "2020-11-24 08:39:37.881533"], ["id", 1]]
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 279ms (Views: 0.3ms | ActiveRecord: 26.0ms | Allocations: 25804)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:39:37 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 154ms (Views: 0.3ms | ActiveRecord: 10.9ms | Allocations: 43248)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:31:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:31:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:31:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:40:26 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"J7F0mN23iBngZWbmd5UO6g\\\":{\\\"token\\\":\\\"$2a$10$B0DAhk126Qm94pW1Q7nhme.E5KRn8xQSzp8SiMuh24CNhOIOKLLdu\\\",\\\"expiry\\\":1669279039},\\\"PqQ0HXVHbBjfBwHhbMszZA\\\":{\\\"token\\\":\\\"$2a$10$qTCgdPFN/.bz4BRDLL1aX.EMZh8oIw6aC5Xm8SHoO312i55sUztCO\\\",\\\"expiry\\\":1669279065},\\\"sBQqI79-jt4PmViPpSzzcA\\\":{\\\"token\\\":\\\"$2a$10$eugsG/xuGxApP0tnqi08teugzBX8MruwCrT8YO8H7WKdCxaoUObYK\\\",\\\"expiry\\\":1669279152},\\\"jhSrCC8TWucaW39ZpdWYcA\\\":{\\\"token\\\":\\\"$2a$10$vv1fCOLVRP2SoZU6THz5XOS.esvZhCexf/p8y0x5z89RSLI8ehqpG\\\",\\\"expiry\\\":1669279177},\\\"5uE3C4yLFsNG1-dNEJ9vfQ\\\":{\\\"token\\\":\\\"$2a$10$xBwXTLmwUyIUgs1ni47QYe4R5SthRr1kIJ3P3krfoTVBeKLivKg2C\\\",\\\"expiry\\\":1669279227}}\""], ["updated_at", "2020-11-24 08:40:27.063912"], ["id", 1]]
  [1m[35m (23.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 109], ["current_sign_in_at", "2020-11-24 08:40:27.092589"], ["last_sign_in_at", "2020-11-24 08:39:37.880965"], ["updated_at", "2020-11-24 08:40:27.093007"], ["id", 1]]
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.3ms | ActiveRecord: 33.0ms | Allocations: 25801)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:40:27 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mShoppingCartItem Load (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
Completed 500 Internal Server Error in 133ms (ActiveRecord: 9.3ms | Allocations: 34168)



NoMethodError - undefined method `product_id' for #<ShoppingCartItem:0x0000000007a91738>
Did you mean?  product:
  app/controllers/api/v1/carts_controller.rb:31:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:42:51 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"PqQ0HXVHbBjfBwHhbMszZA\\\":{\\\"token\\\":\\\"$2a$10$qTCgdPFN/.bz4BRDLL1aX.EMZh8oIw6aC5Xm8SHoO312i55sUztCO\\\",\\\"expiry\\\":1669279065},\\\"sBQqI79-jt4PmViPpSzzcA\\\":{\\\"token\\\":\\\"$2a$10$eugsG/xuGxApP0tnqi08teugzBX8MruwCrT8YO8H7WKdCxaoUObYK\\\",\\\"expiry\\\":1669279152},\\\"jhSrCC8TWucaW39ZpdWYcA\\\":{\\\"token\\\":\\\"$2a$10$vv1fCOLVRP2SoZU6THz5XOS.esvZhCexf/p8y0x5z89RSLI8ehqpG\\\",\\\"expiry\\\":1669279177},\\\"5uE3C4yLFsNG1-dNEJ9vfQ\\\":{\\\"token\\\":\\\"$2a$10$xBwXTLmwUyIUgs1ni47QYe4R5SthRr1kIJ3P3krfoTVBeKLivKg2C\\\",\\\"expiry\\\":1669279227},\\\"H7zs5gT3eFwoM-YKTLSQFw\\\":{\\\"token\\\":\\\"$2a$10$EJ90kFjjKXB92JSl5otlfuroLzXQo8aFFHjn/O5JBfoTfj3EFyqu6\\\",\\\"expiry\\\":1669279371}}\""], ["updated_at", "2020-11-24 08:42:51.804967"], ["id", 1]]
  [1m[35m (58.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 110], ["current_sign_in_at", "2020-11-24 08:42:51.867521"], ["last_sign_in_at", "2020-11-24 08:40:27.092589"], ["updated_at", "2020-11-24 08:42:51.867967"], ["id", 1]]
  [1m[35m (70.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 363ms (Views: 0.2ms | ActiveRecord: 130.7ms | Allocations: 15023)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:42:52 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
Completed 500 Internal Server Error in 105ms (ActiveRecord: 1.0ms | Allocations: 12284)



NoMethodError - undefined method `product_id' for #<ShoppingCartItem:0x00007f31604d8e90>
Did you mean?  product:
  app/controllers/api/v1/carts_controller.rb:31:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:43:08 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"sBQqI79-jt4PmViPpSzzcA\\\":{\\\"token\\\":\\\"$2a$10$eugsG/xuGxApP0tnqi08teugzBX8MruwCrT8YO8H7WKdCxaoUObYK\\\",\\\"expiry\\\":1669279152},\\\"jhSrCC8TWucaW39ZpdWYcA\\\":{\\\"token\\\":\\\"$2a$10$vv1fCOLVRP2SoZU6THz5XOS.esvZhCexf/p8y0x5z89RSLI8ehqpG\\\",\\\"expiry\\\":1669279177},\\\"5uE3C4yLFsNG1-dNEJ9vfQ\\\":{\\\"token\\\":\\\"$2a$10$xBwXTLmwUyIUgs1ni47QYe4R5SthRr1kIJ3P3krfoTVBeKLivKg2C\\\",\\\"expiry\\\":1669279227},\\\"H7zs5gT3eFwoM-YKTLSQFw\\\":{\\\"token\\\":\\\"$2a$10$EJ90kFjjKXB92JSl5otlfuroLzXQo8aFFHjn/O5JBfoTfj3EFyqu6\\\",\\\"expiry\\\":1669279371},\\\"kQCopMnqWd9HLXazluWfBg\\\":{\\\"token\\\":\\\"$2a$10$SXWGPyE3.0mJoh10K1mrsuHqIslA4jE9GFUuf6DUsuk66X1hQNzkC\\\",\\\"expiry\\\":1669279388}}\""], ["updated_at", "2020-11-24 08:43:08.466066"], ["id", 1]]
  [1m[35m (63.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 111], ["current_sign_in_at", "2020-11-24 08:43:08.534510"], ["last_sign_in_at", "2020-11-24 08:42:51.867521"], ["updated_at", "2020-11-24 08:43:08.534970"], ["id", 1]]
  [1m[35m (21.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 337ms (Views: 0.2ms | ActiveRecord: 89.7ms | Allocations: 25802)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:43:08 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mShoppingCartItem Load (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 136ms (Views: 0.1ms | ActiveRecord: 9.3ms | Allocations: 43303)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:31:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:31:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:31:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:43:21 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"jhSrCC8TWucaW39ZpdWYcA\\\":{\\\"token\\\":\\\"$2a$10$vv1fCOLVRP2SoZU6THz5XOS.esvZhCexf/p8y0x5z89RSLI8ehqpG\\\",\\\"expiry\\\":1669279177},\\\"5uE3C4yLFsNG1-dNEJ9vfQ\\\":{\\\"token\\\":\\\"$2a$10$xBwXTLmwUyIUgs1ni47QYe4R5SthRr1kIJ3P3krfoTVBeKLivKg2C\\\",\\\"expiry\\\":1669279227},\\\"H7zs5gT3eFwoM-YKTLSQFw\\\":{\\\"token\\\":\\\"$2a$10$EJ90kFjjKXB92JSl5otlfuroLzXQo8aFFHjn/O5JBfoTfj3EFyqu6\\\",\\\"expiry\\\":1669279371},\\\"kQCopMnqWd9HLXazluWfBg\\\":{\\\"token\\\":\\\"$2a$10$SXWGPyE3.0mJoh10K1mrsuHqIslA4jE9GFUuf6DUsuk66X1hQNzkC\\\",\\\"expiry\\\":1669279388},\\\"WWzQpcjoqGVNxolmjyfAng\\\":{\\\"token\\\":\\\"$2a$10$s0WxTiv2umAW0RyTYNJUtO.XeuGHuHAt2pkc9zvAdPZS40VixYKE.\\\",\\\"expiry\\\":1669279402}}\""], ["updated_at", "2020-11-24 08:43:22.239344"], ["id", 1]]
  [1m[35m (32.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 112], ["current_sign_in_at", "2020-11-24 08:43:22.276695"], ["last_sign_in_at", "2020-11-24 08:43:08.534510"], ["updated_at", "2020-11-24 08:43:22.277609"], ["id", 1]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.3ms | ActiveRecord: 40.7ms | Allocations: 25785)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:43:22 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
Completed 500 Internal Server Error in 129ms (ActiveRecord: 9.5ms | Allocations: 26756)



NoMethodError - undefined method `product_variant_id' for #<ShoppingCartItem:0x00007f3158940710>
Did you mean?  product_variant
               product_variant=:
  app/controllers/api/v1/carts_controller.rb:31:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:47:05 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"5uE3C4yLFsNG1-dNEJ9vfQ\\\":{\\\"token\\\":\\\"$2a$10$xBwXTLmwUyIUgs1ni47QYe4R5SthRr1kIJ3P3krfoTVBeKLivKg2C\\\",\\\"expiry\\\":1669279227},\\\"H7zs5gT3eFwoM-YKTLSQFw\\\":{\\\"token\\\":\\\"$2a$10$EJ90kFjjKXB92JSl5otlfuroLzXQo8aFFHjn/O5JBfoTfj3EFyqu6\\\",\\\"expiry\\\":1669279371},\\\"kQCopMnqWd9HLXazluWfBg\\\":{\\\"token\\\":\\\"$2a$10$SXWGPyE3.0mJoh10K1mrsuHqIslA4jE9GFUuf6DUsuk66X1hQNzkC\\\",\\\"expiry\\\":1669279388},\\\"WWzQpcjoqGVNxolmjyfAng\\\":{\\\"token\\\":\\\"$2a$10$s0WxTiv2umAW0RyTYNJUtO.XeuGHuHAt2pkc9zvAdPZS40VixYKE.\\\",\\\"expiry\\\":1669279402},\\\"SKsOzY1x2LK2hG5DCu9gVg\\\":{\\\"token\\\":\\\"$2a$10$u3v3U6oLH9D2gmeYEB1jeeSYfpiPi6hGWRGMJZpgBYn0aghIRvD42\\\",\\\"expiry\\\":1669279625}}\""], ["updated_at", "2020-11-24 08:47:05.466657"], ["id", 1]]
  [1m[35m (34.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 113], ["current_sign_in_at", "2020-11-24 08:47:05.506144"], ["last_sign_in_at", "2020-11-24 08:43:22.276695"], ["updated_at", "2020-11-24 08:47:05.506579"], ["id", 1]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 293ms (Views: 0.2ms | ActiveRecord: 45.8ms | Allocations: 25802)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:47:05 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mStore Load (0.6ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 160ms (Views: 0.1ms | ActiveRecord: 12.3ms | Allocations: 43302)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:31:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:31:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:31:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:47:26 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"H7zs5gT3eFwoM-YKTLSQFw\\\":{\\\"token\\\":\\\"$2a$10$EJ90kFjjKXB92JSl5otlfuroLzXQo8aFFHjn/O5JBfoTfj3EFyqu6\\\",\\\"expiry\\\":1669279371},\\\"kQCopMnqWd9HLXazluWfBg\\\":{\\\"token\\\":\\\"$2a$10$SXWGPyE3.0mJoh10K1mrsuHqIslA4jE9GFUuf6DUsuk66X1hQNzkC\\\",\\\"expiry\\\":1669279388},\\\"WWzQpcjoqGVNxolmjyfAng\\\":{\\\"token\\\":\\\"$2a$10$s0WxTiv2umAW0RyTYNJUtO.XeuGHuHAt2pkc9zvAdPZS40VixYKE.\\\",\\\"expiry\\\":1669279402},\\\"SKsOzY1x2LK2hG5DCu9gVg\\\":{\\\"token\\\":\\\"$2a$10$u3v3U6oLH9D2gmeYEB1jeeSYfpiPi6hGWRGMJZpgBYn0aghIRvD42\\\",\\\"expiry\\\":1669279625},\\\"rI4bSVRqjxOcV2Xj4AQ1Cg\\\":{\\\"token\\\":\\\"$2a$10$Kf/lOoV1X2Rls1GLpkcO6.1LFjlJ2VmMmCrI4qmoWYj808CIoXFhu\\\",\\\"expiry\\\":1669279646}}\""], ["updated_at", "2020-11-24 08:47:27.002154"], ["id", 1]]
  [1m[35m (21.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 114], ["current_sign_in_at", "2020-11-24 08:47:27.028937"], ["last_sign_in_at", "2020-11-24 08:47:05.506144"], ["updated_at", "2020-11-24 08:47:27.029709"], ["id", 1]]
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 305ms (Views: 0.2ms | ActiveRecord: 30.7ms | Allocations: 25818)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:47:27 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 82ms (ActiveRecord: 1.2ms | Allocations: 5442)



SyntaxError - syntax error, unexpected =>, expecting '}'
...tVariant => :product_variant => :product}
...                             ^~
:
  app/serializers/shopping_cart_item_serializer.rb:17:in `'
  app/controllers/api/v1/carts_controller.rb:30:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:47:45 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"kQCopMnqWd9HLXazluWfBg\\\":{\\\"token\\\":\\\"$2a$10$SXWGPyE3.0mJoh10K1mrsuHqIslA4jE9GFUuf6DUsuk66X1hQNzkC\\\",\\\"expiry\\\":1669279388},\\\"WWzQpcjoqGVNxolmjyfAng\\\":{\\\"token\\\":\\\"$2a$10$s0WxTiv2umAW0RyTYNJUtO.XeuGHuHAt2pkc9zvAdPZS40VixYKE.\\\",\\\"expiry\\\":1669279402},\\\"SKsOzY1x2LK2hG5DCu9gVg\\\":{\\\"token\\\":\\\"$2a$10$u3v3U6oLH9D2gmeYEB1jeeSYfpiPi6hGWRGMJZpgBYn0aghIRvD42\\\",\\\"expiry\\\":1669279625},\\\"rI4bSVRqjxOcV2Xj4AQ1Cg\\\":{\\\"token\\\":\\\"$2a$10$Kf/lOoV1X2Rls1GLpkcO6.1LFjlJ2VmMmCrI4qmoWYj808CIoXFhu\\\",\\\"expiry\\\":1669279646},\\\"Yi9peqluxWeuVMeavCwsHg\\\":{\\\"token\\\":\\\"$2a$10$zzkVYm6.efslGNk/eLhViewIawekhjd.gw570VxQV819gQC365FYW\\\",\\\"expiry\\\":1669279666}}\""], ["updated_at", "2020-11-24 08:47:46.371105"], ["id", 1]]
  [1m[35m (34.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 115], ["current_sign_in_at", "2020-11-24 08:47:46.410620"], ["last_sign_in_at", "2020-11-24 08:47:27.028937"], ["updated_at", "2020-11-24 08:47:46.411456"], ["id", 1]]
  [1m[35m (90.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 382ms (Views: 0.3ms | ActiveRecord: 129.3ms | Allocations: 25769)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:47:46 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:31:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 149ms (Views: 0.1ms | ActiveRecord: 13.6ms | Allocations: 43363)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:31:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:31:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:31:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:49:56 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"WWzQpcjoqGVNxolmjyfAng\\\":{\\\"token\\\":\\\"$2a$10$s0WxTiv2umAW0RyTYNJUtO.XeuGHuHAt2pkc9zvAdPZS40VixYKE.\\\",\\\"expiry\\\":1669279402},\\\"SKsOzY1x2LK2hG5DCu9gVg\\\":{\\\"token\\\":\\\"$2a$10$u3v3U6oLH9D2gmeYEB1jeeSYfpiPi6hGWRGMJZpgBYn0aghIRvD42\\\",\\\"expiry\\\":1669279625},\\\"rI4bSVRqjxOcV2Xj4AQ1Cg\\\":{\\\"token\\\":\\\"$2a$10$Kf/lOoV1X2Rls1GLpkcO6.1LFjlJ2VmMmCrI4qmoWYj808CIoXFhu\\\",\\\"expiry\\\":1669279646},\\\"Yi9peqluxWeuVMeavCwsHg\\\":{\\\"token\\\":\\\"$2a$10$zzkVYm6.efslGNk/eLhViewIawekhjd.gw570VxQV819gQC365FYW\\\",\\\"expiry\\\":1669279666},\\\"S72-wravBXJAsAR9v-CSig\\\":{\\\"token\\\":\\\"$2a$10$juPdGjblQ/ToUw6sa5Ku5.N7jOwfr8JsW/jHYD/Br4pS5yaotXdQu\\\",\\\"expiry\\\":1669279797}}\""], ["updated_at", "2020-11-24 08:49:57.198210"], ["id", 1]]
  [1m[35m (37.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 116], ["current_sign_in_at", "2020-11-24 08:49:57.239643"], ["last_sign_in_at", "2020-11-24 08:47:46.410620"], ["updated_at", "2020-11-24 08:49:57.240161"], ["id", 1]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.3ms | ActiveRecord: 45.7ms | Allocations: 25785)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:49:57 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 82ms (ActiveRecord: 1.7ms | Allocations: 4355)



NoMethodError - undefined method `product_variant' for :shopping_cart_items:Symbol:
  app/controllers/api/v1/carts_controller.rb:31:in `index'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-24 15:50:05 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"SKsOzY1x2LK2hG5DCu9gVg\\\":{\\\"token\\\":\\\"$2a$10$u3v3U6oLH9D2gmeYEB1jeeSYfpiPi6hGWRGMJZpgBYn0aghIRvD42\\\",\\\"expiry\\\":1669279625},\\\"rI4bSVRqjxOcV2Xj4AQ1Cg\\\":{\\\"token\\\":\\\"$2a$10$Kf/lOoV1X2Rls1GLpkcO6.1LFjlJ2VmMmCrI4qmoWYj808CIoXFhu\\\",\\\"expiry\\\":1669279646},\\\"Yi9peqluxWeuVMeavCwsHg\\\":{\\\"token\\\":\\\"$2a$10$zzkVYm6.efslGNk/eLhViewIawekhjd.gw570VxQV819gQC365FYW\\\",\\\"expiry\\\":1669279666},\\\"S72-wravBXJAsAR9v-CSig\\\":{\\\"token\\\":\\\"$2a$10$juPdGjblQ/ToUw6sa5Ku5.N7jOwfr8JsW/jHYD/Br4pS5yaotXdQu\\\",\\\"expiry\\\":1669279797},\\\"KCzc4yhqQf5AIyLn2H3FQQ\\\":{\\\"token\\\":\\\"$2a$10$iR6QvWueTzEEc0cOpMVvTuuLxX2jFzY2CpZkEmWNXjWRp5LagDsDi\\\",\\\"expiry\\\":1669279806}}\""], ["updated_at", "2020-11-24 08:50:06.249494"], ["id", 1]]
  [1m[35m (19.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 117], ["current_sign_in_at", "2020-11-24 08:50:06.280686"], ["last_sign_in_at", "2020-11-24 08:49:57.239643"], ["updated_at", "2020-11-24 08:50:06.281113"], ["id", 1]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.2ms | ActiveRecord: 29.5ms | Allocations: 25770)


Started GET "/api/v1/carts" for ::1 at 2020-11-24 15:50:06 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.5ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:32:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 141ms (Views: 0.1ms | ActiveRecord: 10.0ms | Allocations: 44798)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:32:in `index'


  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.6ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/" for ::1 at 2020-11-25 11:52:51 +0700
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 11:52:55 +0700
Started GET "/" for ::1 at 2020-11-25 11:52:55 +0700
  [1m[35m (120.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (121.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (120.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/bainur/.rvm/gems/ruby-2.7.1/gems/railties-6.0.3.3/lib/rails/templates/rails/welcome/index.html.erb
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  Rendering /home/bainur/.rvm/gems/ruby-2.7.1/gems/railties-6.0.3.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/bainur/.rvm/gems/ruby-2.7.1/gems/railties-6.0.3.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 81.0ms | Allocations: 752)
  Rendered /home/bainur/.rvm/gems/ruby-2.7.1/gems/railties-6.0.3.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 73.4ms | Allocations: 211)
Completed 200 OK in 315ms (Views: 259.2ms | ActiveRecord: 0.0ms | Allocations: 9314)


Completed 200 OK in 129ms (Views: 128.8ms | ActiveRecord: 0.0ms | Allocations: 5435)


  [1m[36mUser Load (409.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
Started GET "/favicon.ico" for ::1 at 2020-11-25 11:53:00 +0700
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (221.7ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"rI4bSVRqjxOcV2Xj4AQ1Cg\\\":{\\\"token\\\":\\\"$2a$10$Kf/lOoV1X2Rls1GLpkcO6.1LFjlJ2VmMmCrI4qmoWYj808CIoXFhu\\\",\\\"expiry\\\":1669279646},\\\"Yi9peqluxWeuVMeavCwsHg\\\":{\\\"token\\\":\\\"$2a$10$zzkVYm6.efslGNk/eLhViewIawekhjd.gw570VxQV819gQC365FYW\\\",\\\"expiry\\\":1669279666},\\\"S72-wravBXJAsAR9v-CSig\\\":{\\\"token\\\":\\\"$2a$10$juPdGjblQ/ToUw6sa5Ku5.N7jOwfr8JsW/jHYD/Br4pS5yaotXdQu\\\",\\\"expiry\\\":1669279797},\\\"KCzc4yhqQf5AIyLn2H3FQQ\\\":{\\\"token\\\":\\\"$2a$10$iR6QvWueTzEEc0cOpMVvTuuLxX2jFzY2CpZkEmWNXjWRp5LagDsDi\\\",\\\"expiry\\\":1669279806},\\\"PLn0EZfhDxy1YIYCrRfg1A\\\":{\\\"token\\\":\\\"$2a$10$X8F9TvtGuWXkRkkqyDHhnuNT//FZuaDugbTWCUdDQoStgJIzn3VK.\\\",\\\"expiry\\\":1669351980}}\""], ["updated_at", "2020-11-25 04:53:00.607019"], ["id", 1]]
  [1m[35m (166.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 118], ["current_sign_in_at", "2020-11-25 04:53:01.034271"], ["last_sign_in_at", "2020-11-24 08:50:06.280686"], ["updated_at", "2020-11-25 04:53:01.034804"], ["id", 1]]
  [1m[35m (75.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 1677ms (Views: 0.2ms | ActiveRecord: 1284.8ms | Allocations: 58833)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 11:53:01 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (126.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" DESC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (194.5ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProduct Load (83.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (131.5ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 8], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 1096ms (Views: 0.3ms | ActiveRecord: 553.3ms | Allocations: 63621)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 11:53:43 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Yi9peqluxWeuVMeavCwsHg\\\":{\\\"token\\\":\\\"$2a$10$zzkVYm6.efslGNk/eLhViewIawekhjd.gw570VxQV819gQC365FYW\\\",\\\"expiry\\\":1669279666},\\\"S72-wravBXJAsAR9v-CSig\\\":{\\\"token\\\":\\\"$2a$10$juPdGjblQ/ToUw6sa5Ku5.N7jOwfr8JsW/jHYD/Br4pS5yaotXdQu\\\",\\\"expiry\\\":1669279797},\\\"KCzc4yhqQf5AIyLn2H3FQQ\\\":{\\\"token\\\":\\\"$2a$10$iR6QvWueTzEEc0cOpMVvTuuLxX2jFzY2CpZkEmWNXjWRp5LagDsDi\\\",\\\"expiry\\\":1669279806},\\\"PLn0EZfhDxy1YIYCrRfg1A\\\":{\\\"token\\\":\\\"$2a$10$X8F9TvtGuWXkRkkqyDHhnuNT//FZuaDugbTWCUdDQoStgJIzn3VK.\\\",\\\"expiry\\\":1669351980},\\\"eDXFN3GAg_d8l4L2l47GTg\\\":{\\\"token\\\":\\\"$2a$10$.ltCrRT.hrR0wgE9/drZZ.mYp2ARfSL7lERjE9U2eRf.2ZcvVYsIm\\\",\\\"expiry\\\":1669352023}}\""], ["updated_at", "2020-11-25 04:53:43.981605"], ["id", 1]]
  [1m[35m (60.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 119], ["current_sign_in_at", "2020-11-25 04:53:44.045340"], ["last_sign_in_at", "2020-11-25 04:53:01.034271"], ["updated_at", "2020-11-25 04:53:44.045798"], ["id", 1]]
  [1m[35m (30.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.2ms | ActiveRecord: 92.3ms | Allocations: 15164)


Started GET "/api/v1/products" for ::1 at 2020-11-25 11:53:44 +0700
Processing by Api::V1::ProductsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:10:in `index'
  [1m[36mProductVariant Load (0.8ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."product_id" IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)[0m  [["product_id", 1], ["product_id", 2], ["product_id", 3], ["product_id", 4], ["product_id", 5], ["product_id", 6], ["product_id", 7], ["product_id", 8], ["product_id", 9], ["product_id", 10]]
  ↳ app/controllers/api/v1/products_controller.rb:10:in `index'
  [1m[36mStore Load (83.7ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" IN ($1, $2, $3, $4)[0m  [["id", 1], ["id", 3], ["id", 4], ["id", 5]]
  ↳ app/controllers/api/v1/products_controller.rb:10:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 451ms (Views: 0.1ms | ActiveRecord: 89.0ms | Allocations: 40246)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.5ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:09:13 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"S72-wravBXJAsAR9v-CSig\\\":{\\\"token\\\":\\\"$2a$10$juPdGjblQ/ToUw6sa5Ku5.N7jOwfr8JsW/jHYD/Br4pS5yaotXdQu\\\",\\\"expiry\\\":1669279797},\\\"KCzc4yhqQf5AIyLn2H3FQQ\\\":{\\\"token\\\":\\\"$2a$10$iR6QvWueTzEEc0cOpMVvTuuLxX2jFzY2CpZkEmWNXjWRp5LagDsDi\\\",\\\"expiry\\\":1669279806},\\\"PLn0EZfhDxy1YIYCrRfg1A\\\":{\\\"token\\\":\\\"$2a$10$X8F9TvtGuWXkRkkqyDHhnuNT//FZuaDugbTWCUdDQoStgJIzn3VK.\\\",\\\"expiry\\\":1669351980},\\\"eDXFN3GAg_d8l4L2l47GTg\\\":{\\\"token\\\":\\\"$2a$10$.ltCrRT.hrR0wgE9/drZZ.mYp2ARfSL7lERjE9U2eRf.2ZcvVYsIm\\\",\\\"expiry\\\":1669352023},\\\"gQelu72JPXdd3WhRM7sukw\\\":{\\\"token\\\":\\\"$2a$10$6rbjF49hGrlYNND2cqzzqujzVisNLTjIPYhfjyirKUKuiR7RviPRa\\\",\\\"expiry\\\":1669352953}}\""], ["updated_at", "2020-11-25 05:09:13.719944"], ["id", 1]]
  [1m[35m (10.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (2.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 120], ["current_sign_in_at", "2020-11-25 05:09:13.735824"], ["last_sign_in_at", "2020-11-25 04:53:44.045340"], ["updated_at", "2020-11-25 05:09:13.736433"], ["id", 1]]
  [1m[35m (53.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 328ms (Views: 0.3ms | ActiveRecord: 68.4ms | Allocations: 25535)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:09:13 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" DESC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 8], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.4ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 6], ["updated_at", "2020-11-25 05:09:13.994365"], ["id", 11]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (41.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
Couldn't find ShoppingCartItem with 'id'=notes
Completed 404 Not Found in 178ms (Views: 0.2ms | ActiveRecord: 43.5ms | Allocations: 32719)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:10:43 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"KCzc4yhqQf5AIyLn2H3FQQ\\\":{\\\"token\\\":\\\"$2a$10$iR6QvWueTzEEc0cOpMVvTuuLxX2jFzY2CpZkEmWNXjWRp5LagDsDi\\\",\\\"expiry\\\":1669279806},\\\"PLn0EZfhDxy1YIYCrRfg1A\\\":{\\\"token\\\":\\\"$2a$10$X8F9TvtGuWXkRkkqyDHhnuNT//FZuaDugbTWCUdDQoStgJIzn3VK.\\\",\\\"expiry\\\":1669351980},\\\"eDXFN3GAg_d8l4L2l47GTg\\\":{\\\"token\\\":\\\"$2a$10$.ltCrRT.hrR0wgE9/drZZ.mYp2ARfSL7lERjE9U2eRf.2ZcvVYsIm\\\",\\\"expiry\\\":1669352023},\\\"gQelu72JPXdd3WhRM7sukw\\\":{\\\"token\\\":\\\"$2a$10$6rbjF49hGrlYNND2cqzzqujzVisNLTjIPYhfjyirKUKuiR7RviPRa\\\",\\\"expiry\\\":1669352953},\\\"d7nAsDakNjY5NZwPkb8DRQ\\\":{\\\"token\\\":\\\"$2a$10$dlNhxabuk/qH17ZaabufuuAho8Z7OZmv/T4HNFKUVNyYCe.IBr2Jm\\\",\\\"expiry\\\":1669353043}}\""], ["updated_at", "2020-11-25 05:10:43.804662"], ["id", 1]]
  [1m[35m (19.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 121], ["current_sign_in_at", "2020-11-25 05:10:43.828548"], ["last_sign_in_at", "2020-11-25 05:09:13.735824"], ["updated_at", "2020-11-25 05:10:43.829240"], ["id", 1]]
  [1m[35m (64.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 332ms (Views: 0.2ms | ActiveRecord: 89.4ms | Allocations: 25813)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:10:43 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" DESC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 8], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 9], ["updated_at", "2020-11-25 05:10:44.077411"], ["id", 11]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (31.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 165ms (Views: 0.2ms | ActiveRecord: 43.2ms | Allocations: 32996)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:10:56 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"PLn0EZfhDxy1YIYCrRfg1A\\\":{\\\"token\\\":\\\"$2a$10$X8F9TvtGuWXkRkkqyDHhnuNT//FZuaDugbTWCUdDQoStgJIzn3VK.\\\",\\\"expiry\\\":1669351980},\\\"eDXFN3GAg_d8l4L2l47GTg\\\":{\\\"token\\\":\\\"$2a$10$.ltCrRT.hrR0wgE9/drZZ.mYp2ARfSL7lERjE9U2eRf.2ZcvVYsIm\\\",\\\"expiry\\\":1669352023},\\\"gQelu72JPXdd3WhRM7sukw\\\":{\\\"token\\\":\\\"$2a$10$6rbjF49hGrlYNND2cqzzqujzVisNLTjIPYhfjyirKUKuiR7RviPRa\\\",\\\"expiry\\\":1669352953},\\\"d7nAsDakNjY5NZwPkb8DRQ\\\":{\\\"token\\\":\\\"$2a$10$dlNhxabuk/qH17ZaabufuuAho8Z7OZmv/T4HNFKUVNyYCe.IBr2Jm\\\",\\\"expiry\\\":1669353043},\\\"-xApuEOFx8gnPRqe5oEckg\\\":{\\\"token\\\":\\\"$2a$10$FiyjUkvVa5N0BsdsFkk7xuSVWBzc.32uuRnIfSRDs39KkocMtTwhy\\\",\\\"expiry\\\":1669353056}}\""], ["updated_at", "2020-11-25 05:10:56.413160"], ["id", 1]]
  [1m[35m (14.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 122], ["current_sign_in_at", "2020-11-25 05:10:56.431186"], ["last_sign_in_at", "2020-11-25 05:10:43.828548"], ["updated_at", "2020-11-25 05:10:56.431675"], ["id", 1]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 267ms (Views: 0.3ms | ActiveRecord: 24.4ms | Allocations: 25804)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:10:56 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" DESC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 8], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 12], ["updated_at", "2020-11-25 05:10:56.619723"], ["id", 11]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (48.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 1], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:20:in `add_to_cart'
Completed 500 Internal Server Error in 186ms (ActiveRecord: 60.6ms | Allocations: 33053)



NoMethodError - undefined method `update' for nil:NilClass:
  app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'

  [1m[36mShoppingCartItem Load (0.7ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:11:54 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"eDXFN3GAg_d8l4L2l47GTg\\\":{\\\"token\\\":\\\"$2a$10$.ltCrRT.hrR0wgE9/drZZ.mYp2ARfSL7lERjE9U2eRf.2ZcvVYsIm\\\",\\\"expiry\\\":1669352023},\\\"gQelu72JPXdd3WhRM7sukw\\\":{\\\"token\\\":\\\"$2a$10$6rbjF49hGrlYNND2cqzzqujzVisNLTjIPYhfjyirKUKuiR7RviPRa\\\",\\\"expiry\\\":1669352953},\\\"d7nAsDakNjY5NZwPkb8DRQ\\\":{\\\"token\\\":\\\"$2a$10$dlNhxabuk/qH17ZaabufuuAho8Z7OZmv/T4HNFKUVNyYCe.IBr2Jm\\\",\\\"expiry\\\":1669353043},\\\"-xApuEOFx8gnPRqe5oEckg\\\":{\\\"token\\\":\\\"$2a$10$FiyjUkvVa5N0BsdsFkk7xuSVWBzc.32uuRnIfSRDs39KkocMtTwhy\\\",\\\"expiry\\\":1669353056},\\\"DqaUma6T2M5Jbi44v4LlHg\\\":{\\\"token\\\":\\\"$2a$10$ibNhNgrgJ7mGAtaMXntgQ.FoHEaq7K9.KDByvcMMyi4MsmpqSnGbK\\\",\\\"expiry\\\":1669353115}}\""], ["updated_at", "2020-11-25 05:11:55.213136"], ["id", 1]]
  [1m[35m (23.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 123], ["current_sign_in_at", "2020-11-25 05:11:55.239628"], ["last_sign_in_at", "2020-11-25 05:10:56.431186"], ["updated_at", "2020-11-25 05:11:55.240090"], ["id", 1]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 275ms (Views: 0.2ms | ActiveRecord: 33.1ms | Allocations: 25807)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:11:55 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" DESC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 8], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 15], ["updated_at", "2020-11-25 05:11:55.443371"], ["id", 11]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (41.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 8], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:20:in `add_to_cart'
Completed 500 Internal Server Error in 176ms (ActiveRecord: 53.4ms | Allocations: 32156)



ArgumentError - wrong number of arguments (given 2, expected 1):
  app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:12:53 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"gQelu72JPXdd3WhRM7sukw\\\":{\\\"token\\\":\\\"$2a$10$6rbjF49hGrlYNND2cqzzqujzVisNLTjIPYhfjyirKUKuiR7RviPRa\\\",\\\"expiry\\\":1669352953},\\\"d7nAsDakNjY5NZwPkb8DRQ\\\":{\\\"token\\\":\\\"$2a$10$dlNhxabuk/qH17ZaabufuuAho8Z7OZmv/T4HNFKUVNyYCe.IBr2Jm\\\",\\\"expiry\\\":1669353043},\\\"-xApuEOFx8gnPRqe5oEckg\\\":{\\\"token\\\":\\\"$2a$10$FiyjUkvVa5N0BsdsFkk7xuSVWBzc.32uuRnIfSRDs39KkocMtTwhy\\\",\\\"expiry\\\":1669353056},\\\"DqaUma6T2M5Jbi44v4LlHg\\\":{\\\"token\\\":\\\"$2a$10$ibNhNgrgJ7mGAtaMXntgQ.FoHEaq7K9.KDByvcMMyi4MsmpqSnGbK\\\",\\\"expiry\\\":1669353115},\\\"vTOKP1F-t4hXnlt0X6ojCA\\\":{\\\"token\\\":\\\"$2a$10$1SUMiACqZtatstfoFPW4BOv9oarTBB8evmvJ/dmXLly6s5Bvkv5fO\\\",\\\"expiry\\\":1669353174}}\""], ["updated_at", "2020-11-25 05:12:54.263542"], ["id", 1]]
  [1m[35m (23.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 124], ["current_sign_in_at", "2020-11-25 05:12:54.293010"], ["last_sign_in_at", "2020-11-25 05:11:55.239628"], ["updated_at", "2020-11-25 05:12:54.293732"], ["id", 1]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 301ms (Views: 0.3ms | ActiveRecord: 32.6ms | Allocations: 25802)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:12:54 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" DESC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 8], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 18], ["updated_at", "2020-11-25 05:12:54.521052"], ["id", 11]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (22.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 8], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:20:in `add_to_cart'
Completed 500 Internal Server Error in 185ms (ActiveRecord: 34.7ms | Allocations: 32155)



ArgumentError - wrong number of arguments (given 2, expected 1):
  app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:13:10 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"d7nAsDakNjY5NZwPkb8DRQ\\\":{\\\"token\\\":\\\"$2a$10$dlNhxabuk/qH17ZaabufuuAho8Z7OZmv/T4HNFKUVNyYCe.IBr2Jm\\\",\\\"expiry\\\":1669353043},\\\"-xApuEOFx8gnPRqe5oEckg\\\":{\\\"token\\\":\\\"$2a$10$FiyjUkvVa5N0BsdsFkk7xuSVWBzc.32uuRnIfSRDs39KkocMtTwhy\\\",\\\"expiry\\\":1669353056},\\\"DqaUma6T2M5Jbi44v4LlHg\\\":{\\\"token\\\":\\\"$2a$10$ibNhNgrgJ7mGAtaMXntgQ.FoHEaq7K9.KDByvcMMyi4MsmpqSnGbK\\\",\\\"expiry\\\":1669353115},\\\"vTOKP1F-t4hXnlt0X6ojCA\\\":{\\\"token\\\":\\\"$2a$10$1SUMiACqZtatstfoFPW4BOv9oarTBB8evmvJ/dmXLly6s5Bvkv5fO\\\",\\\"expiry\\\":1669353174},\\\"6mRR7PoCyxWjXTf3NHn3Gg\\\":{\\\"token\\\":\\\"$2a$10$vQdyJ1VAJpG5bI9YnK2NoeabYtAxNsHvrFfD6g6uuHxsIlXNmiJ5a\\\",\\\"expiry\\\":1669353191}}\""], ["updated_at", "2020-11-25 05:13:11.203078"], ["id", 1]]
  [1m[35m (170.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 125], ["current_sign_in_at", "2020-11-25 05:13:11.378482"], ["last_sign_in_at", "2020-11-25 05:12:54.293010"], ["updated_at", "2020-11-25 05:13:11.379145"], ["id", 1]]
  [1m[35m (69.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 493ms (Views: 0.6ms | ActiveRecord: 244.0ms | Allocations: 25802)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:13:11 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" DESC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:12:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:14:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 8], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 21], ["updated_at", "2020-11-25 05:13:11.629228"], ["id", 11]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (32.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.4ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 8], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:20:in `add_to_cart'
  [1m[36mShoppingCartItem Update (75.8ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "notes" = $1 WHERE "shopping_cart_items"."id" = $2[0m  [["notes", "Beli yang banyak 90"], ["id", 11]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `add_to_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 246ms (Views: 1.7ms | ActiveRecord: 120.4ms | Allocations: 34315)


  [1m[36mShoppingCartItem Load (0.6ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.6ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:13:26 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"-xApuEOFx8gnPRqe5oEckg\\\":{\\\"token\\\":\\\"$2a$10$FiyjUkvVa5N0BsdsFkk7xuSVWBzc.32uuRnIfSRDs39KkocMtTwhy\\\",\\\"expiry\\\":1669353056},\\\"DqaUma6T2M5Jbi44v4LlHg\\\":{\\\"token\\\":\\\"$2a$10$ibNhNgrgJ7mGAtaMXntgQ.FoHEaq7K9.KDByvcMMyi4MsmpqSnGbK\\\",\\\"expiry\\\":1669353115},\\\"vTOKP1F-t4hXnlt0X6ojCA\\\":{\\\"token\\\":\\\"$2a$10$1SUMiACqZtatstfoFPW4BOv9oarTBB8evmvJ/dmXLly6s5Bvkv5fO\\\",\\\"expiry\\\":1669353174},\\\"6mRR7PoCyxWjXTf3NHn3Gg\\\":{\\\"token\\\":\\\"$2a$10$vQdyJ1VAJpG5bI9YnK2NoeabYtAxNsHvrFfD6g6uuHxsIlXNmiJ5a\\\",\\\"expiry\\\":1669353191},\\\"kIzlZyX8Q31B1gcBvPD6ag\\\":{\\\"token\\\":\\\"$2a$10$poPC.V57jZsopgkbRwfs3eW4K2HJM72u5KnXDmSvwxM.4uGY420Pi\\\",\\\"expiry\\\":1669353206}}\""], ["updated_at", "2020-11-25 05:13:26.575187"], ["id", 1]]
  [1m[35m (383.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 126], ["current_sign_in_at", "2020-11-25 05:13:26.964337"], ["last_sign_in_at", "2020-11-25 05:13:11.378482"], ["updated_at", "2020-11-25 05:13:26.964999"], ["id", 1]]
  [1m[35m (46.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 655ms (Views: 0.2ms | ActiveRecord: 432.0ms | Allocations: 15019)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 12:13:27 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:36:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:36:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:36:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:36:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:36:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:36:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:36:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:36:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:36:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:36:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:36:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 258ms (Views: 0.2ms | ActiveRecord: 4.1ms | Allocations: 33994)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:36:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:36:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:36:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:18:59 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"DqaUma6T2M5Jbi44v4LlHg\\\":{\\\"token\\\":\\\"$2a$10$ibNhNgrgJ7mGAtaMXntgQ.FoHEaq7K9.KDByvcMMyi4MsmpqSnGbK\\\",\\\"expiry\\\":1669353115},\\\"vTOKP1F-t4hXnlt0X6ojCA\\\":{\\\"token\\\":\\\"$2a$10$1SUMiACqZtatstfoFPW4BOv9oarTBB8evmvJ/dmXLly6s5Bvkv5fO\\\",\\\"expiry\\\":1669353174},\\\"6mRR7PoCyxWjXTf3NHn3Gg\\\":{\\\"token\\\":\\\"$2a$10$vQdyJ1VAJpG5bI9YnK2NoeabYtAxNsHvrFfD6g6uuHxsIlXNmiJ5a\\\",\\\"expiry\\\":1669353191},\\\"kIzlZyX8Q31B1gcBvPD6ag\\\":{\\\"token\\\":\\\"$2a$10$poPC.V57jZsopgkbRwfs3eW4K2HJM72u5KnXDmSvwxM.4uGY420Pi\\\",\\\"expiry\\\":1669353206},\\\"xU8E1lMtmp8n62EpfaMsjw\\\":{\\\"token\\\":\\\"$2a$10$GqjmYPSXPnKdeG6DuoDAZecHD5qL5itKxpnsnZCCRZMZMaIhWa5Ki\\\",\\\"expiry\\\":1669353540}}\""], ["updated_at", "2020-11-25 05:19:00.027703"], ["id", 1]]
  [1m[35m (14.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 127], ["current_sign_in_at", "2020-11-25 05:19:00.045718"], ["last_sign_in_at", "2020-11-25 05:13:26.964337"], ["updated_at", "2020-11-25 05:19:00.046686"], ["id", 1]]
  [1m[35m (3.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.2ms | ActiveRecord: 22.7ms | Allocations: 25823)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:19:00 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>200, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" DESC LIMIT $3[0m  [["user_id", 1], ["store_id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:20:in `add_to_cart'
Completed 422 Unprocessable Entity in 123ms (ActiveRecord: 11.8ms | Allocations: 25525)



ActiveRecord::RecordNotSaved - You cannot call create unless the parent is saved:
  app/controllers/api/v1/carts_controller.rb:20:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:21:23 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"vTOKP1F-t4hXnlt0X6ojCA\\\":{\\\"token\\\":\\\"$2a$10$1SUMiACqZtatstfoFPW4BOv9oarTBB8evmvJ/dmXLly6s5Bvkv5fO\\\",\\\"expiry\\\":1669353174},\\\"6mRR7PoCyxWjXTf3NHn3Gg\\\":{\\\"token\\\":\\\"$2a$10$vQdyJ1VAJpG5bI9YnK2NoeabYtAxNsHvrFfD6g6uuHxsIlXNmiJ5a\\\",\\\"expiry\\\":1669353191},\\\"kIzlZyX8Q31B1gcBvPD6ag\\\":{\\\"token\\\":\\\"$2a$10$poPC.V57jZsopgkbRwfs3eW4K2HJM72u5KnXDmSvwxM.4uGY420Pi\\\",\\\"expiry\\\":1669353206},\\\"xU8E1lMtmp8n62EpfaMsjw\\\":{\\\"token\\\":\\\"$2a$10$GqjmYPSXPnKdeG6DuoDAZecHD5qL5itKxpnsnZCCRZMZMaIhWa5Ki\\\",\\\"expiry\\\":1669353540},\\\"oFlv3aDIk-V9iiwLyH9kig\\\":{\\\"token\\\":\\\"$2a$10$NRJad.wWVWHYmokk9GKszOSW7HK2YU83nYM8LZl52kHhgUDmiscFK\\\",\\\"expiry\\\":1669353683}}\""], ["updated_at", "2020-11-25 05:21:23.658386"], ["id", 1]]
  [1m[35m (14.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 128], ["current_sign_in_at", "2020-11-25 05:21:23.678202"], ["last_sign_in_at", "2020-11-25 05:19:00.045718"], ["updated_at", "2020-11-25 05:21:23.678656"], ["id", 1]]
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.2ms | ActiveRecord: 23.6ms | Allocations: 25804)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:21:23 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>200, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" DESC LIMIT $3[0m  [["user_id", 1], ["store_id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:20:in `add_to_cart'
Completed 422 Unprocessable Entity in 119ms (ActiveRecord: 11.5ms | Allocations: 25303)



ActiveRecord::RecordNotSaved - You cannot call create unless the parent is saved:
  app/controllers/api/v1/carts_controller.rb:20:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:21:49 +0700
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"6mRR7PoCyxWjXTf3NHn3Gg\\\":{\\\"token\\\":\\\"$2a$10$vQdyJ1VAJpG5bI9YnK2NoeabYtAxNsHvrFfD6g6uuHxsIlXNmiJ5a\\\",\\\"expiry\\\":1669353191},\\\"kIzlZyX8Q31B1gcBvPD6ag\\\":{\\\"token\\\":\\\"$2a$10$poPC.V57jZsopgkbRwfs3eW4K2HJM72u5KnXDmSvwxM.4uGY420Pi\\\",\\\"expiry\\\":1669353206},\\\"xU8E1lMtmp8n62EpfaMsjw\\\":{\\\"token\\\":\\\"$2a$10$GqjmYPSXPnKdeG6DuoDAZecHD5qL5itKxpnsnZCCRZMZMaIhWa5Ki\\\",\\\"expiry\\\":1669353540},\\\"oFlv3aDIk-V9iiwLyH9kig\\\":{\\\"token\\\":\\\"$2a$10$NRJad.wWVWHYmokk9GKszOSW7HK2YU83nYM8LZl52kHhgUDmiscFK\\\",\\\"expiry\\\":1669353683},\\\"V3X38idzLziMW3TnhNoM4g\\\":{\\\"token\\\":\\\"$2a$10$xKLUO3GryUsotR6cpyXJuef.f130fvbTI3.Idu4Rd5VWRhs4KdzYO\\\",\\\"expiry\\\":1669353709}}\""], ["updated_at", "2020-11-25 05:21:49.428987"], ["id", 1]]
  [1m[35m (49.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 129], ["current_sign_in_at", "2020-11-25 05:21:49.489530"], ["last_sign_in_at", "2020-11-25 05:21:23.678202"], ["updated_at", "2020-11-25 05:21:49.490955"], ["id", 1]]
  [1m[35m (47.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 398ms (Views: 1.2ms | ActiveRecord: 103.8ms | Allocations: 27481)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:21:49 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>200, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" DESC LIMIT $3[0m  [["user_id", 1], ["store_id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:20:in `add_to_cart'
Completed 422 Unprocessable Entity in 125ms (ActiveRecord: 14.7ms | Allocations: 26922)



ActiveRecord::RecordNotSaved - You cannot call create unless the parent is saved:
  app/controllers/api/v1/carts_controller.rb:20:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:22:02 +0700
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"kIzlZyX8Q31B1gcBvPD6ag\\\":{\\\"token\\\":\\\"$2a$10$poPC.V57jZsopgkbRwfs3eW4K2HJM72u5KnXDmSvwxM.4uGY420Pi\\\",\\\"expiry\\\":1669353206},\\\"xU8E1lMtmp8n62EpfaMsjw\\\":{\\\"token\\\":\\\"$2a$10$GqjmYPSXPnKdeG6DuoDAZecHD5qL5itKxpnsnZCCRZMZMaIhWa5Ki\\\",\\\"expiry\\\":1669353540},\\\"oFlv3aDIk-V9iiwLyH9kig\\\":{\\\"token\\\":\\\"$2a$10$NRJad.wWVWHYmokk9GKszOSW7HK2YU83nYM8LZl52kHhgUDmiscFK\\\",\\\"expiry\\\":1669353683},\\\"V3X38idzLziMW3TnhNoM4g\\\":{\\\"token\\\":\\\"$2a$10$xKLUO3GryUsotR6cpyXJuef.f130fvbTI3.Idu4Rd5VWRhs4KdzYO\\\",\\\"expiry\\\":1669353709},\\\"TOe6G8xX_e-EDWNs1NIW4Q\\\":{\\\"token\\\":\\\"$2a$10$3TIDWq0ICK9h/qeaQ.r7h.2SLa5es6X2k8xWEe/6oWBUU1NdNYp0e\\\",\\\"expiry\\\":1669353722}}\""], ["updated_at", "2020-11-25 05:22:02.510086"], ["id", 1]]
  [1m[35m (36.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 130], ["current_sign_in_at", "2020-11-25 05:22:02.563148"], ["last_sign_in_at", "2020-11-25 05:21:49.489530"], ["updated_at", "2020-11-25 05:22:02.563927"], ["id", 1]]
  [1m[35m (24.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 365ms (Views: 0.9ms | ActiveRecord: 67.6ms | Allocations: 27477)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:22:02 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>200, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" DESC LIMIT $3[0m  [["user_id", 1], ["store_id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:13:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/carts_controller.rb:17:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:20:in `add_to_cart'
Completed 422 Unprocessable Entity in 126ms (ActiveRecord: 14.0ms | Allocations: 26922)



ActiveRecord::RecordNotSaved - You cannot call create unless the parent is saved:
  app/controllers/api/v1/carts_controller.rb:20:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:22:41 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"xU8E1lMtmp8n62EpfaMsjw\\\":{\\\"token\\\":\\\"$2a$10$GqjmYPSXPnKdeG6DuoDAZecHD5qL5itKxpnsnZCCRZMZMaIhWa5Ki\\\",\\\"expiry\\\":1669353540},\\\"oFlv3aDIk-V9iiwLyH9kig\\\":{\\\"token\\\":\\\"$2a$10$NRJad.wWVWHYmokk9GKszOSW7HK2YU83nYM8LZl52kHhgUDmiscFK\\\",\\\"expiry\\\":1669353683},\\\"V3X38idzLziMW3TnhNoM4g\\\":{\\\"token\\\":\\\"$2a$10$xKLUO3GryUsotR6cpyXJuef.f130fvbTI3.Idu4Rd5VWRhs4KdzYO\\\",\\\"expiry\\\":1669353709},\\\"TOe6G8xX_e-EDWNs1NIW4Q\\\":{\\\"token\\\":\\\"$2a$10$3TIDWq0ICK9h/qeaQ.r7h.2SLa5es6X2k8xWEe/6oWBUU1NdNYp0e\\\",\\\"expiry\\\":1669353722},\\\"Pdf5IYl4dJUP9p1bxJJlVw\\\":{\\\"token\\\":\\\"$2a$10$jUhdReyBeebgsGpOQZJF1.QRdfKgrkPw/iEkRxeQcr1jmMGrD6gey\\\",\\\"expiry\\\":1669353761}}\""], ["updated_at", "2020-11-25 05:22:41.760638"], ["id", 1]]
  [1m[35m (36.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 131], ["current_sign_in_at", "2020-11-25 05:22:41.800629"], ["last_sign_in_at", "2020-11-25 05:22:02.563148"], ["updated_at", "2020-11-25 05:22:41.801073"], ["id", 1]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 284ms (Views: 0.2ms | ActiveRecord: 47.1ms | Allocations: 25789)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:22:41 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>200, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:11:in `add_to_cart'
Couldn't find Store with 'id'=200
Completed 404 Not Found in 80ms (Views: 0.2ms | ActiveRecord: 4.4ms | Allocations: 4534)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:23:47 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"oFlv3aDIk-V9iiwLyH9kig\\\":{\\\"token\\\":\\\"$2a$10$NRJad.wWVWHYmokk9GKszOSW7HK2YU83nYM8LZl52kHhgUDmiscFK\\\",\\\"expiry\\\":1669353683},\\\"V3X38idzLziMW3TnhNoM4g\\\":{\\\"token\\\":\\\"$2a$10$xKLUO3GryUsotR6cpyXJuef.f130fvbTI3.Idu4Rd5VWRhs4KdzYO\\\",\\\"expiry\\\":1669353709},\\\"TOe6G8xX_e-EDWNs1NIW4Q\\\":{\\\"token\\\":\\\"$2a$10$3TIDWq0ICK9h/qeaQ.r7h.2SLa5es6X2k8xWEe/6oWBUU1NdNYp0e\\\",\\\"expiry\\\":1669353722},\\\"Pdf5IYl4dJUP9p1bxJJlVw\\\":{\\\"token\\\":\\\"$2a$10$jUhdReyBeebgsGpOQZJF1.QRdfKgrkPw/iEkRxeQcr1jmMGrD6gey\\\",\\\"expiry\\\":1669353761},\\\"e1MevaNrjuKNOuhJnR9OPA\\\":{\\\"token\\\":\\\"$2a$10$qfwEPNarVoW7J5KJeTI/HupWFstqQHgZy9e2omODIvS.O0vw80wJW\\\",\\\"expiry\\\":1669353827}}\""], ["updated_at", "2020-11-25 05:23:47.448586"], ["id", 1]]
  [1m[35m (22.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 132], ["current_sign_in_at", "2020-11-25 05:23:47.476839"], ["last_sign_in_at", "2020-11-25 05:22:41.800629"], ["updated_at", "2020-11-25 05:23:47.477516"], ["id", 1]]
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.3ms | ActiveRecord: 32.0ms | Allocations: 25807)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:23:47 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>200, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 438ms (ActiveRecord: 2.2ms | Allocations: 183680)



NameError - undefined local variable or method `store_id' for #<Api::V1::CartsController:0x00007f06981afb08>
Did you mean?  store:
  app/controllers/api/v1/carts_controller.rb:9:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:24:05 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"V3X38idzLziMW3TnhNoM4g\\\":{\\\"token\\\":\\\"$2a$10$xKLUO3GryUsotR6cpyXJuef.f130fvbTI3.Idu4Rd5VWRhs4KdzYO\\\",\\\"expiry\\\":1669353709},\\\"TOe6G8xX_e-EDWNs1NIW4Q\\\":{\\\"token\\\":\\\"$2a$10$3TIDWq0ICK9h/qeaQ.r7h.2SLa5es6X2k8xWEe/6oWBUU1NdNYp0e\\\",\\\"expiry\\\":1669353722},\\\"Pdf5IYl4dJUP9p1bxJJlVw\\\":{\\\"token\\\":\\\"$2a$10$jUhdReyBeebgsGpOQZJF1.QRdfKgrkPw/iEkRxeQcr1jmMGrD6gey\\\",\\\"expiry\\\":1669353761},\\\"e1MevaNrjuKNOuhJnR9OPA\\\":{\\\"token\\\":\\\"$2a$10$qfwEPNarVoW7J5KJeTI/HupWFstqQHgZy9e2omODIvS.O0vw80wJW\\\",\\\"expiry\\\":1669353827},\\\"qfs5vcB34VxL_7UEDbZ-yQ\\\":{\\\"token\\\":\\\"$2a$10$WTJSQ9xos3OegmE7v3vse.F7jL7q1FZE2gElrVtrk/tQNSWyDt8o.\\\",\\\"expiry\\\":1669353845}}\""], ["updated_at", "2020-11-25 05:24:05.675985"], ["id", 1]]
  [1m[35m (32.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 133], ["current_sign_in_at", "2020-11-25 05:24:05.715731"], ["last_sign_in_at", "2020-11-25 05:23:47.476839"], ["updated_at", "2020-11-25 05:24:05.716306"], ["id", 1]]
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 0.3ms | ActiveRecord: 47.4ms | Allocations: 25839)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:24:05 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>200, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:9:in `add_to_cart'
Couldn't find Store with 'id'=200
Completed 404 Not Found in 82ms (Views: 0.3ms | ActiveRecord: 3.8ms | Allocations: 4524)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:24:15 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"TOe6G8xX_e-EDWNs1NIW4Q\\\":{\\\"token\\\":\\\"$2a$10$3TIDWq0ICK9h/qeaQ.r7h.2SLa5es6X2k8xWEe/6oWBUU1NdNYp0e\\\",\\\"expiry\\\":1669353722},\\\"Pdf5IYl4dJUP9p1bxJJlVw\\\":{\\\"token\\\":\\\"$2a$10$jUhdReyBeebgsGpOQZJF1.QRdfKgrkPw/iEkRxeQcr1jmMGrD6gey\\\",\\\"expiry\\\":1669353761},\\\"e1MevaNrjuKNOuhJnR9OPA\\\":{\\\"token\\\":\\\"$2a$10$qfwEPNarVoW7J5KJeTI/HupWFstqQHgZy9e2omODIvS.O0vw80wJW\\\",\\\"expiry\\\":1669353827},\\\"qfs5vcB34VxL_7UEDbZ-yQ\\\":{\\\"token\\\":\\\"$2a$10$WTJSQ9xos3OegmE7v3vse.F7jL7q1FZE2gElrVtrk/tQNSWyDt8o.\\\",\\\"expiry\\\":1669353845},\\\"lIVh0MBF9ZalbMHeojfKXA\\\":{\\\"token\\\":\\\"$2a$10$3WlBS8QSPatn0YlqmQNU2ONNBjxNkm49oVwQHJRIML/px06Utqehu\\\",\\\"expiry\\\":1669353855}}\""], ["updated_at", "2020-11-25 05:24:15.686908"], ["id", 1]]
  [1m[35m (52.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 134], ["current_sign_in_at", "2020-11-25 05:24:15.743944"], ["last_sign_in_at", "2020-11-25 05:24:05.715731"], ["updated_at", "2020-11-25 05:24:15.744752"], ["id", 1]]
  [1m[35m (69.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 358ms (Views: 0.3ms | ActiveRecord: 123.5ms | Allocations: 15019)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:24:15 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>200, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:9:in `add_to_cart'
Couldn't find Store with 'id'=200
Completed 404 Not Found in 79ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 2820)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:24:36 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Pdf5IYl4dJUP9p1bxJJlVw\\\":{\\\"token\\\":\\\"$2a$10$jUhdReyBeebgsGpOQZJF1.QRdfKgrkPw/iEkRxeQcr1jmMGrD6gey\\\",\\\"expiry\\\":1669353761},\\\"e1MevaNrjuKNOuhJnR9OPA\\\":{\\\"token\\\":\\\"$2a$10$qfwEPNarVoW7J5KJeTI/HupWFstqQHgZy9e2omODIvS.O0vw80wJW\\\",\\\"expiry\\\":1669353827},\\\"qfs5vcB34VxL_7UEDbZ-yQ\\\":{\\\"token\\\":\\\"$2a$10$WTJSQ9xos3OegmE7v3vse.F7jL7q1FZE2gElrVtrk/tQNSWyDt8o.\\\",\\\"expiry\\\":1669353845},\\\"lIVh0MBF9ZalbMHeojfKXA\\\":{\\\"token\\\":\\\"$2a$10$3WlBS8QSPatn0YlqmQNU2ONNBjxNkm49oVwQHJRIML/px06Utqehu\\\",\\\"expiry\\\":1669353855},\\\"6bflPM6ZTMGYdcJCZJtu7A\\\":{\\\"token\\\":\\\"$2a$10$ExXvpw5CN9zwM/ASHzvoVup0ySpchDB8utEcU8W4.hoPGN7YLya4K\\\",\\\"expiry\\\":1669353877}}\""], ["updated_at", "2020-11-25 05:24:37.181069"], ["id", 1]]
  [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 135], ["current_sign_in_at", "2020-11-25 05:24:37.199648"], ["last_sign_in_at", "2020-11-25 05:24:15.743944"], ["updated_at", "2020-11-25 05:24:37.200247"], ["id", 1]]
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.2ms | ActiveRecord: 30.8ms | Allocations: 25804)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:24:37 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>200, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:9:in `add_to_cart'
Couldn't find Store with 'id'=200
Completed 404 Not Found in 94ms (Views: 0.2ms | ActiveRecord: 3.7ms | Allocations: 4522)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:29:05 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"e1MevaNrjuKNOuhJnR9OPA\\\":{\\\"token\\\":\\\"$2a$10$qfwEPNarVoW7J5KJeTI/HupWFstqQHgZy9e2omODIvS.O0vw80wJW\\\",\\\"expiry\\\":1669353827},\\\"qfs5vcB34VxL_7UEDbZ-yQ\\\":{\\\"token\\\":\\\"$2a$10$WTJSQ9xos3OegmE7v3vse.F7jL7q1FZE2gElrVtrk/tQNSWyDt8o.\\\",\\\"expiry\\\":1669353845},\\\"lIVh0MBF9ZalbMHeojfKXA\\\":{\\\"token\\\":\\\"$2a$10$3WlBS8QSPatn0YlqmQNU2ONNBjxNkm49oVwQHJRIML/px06Utqehu\\\",\\\"expiry\\\":1669353855},\\\"6bflPM6ZTMGYdcJCZJtu7A\\\":{\\\"token\\\":\\\"$2a$10$ExXvpw5CN9zwM/ASHzvoVup0ySpchDB8utEcU8W4.hoPGN7YLya4K\\\",\\\"expiry\\\":1669353877},\\\"cK0jutLvjTzW_uckpa-eAg\\\":{\\\"token\\\":\\\"$2a$10$LzKyumvoOPVWehzXChAqi.jl6K2bUAH79LeDy0hmMEzd1oVDiLFem\\\",\\\"expiry\\\":1669354146}}\""], ["updated_at", "2020-11-25 05:29:06.129354"], ["id", 1]]
  [1m[35m (24.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 136], ["current_sign_in_at", "2020-11-25 05:29:06.158983"], ["last_sign_in_at", "2020-11-25 05:24:37.199648"], ["updated_at", "2020-11-25 05:29:06.159745"], ["id", 1]]
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.2ms | ActiveRecord: 33.8ms | Allocations: 25791)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:29:06 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Couldn't find Store without an ID
Completed 404 Not Found in 81ms (Views: 0.2ms | ActiveRecord: 4.5ms | Allocations: 3907)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:29:09 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"qfs5vcB34VxL_7UEDbZ-yQ\\\":{\\\"token\\\":\\\"$2a$10$WTJSQ9xos3OegmE7v3vse.F7jL7q1FZE2gElrVtrk/tQNSWyDt8o.\\\",\\\"expiry\\\":1669353845},\\\"lIVh0MBF9ZalbMHeojfKXA\\\":{\\\"token\\\":\\\"$2a$10$3WlBS8QSPatn0YlqmQNU2ONNBjxNkm49oVwQHJRIML/px06Utqehu\\\",\\\"expiry\\\":1669353855},\\\"6bflPM6ZTMGYdcJCZJtu7A\\\":{\\\"token\\\":\\\"$2a$10$ExXvpw5CN9zwM/ASHzvoVup0ySpchDB8utEcU8W4.hoPGN7YLya4K\\\",\\\"expiry\\\":1669353877},\\\"cK0jutLvjTzW_uckpa-eAg\\\":{\\\"token\\\":\\\"$2a$10$LzKyumvoOPVWehzXChAqi.jl6K2bUAH79LeDy0hmMEzd1oVDiLFem\\\",\\\"expiry\\\":1669354146},\\\"_3ZSqE42FgoR0gu_aTQzcg\\\":{\\\"token\\\":\\\"$2a$10$1GVbWGk0A.uSjUDM5hQnOuFT/eAM4gJjPxZWqIxSH3c9YimrQYYOi\\\",\\\"expiry\\\":1669354149}}\""], ["updated_at", "2020-11-25 05:29:09.963240"], ["id", 1]]
  [1m[35m (48.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 137], ["current_sign_in_at", "2020-11-25 05:29:10.016556"], ["last_sign_in_at", "2020-11-25 05:29:06.158983"], ["updated_at", "2020-11-25 05:29:10.017340"], ["id", 1]]
  [1m[35m (55.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 354ms (Views: 0.4ms | ActiveRecord: 107.1ms | Allocations: 15039)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:29:10 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>200, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:9:in `add_to_cart'
Couldn't find Store with 'id'=200
Completed 404 Not Found in 76ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 2934)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:45:25 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"lIVh0MBF9ZalbMHeojfKXA\\\":{\\\"token\\\":\\\"$2a$10$3WlBS8QSPatn0YlqmQNU2ONNBjxNkm49oVwQHJRIML/px06Utqehu\\\",\\\"expiry\\\":1669353855},\\\"6bflPM6ZTMGYdcJCZJtu7A\\\":{\\\"token\\\":\\\"$2a$10$ExXvpw5CN9zwM/ASHzvoVup0ySpchDB8utEcU8W4.hoPGN7YLya4K\\\",\\\"expiry\\\":1669353877},\\\"cK0jutLvjTzW_uckpa-eAg\\\":{\\\"token\\\":\\\"$2a$10$LzKyumvoOPVWehzXChAqi.jl6K2bUAH79LeDy0hmMEzd1oVDiLFem\\\",\\\"expiry\\\":1669354146},\\\"_3ZSqE42FgoR0gu_aTQzcg\\\":{\\\"token\\\":\\\"$2a$10$1GVbWGk0A.uSjUDM5hQnOuFT/eAM4gJjPxZWqIxSH3c9YimrQYYOi\\\",\\\"expiry\\\":1669354149},\\\"5--J7wrpJUlPRoBkWv8gqw\\\":{\\\"token\\\":\\\"$2a$10$cz/.elBtSRKu/WH5nIIRfenHHiDEDNChFmXa2nhuxJm8UNr9O2M62\\\",\\\"expiry\\\":1669355125}}\""], ["updated_at", "2020-11-25 05:45:25.550999"], ["id", 1]]
  [1m[35m (23.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 138], ["current_sign_in_at", "2020-11-25 05:45:25.578116"], ["last_sign_in_at", "2020-11-25 05:29:10.016556"], ["updated_at", "2020-11-25 05:45:25.578580"], ["id", 1]]
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.3ms | ActiveRecord: 30.7ms | Allocations: 25519)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:45:25 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "store_id"=>200, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 330ms (ActiveRecord: 0.2ms | Allocations: 196290)



NameError - undefined local variable or method `cart_params' for #<Api::V1::CartsController:0x00007f06a8669be8>
Did you mean?  cart_item:
  app/controllers/api/v1/carts_controller.rb:7:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:49:09 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"6bflPM6ZTMGYdcJCZJtu7A\\\":{\\\"token\\\":\\\"$2a$10$ExXvpw5CN9zwM/ASHzvoVup0ySpchDB8utEcU8W4.hoPGN7YLya4K\\\",\\\"expiry\\\":1669353877},\\\"cK0jutLvjTzW_uckpa-eAg\\\":{\\\"token\\\":\\\"$2a$10$LzKyumvoOPVWehzXChAqi.jl6K2bUAH79LeDy0hmMEzd1oVDiLFem\\\",\\\"expiry\\\":1669354146},\\\"_3ZSqE42FgoR0gu_aTQzcg\\\":{\\\"token\\\":\\\"$2a$10$1GVbWGk0A.uSjUDM5hQnOuFT/eAM4gJjPxZWqIxSH3c9YimrQYYOi\\\",\\\"expiry\\\":1669354149},\\\"5--J7wrpJUlPRoBkWv8gqw\\\":{\\\"token\\\":\\\"$2a$10$cz/.elBtSRKu/WH5nIIRfenHHiDEDNChFmXa2nhuxJm8UNr9O2M62\\\",\\\"expiry\\\":1669355125},\\\"Vwfg_p4Jvg-HCNSUQWh_pg\\\":{\\\"token\\\":\\\"$2a$10$Q35hZoxupNy2D67YQqr.yum/lqmQYnDjCxN1u6teXn7ONGXiTcihC\\\",\\\"expiry\\\":1669355350}}\""], ["updated_at", "2020-11-25 05:49:10.056129"], ["id", 1]]
  [1m[35m (23.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 139], ["current_sign_in_at", "2020-11-25 05:49:10.084219"], ["last_sign_in_at", "2020-11-25 05:45:25.578116"], ["updated_at", "2020-11-25 05:49:10.084624"], ["id", 1]]
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 274ms (Views: 0.2ms | ActiveRecord: 34.6ms | Allocations: 25841)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:49:10 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 330ms (ActiveRecord: 2.2ms | Allocations: 195784)



NameError - undefined local variable or method `cart_params' for #<Api::V1::CartsController:0x0000000007b845f0>
Did you mean?  cart_item:
  app/controllers/api/v1/carts_controller.rb:7:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:49:17 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"cK0jutLvjTzW_uckpa-eAg\\\":{\\\"token\\\":\\\"$2a$10$LzKyumvoOPVWehzXChAqi.jl6K2bUAH79LeDy0hmMEzd1oVDiLFem\\\",\\\"expiry\\\":1669354146},\\\"_3ZSqE42FgoR0gu_aTQzcg\\\":{\\\"token\\\":\\\"$2a$10$1GVbWGk0A.uSjUDM5hQnOuFT/eAM4gJjPxZWqIxSH3c9YimrQYYOi\\\",\\\"expiry\\\":1669354149},\\\"5--J7wrpJUlPRoBkWv8gqw\\\":{\\\"token\\\":\\\"$2a$10$cz/.elBtSRKu/WH5nIIRfenHHiDEDNChFmXa2nhuxJm8UNr9O2M62\\\",\\\"expiry\\\":1669355125},\\\"Vwfg_p4Jvg-HCNSUQWh_pg\\\":{\\\"token\\\":\\\"$2a$10$Q35hZoxupNy2D67YQqr.yum/lqmQYnDjCxN1u6teXn7ONGXiTcihC\\\",\\\"expiry\\\":1669355350},\\\"VQi2mYWfJ60KzhQ4AX2gZw\\\":{\\\"token\\\":\\\"$2a$10$dEspSy3jb9/AVawStuu0guLim8ZF0UuGRhXdWqIT/rVwaKvgqEsBm\\\",\\\"expiry\\\":1669355358}}\""], ["updated_at", "2020-11-25 05:49:18.084066"], ["id", 1]]
  [1m[35m (157.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 140], ["current_sign_in_at", "2020-11-25 05:49:18.245839"], ["last_sign_in_at", "2020-11-25 05:49:10.084219"], ["updated_at", "2020-11-25 05:49:18.246615"], ["id", 1]]
  [1m[35m (30.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 428ms (Views: 0.2ms | ActiveRecord: 192.8ms | Allocations: 25818)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:49:18 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:9:in `add_to_cart'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'
Completed 422 Unprocessable Entity in 124ms (ActiveRecord: 15.8ms | Allocations: 27731)



ActiveRecord::RecordNotSaved - You cannot call create unless the parent is saved:
  app/controllers/api/v1/carts_controller.rb:22:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:49:54 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"_3ZSqE42FgoR0gu_aTQzcg\\\":{\\\"token\\\":\\\"$2a$10$1GVbWGk0A.uSjUDM5hQnOuFT/eAM4gJjPxZWqIxSH3c9YimrQYYOi\\\",\\\"expiry\\\":1669354149},\\\"5--J7wrpJUlPRoBkWv8gqw\\\":{\\\"token\\\":\\\"$2a$10$cz/.elBtSRKu/WH5nIIRfenHHiDEDNChFmXa2nhuxJm8UNr9O2M62\\\",\\\"expiry\\\":1669355125},\\\"Vwfg_p4Jvg-HCNSUQWh_pg\\\":{\\\"token\\\":\\\"$2a$10$Q35hZoxupNy2D67YQqr.yum/lqmQYnDjCxN1u6teXn7ONGXiTcihC\\\",\\\"expiry\\\":1669355350},\\\"VQi2mYWfJ60KzhQ4AX2gZw\\\":{\\\"token\\\":\\\"$2a$10$dEspSy3jb9/AVawStuu0guLim8ZF0UuGRhXdWqIT/rVwaKvgqEsBm\\\",\\\"expiry\\\":1669355358},\\\"JIpAUsEKBUy2Z8dzXiIdOw\\\":{\\\"token\\\":\\\"$2a$10$923hcuoSxnCItSmBVh3OHe1KJQbMm.kOZpUBqb7fhuWAC8Qv0m5hK\\\",\\\"expiry\\\":1669355395}}\""], ["updated_at", "2020-11-25 05:49:55.283717"], ["id", 1]]
  [1m[35m (26.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 141], ["current_sign_in_at", "2020-11-25 05:49:55.314123"], ["last_sign_in_at", "2020-11-25 05:49:18.245839"], ["updated_at", "2020-11-25 05:49:55.314813"], ["id", 1]]
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 281ms (Views: 0.2ms | ActiveRecord: 35.7ms | Allocations: 25788)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:49:55 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:9:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `add_to_cart'
Completed 422 Unprocessable Entity in 128ms (ActiveRecord: 14.0ms | Allocations: 27481)



ActiveRecord::RecordNotSaved - You cannot call create unless the parent is saved:
  app/controllers/api/v1/carts_controller.rb:24:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:50:50 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"5--J7wrpJUlPRoBkWv8gqw\\\":{\\\"token\\\":\\\"$2a$10$cz/.elBtSRKu/WH5nIIRfenHHiDEDNChFmXa2nhuxJm8UNr9O2M62\\\",\\\"expiry\\\":1669355125},\\\"Vwfg_p4Jvg-HCNSUQWh_pg\\\":{\\\"token\\\":\\\"$2a$10$Q35hZoxupNy2D67YQqr.yum/lqmQYnDjCxN1u6teXn7ONGXiTcihC\\\",\\\"expiry\\\":1669355350},\\\"VQi2mYWfJ60KzhQ4AX2gZw\\\":{\\\"token\\\":\\\"$2a$10$dEspSy3jb9/AVawStuu0guLim8ZF0UuGRhXdWqIT/rVwaKvgqEsBm\\\",\\\"expiry\\\":1669355358},\\\"JIpAUsEKBUy2Z8dzXiIdOw\\\":{\\\"token\\\":\\\"$2a$10$923hcuoSxnCItSmBVh3OHe1KJQbMm.kOZpUBqb7fhuWAC8Qv0m5hK\\\",\\\"expiry\\\":1669355395},\\\"Q0_VQrctb4SRh4qUwSdu2A\\\":{\\\"token\\\":\\\"$2a$10$0eOVTCK2vuHvvfBK3R6/8eKU04vzD2pbReP.0c/odeoY4hOXQnftO\\\",\\\"expiry\\\":1669355450}}\""], ["updated_at", "2020-11-25 05:50:50.756282"], ["id", 1]]
  [1m[35m (23.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 142], ["current_sign_in_at", "2020-11-25 05:50:50.783893"], ["last_sign_in_at", "2020-11-25 05:49:55.314123"], ["updated_at", "2020-11-25 05:50:50.784523"], ["id", 1]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 271ms (Views: 0.3ms | ActiveRecord: 30.0ms | Allocations: 25787)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 12:50:50 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"product"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}, "cart"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:9:in `add_to_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:15:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mCart Create (33.8ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 5], ["created_at", "2020-11-25 05:50:50.958589"], ["updated_at", "2020-11-25 05:50:50.958589"]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[35m (20.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `add_to_cart'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 9], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `add_to_cart'
  [1m[36mShoppingCartItem Create (24.8ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 9], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 42], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-25 05:50:51.047753"], ["updated_at", "2020-11-25 05:50:51.047753"]]
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `add_to_cart'
  [1m[35m (40.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 9], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:26:in `add_to_cart'
  [1m[36mShoppingCartItem Update (63.8ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "notes" = $1 WHERE "shopping_cart_items"."id" = $2[0m  [["notes", "Beli yang banyak 90"], ["id", 12]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `add_to_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.3ms | ActiveRecord: 197.2ms | Allocations: 43729)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:50:58 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Vwfg_p4Jvg-HCNSUQWh_pg\\\":{\\\"token\\\":\\\"$2a$10$Q35hZoxupNy2D67YQqr.yum/lqmQYnDjCxN1u6teXn7ONGXiTcihC\\\",\\\"expiry\\\":1669355350},\\\"VQi2mYWfJ60KzhQ4AX2gZw\\\":{\\\"token\\\":\\\"$2a$10$dEspSy3jb9/AVawStuu0guLim8ZF0UuGRhXdWqIT/rVwaKvgqEsBm\\\",\\\"expiry\\\":1669355358},\\\"JIpAUsEKBUy2Z8dzXiIdOw\\\":{\\\"token\\\":\\\"$2a$10$923hcuoSxnCItSmBVh3OHe1KJQbMm.kOZpUBqb7fhuWAC8Qv0m5hK\\\",\\\"expiry\\\":1669355395},\\\"Q0_VQrctb4SRh4qUwSdu2A\\\":{\\\"token\\\":\\\"$2a$10$0eOVTCK2vuHvvfBK3R6/8eKU04vzD2pbReP.0c/odeoY4hOXQnftO\\\",\\\"expiry\\\":1669355450},\\\"QT1ARUz99DkOpyIb0HmS7A\\\":{\\\"token\\\":\\\"$2a$10$BQVdUp.iibWDq7ld.ThBrOW/JpCfDo2Vztv1L53DxxnRcW70rrzyC\\\",\\\"expiry\\\":1669355458}}\""], ["updated_at", "2020-11-25 05:50:58.334336"], ["id", 1]]
  [1m[35m (11.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 143], ["current_sign_in_at", "2020-11-25 05:50:58.349645"], ["last_sign_in_at", "2020-11-25 05:50:50.783893"], ["updated_at", "2020-11-25 05:50:58.350099"], ["id", 1]]
  [1m[35m (72.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.3ms | ActiveRecord: 86.1ms | Allocations: 15018)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 12:50:58 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[36mStore Load (0.6ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 8], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 9], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 9], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:47:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 129ms (Views: 0.2ms | ActiveRecord: 4.2ms | Allocations: 30239)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:47:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:47:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  ShoppingCartItem => [:product_variant]
  Add to your query: .includes([:product_variant])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:47:in `index'


  [1m[36mProductVariant Load (0.5ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" ORDER BY "product_variants"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductVariant Load (0.4ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" ORDER BY "product_variants"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:57:31 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"VQi2mYWfJ60KzhQ4AX2gZw\\\":{\\\"token\\\":\\\"$2a$10$dEspSy3jb9/AVawStuu0guLim8ZF0UuGRhXdWqIT/rVwaKvgqEsBm\\\",\\\"expiry\\\":1669355358},\\\"JIpAUsEKBUy2Z8dzXiIdOw\\\":{\\\"token\\\":\\\"$2a$10$923hcuoSxnCItSmBVh3OHe1KJQbMm.kOZpUBqb7fhuWAC8Qv0m5hK\\\",\\\"expiry\\\":1669355395},\\\"Q0_VQrctb4SRh4qUwSdu2A\\\":{\\\"token\\\":\\\"$2a$10$0eOVTCK2vuHvvfBK3R6/8eKU04vzD2pbReP.0c/odeoY4hOXQnftO\\\",\\\"expiry\\\":1669355450},\\\"QT1ARUz99DkOpyIb0HmS7A\\\":{\\\"token\\\":\\\"$2a$10$BQVdUp.iibWDq7ld.ThBrOW/JpCfDo2Vztv1L53DxxnRcW70rrzyC\\\",\\\"expiry\\\":1669355458},\\\"jhKAYobSmw-LuqHubPzzOQ\\\":{\\\"token\\\":\\\"$2a$10$zIsWLH7KjMt9qfvq1vRXX.bSwurHKGIECnAmO30ZZUcrNYzZ.o95u\\\",\\\"expiry\\\":1669355852}}\""], ["updated_at", "2020-11-25 05:57:32.162794"], ["id", 1]]
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 144], ["current_sign_in_at", "2020-11-25 05:57:32.180921"], ["last_sign_in_at", "2020-11-25 05:50:58.349645"], ["updated_at", "2020-11-25 05:57:32.181358"], ["id", 1]]
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.2ms | ActiveRecord: 20.2ms | Allocations: 25517)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 12:57:32 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 190ms (ActiveRecord: 0.3ms | Allocations: 93895)



NoMethodError - undefined method `find_chart' for #<Api::V1::CartsController:0x00007f06a017cb88>:

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:58:00 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"JIpAUsEKBUy2Z8dzXiIdOw\\\":{\\\"token\\\":\\\"$2a$10$923hcuoSxnCItSmBVh3OHe1KJQbMm.kOZpUBqb7fhuWAC8Qv0m5hK\\\",\\\"expiry\\\":1669355395},\\\"Q0_VQrctb4SRh4qUwSdu2A\\\":{\\\"token\\\":\\\"$2a$10$0eOVTCK2vuHvvfBK3R6/8eKU04vzD2pbReP.0c/odeoY4hOXQnftO\\\",\\\"expiry\\\":1669355450},\\\"QT1ARUz99DkOpyIb0HmS7A\\\":{\\\"token\\\":\\\"$2a$10$BQVdUp.iibWDq7ld.ThBrOW/JpCfDo2Vztv1L53DxxnRcW70rrzyC\\\",\\\"expiry\\\":1669355458},\\\"jhKAYobSmw-LuqHubPzzOQ\\\":{\\\"token\\\":\\\"$2a$10$zIsWLH7KjMt9qfvq1vRXX.bSwurHKGIECnAmO30ZZUcrNYzZ.o95u\\\",\\\"expiry\\\":1669355852},\\\"4PWQpmJGtIvtaEC7s4AjpA\\\":{\\\"token\\\":\\\"$2a$10$91aq7//owQvqID0TNRcv/OJQv99O1N507nZjyJ/oJggm3r8QF2cKq\\\",\\\"expiry\\\":1669355881}}\""], ["updated_at", "2020-11-25 05:58:01.341773"], ["id", 1]]
  [1m[35m (20.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 145], ["current_sign_in_at", "2020-11-25 05:58:01.371004"], ["last_sign_in_at", "2020-11-25 05:57:32.180921"], ["updated_at", "2020-11-25 05:58:01.372612"], ["id", 1]]
  [1m[35m (31.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 329ms (Views: 0.9ms | ActiveRecord: 57.5ms | Allocations: 25825)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 12:58:01 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 213ms (ActiveRecord: 1.5ms | Allocations: 100815)



NoMethodError - undefined method `find_cart' for #<Api::V1::CartsController:0x00007f06a012ccf0>:

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:58:20 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Q0_VQrctb4SRh4qUwSdu2A\\\":{\\\"token\\\":\\\"$2a$10$0eOVTCK2vuHvvfBK3R6/8eKU04vzD2pbReP.0c/odeoY4hOXQnftO\\\",\\\"expiry\\\":1669355450},\\\"QT1ARUz99DkOpyIb0HmS7A\\\":{\\\"token\\\":\\\"$2a$10$BQVdUp.iibWDq7ld.ThBrOW/JpCfDo2Vztv1L53DxxnRcW70rrzyC\\\",\\\"expiry\\\":1669355458},\\\"jhKAYobSmw-LuqHubPzzOQ\\\":{\\\"token\\\":\\\"$2a$10$zIsWLH7KjMt9qfvq1vRXX.bSwurHKGIECnAmO30ZZUcrNYzZ.o95u\\\",\\\"expiry\\\":1669355852},\\\"4PWQpmJGtIvtaEC7s4AjpA\\\":{\\\"token\\\":\\\"$2a$10$91aq7//owQvqID0TNRcv/OJQv99O1N507nZjyJ/oJggm3r8QF2cKq\\\",\\\"expiry\\\":1669355881},\\\"HftN5Ak6qdwnEf1nU5L6QQ\\\":{\\\"token\\\":\\\"$2a$10$CdVoolAIWPqvSeEsvlPTiefTdA5P09fbkNDQqcOKV0WNkG9Tfl0Fe\\\",\\\"expiry\\\":1669355900}}\""], ["updated_at", "2020-11-25 05:58:20.574517"], ["id", 1]]
  [1m[35m (15.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 146], ["current_sign_in_at", "2020-11-25 05:58:20.595464"], ["last_sign_in_at", "2020-11-25 05:58:01.371004"], ["updated_at", "2020-11-25 05:58:20.596036"], ["id", 1]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 266ms (Views: 0.3ms | ActiveRecord: 25.8ms | Allocations: 25802)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 12:58:20 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 211ms (ActiveRecord: 1.9ms | Allocations: 100825)



NoMethodError - undefined method `find_cart' for #<Api::V1::CartsController:0x000000000750e018>:

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:59:21 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"QT1ARUz99DkOpyIb0HmS7A\\\":{\\\"token\\\":\\\"$2a$10$BQVdUp.iibWDq7ld.ThBrOW/JpCfDo2Vztv1L53DxxnRcW70rrzyC\\\",\\\"expiry\\\":1669355458},\\\"jhKAYobSmw-LuqHubPzzOQ\\\":{\\\"token\\\":\\\"$2a$10$zIsWLH7KjMt9qfvq1vRXX.bSwurHKGIECnAmO30ZZUcrNYzZ.o95u\\\",\\\"expiry\\\":1669355852},\\\"4PWQpmJGtIvtaEC7s4AjpA\\\":{\\\"token\\\":\\\"$2a$10$91aq7//owQvqID0TNRcv/OJQv99O1N507nZjyJ/oJggm3r8QF2cKq\\\",\\\"expiry\\\":1669355881},\\\"HftN5Ak6qdwnEf1nU5L6QQ\\\":{\\\"token\\\":\\\"$2a$10$CdVoolAIWPqvSeEsvlPTiefTdA5P09fbkNDQqcOKV0WNkG9Tfl0Fe\\\",\\\"expiry\\\":1669355900},\\\"WgZG7SXLDHaSHZTw65sCag\\\":{\\\"token\\\":\\\"$2a$10$J6PAsneOiNz4kVg2a7hYQObjhwvljXXvESYGSb2Yp2fvDVe5TU0Ga\\\",\\\"expiry\\\":1669355961}}\""], ["updated_at", "2020-11-25 05:59:21.487016"], ["id", 1]]
  [1m[35m (520.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 147], ["current_sign_in_at", "2020-11-25 05:59:22.011051"], ["last_sign_in_at", "2020-11-25 05:58:20.595464"], ["updated_at", "2020-11-25 05:59:22.011627"], ["id", 1]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 763ms (Views: 0.2ms | ActiveRecord: 528.5ms | Allocations: 25803)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 12:59:22 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 213ms (ActiveRecord: 1.3ms | Allocations: 100813)



NoMethodError - undefined method `find_cart' for #<Api::V1::CartsController:0x00000000079faf90>:

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 12:59:47 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"jhKAYobSmw-LuqHubPzzOQ\\\":{\\\"token\\\":\\\"$2a$10$zIsWLH7KjMt9qfvq1vRXX.bSwurHKGIECnAmO30ZZUcrNYzZ.o95u\\\",\\\"expiry\\\":1669355852},\\\"4PWQpmJGtIvtaEC7s4AjpA\\\":{\\\"token\\\":\\\"$2a$10$91aq7//owQvqID0TNRcv/OJQv99O1N507nZjyJ/oJggm3r8QF2cKq\\\",\\\"expiry\\\":1669355881},\\\"HftN5Ak6qdwnEf1nU5L6QQ\\\":{\\\"token\\\":\\\"$2a$10$CdVoolAIWPqvSeEsvlPTiefTdA5P09fbkNDQqcOKV0WNkG9Tfl0Fe\\\",\\\"expiry\\\":1669355900},\\\"WgZG7SXLDHaSHZTw65sCag\\\":{\\\"token\\\":\\\"$2a$10$J6PAsneOiNz4kVg2a7hYQObjhwvljXXvESYGSb2Yp2fvDVe5TU0Ga\\\",\\\"expiry\\\":1669355961},\\\"L0-iRIXQ8U0lVGWZbtS3og\\\":{\\\"token\\\":\\\"$2a$10$rlFR4OZJwVOm2ZEo73bd2O2MdEPb4/Ch6obMiXMc527A0hKket6w.\\\",\\\"expiry\\\":1669355987}}\""], ["updated_at", "2020-11-25 05:59:47.839009"], ["id", 1]]
  [1m[35m (61.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 148], ["current_sign_in_at", "2020-11-25 05:59:47.905582"], ["last_sign_in_at", "2020-11-25 05:59:22.011051"], ["updated_at", "2020-11-25 05:59:47.906029"], ["id", 1]]
  [1m[35m (37.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 341ms (Views: 0.2ms | ActiveRecord: 102.8ms | Allocations: 25803)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 12:59:47 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 196ms (ActiveRecord: 1.3ms | Allocations: 100811)



NoMethodError - undefined method `find_cart' for #<Api::V1::CartsController:0x00000000076e18b8>:

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:00:11 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"4PWQpmJGtIvtaEC7s4AjpA\\\":{\\\"token\\\":\\\"$2a$10$91aq7//owQvqID0TNRcv/OJQv99O1N507nZjyJ/oJggm3r8QF2cKq\\\",\\\"expiry\\\":1669355881},\\\"HftN5Ak6qdwnEf1nU5L6QQ\\\":{\\\"token\\\":\\\"$2a$10$CdVoolAIWPqvSeEsvlPTiefTdA5P09fbkNDQqcOKV0WNkG9Tfl0Fe\\\",\\\"expiry\\\":1669355900},\\\"WgZG7SXLDHaSHZTw65sCag\\\":{\\\"token\\\":\\\"$2a$10$J6PAsneOiNz4kVg2a7hYQObjhwvljXXvESYGSb2Yp2fvDVe5TU0Ga\\\",\\\"expiry\\\":1669355961},\\\"L0-iRIXQ8U0lVGWZbtS3og\\\":{\\\"token\\\":\\\"$2a$10$rlFR4OZJwVOm2ZEo73bd2O2MdEPb4/Ch6obMiXMc527A0hKket6w.\\\",\\\"expiry\\\":1669355987},\\\"oZC3MN90AsOQxQm6FVfu3Q\\\":{\\\"token\\\":\\\"$2a$10$fVS1KynF3.fxp2DBTQUVF.LcYfIY.Dqk0zI.wsYR/ybwGhwlnvqs2\\\",\\\"expiry\\\":1669356012}}\""], ["updated_at", "2020-11-25 06:00:12.135630"], ["id", 1]]
  [1m[35m (44.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 149], ["current_sign_in_at", "2020-11-25 06:00:12.184247"], ["last_sign_in_at", "2020-11-25 05:59:47.905582"], ["updated_at", "2020-11-25 06:00:12.184976"], ["id", 1]]
  [1m[35m (60.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.3ms | ActiveRecord: 106.6ms | Allocations: 15020)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 13:00:12 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 214ms (ActiveRecord: 0.3ms | Allocations: 100619)



NoMethodError - undefined method `find_cart' for #<Api::V1::CartsController:0x00007f06989acbd0>:

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:00:42 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"HftN5Ak6qdwnEf1nU5L6QQ\\\":{\\\"token\\\":\\\"$2a$10$CdVoolAIWPqvSeEsvlPTiefTdA5P09fbkNDQqcOKV0WNkG9Tfl0Fe\\\",\\\"expiry\\\":1669355900},\\\"WgZG7SXLDHaSHZTw65sCag\\\":{\\\"token\\\":\\\"$2a$10$J6PAsneOiNz4kVg2a7hYQObjhwvljXXvESYGSb2Yp2fvDVe5TU0Ga\\\",\\\"expiry\\\":1669355961},\\\"L0-iRIXQ8U0lVGWZbtS3og\\\":{\\\"token\\\":\\\"$2a$10$rlFR4OZJwVOm2ZEo73bd2O2MdEPb4/Ch6obMiXMc527A0hKket6w.\\\",\\\"expiry\\\":1669355987},\\\"oZC3MN90AsOQxQm6FVfu3Q\\\":{\\\"token\\\":\\\"$2a$10$fVS1KynF3.fxp2DBTQUVF.LcYfIY.Dqk0zI.wsYR/ybwGhwlnvqs2\\\",\\\"expiry\\\":1669356012},\\\"Zz4WtA55NsF46AtO2uTj7A\\\":{\\\"token\\\":\\\"$2a$10$cCxwUkv4EmdJWoXlpeKaLOSie.Y6R.AFkoSlpjeycbO.txxhpQK3K\\\",\\\"expiry\\\":1669356042}}\""], ["updated_at", "2020-11-25 06:00:42.488043"], ["id", 1]]
  [1m[35m (26.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 150], ["current_sign_in_at", "2020-11-25 06:00:42.518884"], ["last_sign_in_at", "2020-11-25 06:00:12.184247"], ["updated_at", "2020-11-25 06:00:42.519482"], ["id", 1]]
  [1m[35m (12.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.2ms | ActiveRecord: 43.5ms | Allocations: 25802)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 13:00:42 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Couldn't find Store without an ID
Completed 404 Not Found in 80ms (Views: 0.2ms | ActiveRecord: 4.8ms | Allocations: 3948)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:04:43 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"WgZG7SXLDHaSHZTw65sCag\\\":{\\\"token\\\":\\\"$2a$10$J6PAsneOiNz4kVg2a7hYQObjhwvljXXvESYGSb2Yp2fvDVe5TU0Ga\\\",\\\"expiry\\\":1669355961},\\\"L0-iRIXQ8U0lVGWZbtS3og\\\":{\\\"token\\\":\\\"$2a$10$rlFR4OZJwVOm2ZEo73bd2O2MdEPb4/Ch6obMiXMc527A0hKket6w.\\\",\\\"expiry\\\":1669355987},\\\"oZC3MN90AsOQxQm6FVfu3Q\\\":{\\\"token\\\":\\\"$2a$10$fVS1KynF3.fxp2DBTQUVF.LcYfIY.Dqk0zI.wsYR/ybwGhwlnvqs2\\\",\\\"expiry\\\":1669356012},\\\"Zz4WtA55NsF46AtO2uTj7A\\\":{\\\"token\\\":\\\"$2a$10$cCxwUkv4EmdJWoXlpeKaLOSie.Y6R.AFkoSlpjeycbO.txxhpQK3K\\\",\\\"expiry\\\":1669356042},\\\"fVhFaLAD4ziGBReqjVKbCQ\\\":{\\\"token\\\":\\\"$2a$10$ejFQFZQNQeJHCqUBI6eOj.Ok4jE3ADjc08alUum8V.pt/4H2IDxzy\\\",\\\"expiry\\\":1669356283}}\""], ["updated_at", "2020-11-25 06:04:43.881097"], ["id", 1]]
  [1m[35m (47.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 151], ["current_sign_in_at", "2020-11-25 06:04:43.932595"], ["last_sign_in_at", "2020-11-25 06:00:42.518884"], ["updated_at", "2020-11-25 06:04:43.933068"], ["id", 1]]
  [1m[35m (15.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.3ms | ActiveRecord: 64.5ms | Allocations: 15020)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 13:04:43 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Couldn't find Store without an ID
Completed 404 Not Found in 76ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 2325)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:06:18 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"L0-iRIXQ8U0lVGWZbtS3og\\\":{\\\"token\\\":\\\"$2a$10$rlFR4OZJwVOm2ZEo73bd2O2MdEPb4/Ch6obMiXMc527A0hKket6w.\\\",\\\"expiry\\\":1669355987},\\\"oZC3MN90AsOQxQm6FVfu3Q\\\":{\\\"token\\\":\\\"$2a$10$fVS1KynF3.fxp2DBTQUVF.LcYfIY.Dqk0zI.wsYR/ybwGhwlnvqs2\\\",\\\"expiry\\\":1669356012},\\\"Zz4WtA55NsF46AtO2uTj7A\\\":{\\\"token\\\":\\\"$2a$10$cCxwUkv4EmdJWoXlpeKaLOSie.Y6R.AFkoSlpjeycbO.txxhpQK3K\\\",\\\"expiry\\\":1669356042},\\\"fVhFaLAD4ziGBReqjVKbCQ\\\":{\\\"token\\\":\\\"$2a$10$ejFQFZQNQeJHCqUBI6eOj.Ok4jE3ADjc08alUum8V.pt/4H2IDxzy\\\",\\\"expiry\\\":1669356283},\\\"z9P6FKeZ8VBkATpNBgW18g\\\":{\\\"token\\\":\\\"$2a$10$.HO2aFSjBof2NYS0BxHRbeKbMduQsf4V1M1C0zLxSAChlhgmMQaWS\\\",\\\"expiry\\\":1669356379}}\""], ["updated_at", "2020-11-25 06:06:19.155403"], ["id", 1]]
  [1m[35m (36.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 152], ["current_sign_in_at", "2020-11-25 06:06:19.196143"], ["last_sign_in_at", "2020-11-25 06:04:43.932595"], ["updated_at", "2020-11-25 06:06:19.196703"], ["id", 1]]
  [1m[35m (58.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 346ms (Views: 6.2ms | ActiveRecord: 99.4ms | Allocations: 25800)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 13:06:19 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `remove_carts'
  [1m[36mShoppingCartItem Destroy (14.6ms)[0m  [1m[31mDELETE FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 7], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `remove_carts'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 103ms (Views: 0.2ms | ActiveRecord: 19.9ms | Allocations: 9721)


  [1m[35m (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Destroy (24.6ms)[0m  [1m[31mDELETE FROM "carts"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:06:49 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"oZC3MN90AsOQxQm6FVfu3Q\\\":{\\\"token\\\":\\\"$2a$10$fVS1KynF3.fxp2DBTQUVF.LcYfIY.Dqk0zI.wsYR/ybwGhwlnvqs2\\\",\\\"expiry\\\":1669356012},\\\"Zz4WtA55NsF46AtO2uTj7A\\\":{\\\"token\\\":\\\"$2a$10$cCxwUkv4EmdJWoXlpeKaLOSie.Y6R.AFkoSlpjeycbO.txxhpQK3K\\\",\\\"expiry\\\":1669356042},\\\"fVhFaLAD4ziGBReqjVKbCQ\\\":{\\\"token\\\":\\\"$2a$10$ejFQFZQNQeJHCqUBI6eOj.Ok4jE3ADjc08alUum8V.pt/4H2IDxzy\\\",\\\"expiry\\\":1669356283},\\\"z9P6FKeZ8VBkATpNBgW18g\\\":{\\\"token\\\":\\\"$2a$10$.HO2aFSjBof2NYS0BxHRbeKbMduQsf4V1M1C0zLxSAChlhgmMQaWS\\\",\\\"expiry\\\":1669356379},\\\"oq_NzX-APRz8MYnLyXjBbw\\\":{\\\"token\\\":\\\"$2a$10$nrWldTB3XQoXvou.2LVdm.C6fCBK19xx/J5ZlXdNd.1ELKMfJEqZS\\\",\\\"expiry\\\":1669356409}}\""], ["updated_at", "2020-11-25 06:06:49.748778"], ["id", 1]]
  [1m[35m (27.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 153], ["current_sign_in_at", "2020-11-25 06:06:49.780119"], ["last_sign_in_at", "2020-11-25 06:06:19.196143"], ["updated_at", "2020-11-25 06:06:49.780532"], ["id", 1]]
  [1m[35m (48.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.3ms | ActiveRecord: 77.2ms | Allocations: 15018)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 13:06:49 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 5], ["created_at", "2020-11-25 06:06:49.969852"], ["updated_at", "2020-11-25 06:06:49.969852"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (27.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
Completed 500 Internal Server Error in 417ms (ActiveRecord: 39.5ms | Allocations: 222297)



NameError - undefined local variable or method `quantity' for #<Api::V1::CartsController:0x00007f06985604c8>
Did you mean?  @quantity:
  app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:07:14 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Zz4WtA55NsF46AtO2uTj7A\\\":{\\\"token\\\":\\\"$2a$10$cCxwUkv4EmdJWoXlpeKaLOSie.Y6R.AFkoSlpjeycbO.txxhpQK3K\\\",\\\"expiry\\\":1669356042},\\\"fVhFaLAD4ziGBReqjVKbCQ\\\":{\\\"token\\\":\\\"$2a$10$ejFQFZQNQeJHCqUBI6eOj.Ok4jE3ADjc08alUum8V.pt/4H2IDxzy\\\",\\\"expiry\\\":1669356283},\\\"z9P6FKeZ8VBkATpNBgW18g\\\":{\\\"token\\\":\\\"$2a$10$.HO2aFSjBof2NYS0BxHRbeKbMduQsf4V1M1C0zLxSAChlhgmMQaWS\\\",\\\"expiry\\\":1669356379},\\\"oq_NzX-APRz8MYnLyXjBbw\\\":{\\\"token\\\":\\\"$2a$10$nrWldTB3XQoXvou.2LVdm.C6fCBK19xx/J5ZlXdNd.1ELKMfJEqZS\\\",\\\"expiry\\\":1669356409},\\\"9iN6mszpFCXTRyc8FNQXIw\\\":{\\\"token\\\":\\\"$2a$10$L9ilpYUe4BdRQ6WewxAusuf2bEwDijUjBptQfQR50Lrem/mtBYh6m\\\",\\\"expiry\\\":1669356434}}\""], ["updated_at", "2020-11-25 06:07:14.667655"], ["id", 1]]
  [1m[35m (19.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 154], ["current_sign_in_at", "2020-11-25 06:07:14.697835"], ["last_sign_in_at", "2020-11-25 06:06:49.780119"], ["updated_at", "2020-11-25 06:07:14.698294"], ["id", 1]]
  [1m[35m (10.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 320ms (Views: 0.2ms | ActiveRecord: 34.7ms | Allocations: 25804)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 13:07:14 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 5], ["created_at", "2020-11-25 06:07:14.903433"], ["updated_at", "2020-11-25 06:07:14.903433"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (22.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 11], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.4ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 11], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 42], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-25 06:07:14.963625"], ["updated_at", "2020-11-25 06:07:14.963625"]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (29.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 11], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mShoppingCartItem Update (7.7ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "notes" = $1 WHERE "shopping_cart_items"."id" = $2[0m  [["notes", "Beli yang banyak 90"], ["id", 13]]
  ↳ app/controllers/api/v1/carts_controller.rb:11:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 230ms (Views: 0.2ms | ActiveRecord: 75.4ms | Allocations: 43621)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:07:19 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"fVhFaLAD4ziGBReqjVKbCQ\\\":{\\\"token\\\":\\\"$2a$10$ejFQFZQNQeJHCqUBI6eOj.Ok4jE3ADjc08alUum8V.pt/4H2IDxzy\\\",\\\"expiry\\\":1669356283},\\\"z9P6FKeZ8VBkATpNBgW18g\\\":{\\\"token\\\":\\\"$2a$10$.HO2aFSjBof2NYS0BxHRbeKbMduQsf4V1M1C0zLxSAChlhgmMQaWS\\\",\\\"expiry\\\":1669356379},\\\"oq_NzX-APRz8MYnLyXjBbw\\\":{\\\"token\\\":\\\"$2a$10$nrWldTB3XQoXvou.2LVdm.C6fCBK19xx/J5ZlXdNd.1ELKMfJEqZS\\\",\\\"expiry\\\":1669356409},\\\"9iN6mszpFCXTRyc8FNQXIw\\\":{\\\"token\\\":\\\"$2a$10$L9ilpYUe4BdRQ6WewxAusuf2bEwDijUjBptQfQR50Lrem/mtBYh6m\\\",\\\"expiry\\\":1669356434},\\\"K5vthLY24NKOGzM5ELqvpg\\\":{\\\"token\\\":\\\"$2a$10$Vc2HkWShxL/VZApd/8EgduEM2nUWbUZRhUOkwJcmPLCrWuIAXL.8K\\\",\\\"expiry\\\":1669356439}}\""], ["updated_at", "2020-11-25 06:07:19.641161"], ["id", 1]]
  [1m[35m (92.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 155], ["current_sign_in_at", "2020-11-25 06:07:19.737621"], ["last_sign_in_at", "2020-11-25 06:07:14.697835"], ["updated_at", "2020-11-25 06:07:19.738070"], ["id", 1]]
  [1m[35m (49.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 370ms (Views: 0.2ms | ActiveRecord: 143.8ms | Allocations: 15018)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:07:19 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 78ms (ActiveRecord: 0.4ms | Allocations: 2729)



NoMethodError - undefined method `[]' for nil:NilClass:
  app/controllers/api/v1/api_controller.rb:40:in `find_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:07:48 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"z9P6FKeZ8VBkATpNBgW18g\\\":{\\\"token\\\":\\\"$2a$10$.HO2aFSjBof2NYS0BxHRbeKbMduQsf4V1M1C0zLxSAChlhgmMQaWS\\\",\\\"expiry\\\":1669356379},\\\"oq_NzX-APRz8MYnLyXjBbw\\\":{\\\"token\\\":\\\"$2a$10$nrWldTB3XQoXvou.2LVdm.C6fCBK19xx/J5ZlXdNd.1ELKMfJEqZS\\\",\\\"expiry\\\":1669356409},\\\"9iN6mszpFCXTRyc8FNQXIw\\\":{\\\"token\\\":\\\"$2a$10$L9ilpYUe4BdRQ6WewxAusuf2bEwDijUjBptQfQR50Lrem/mtBYh6m\\\",\\\"expiry\\\":1669356434},\\\"K5vthLY24NKOGzM5ELqvpg\\\":{\\\"token\\\":\\\"$2a$10$Vc2HkWShxL/VZApd/8EgduEM2nUWbUZRhUOkwJcmPLCrWuIAXL.8K\\\",\\\"expiry\\\":1669356439},\\\"BPIYEDVsOjJICGQzy0E6GA\\\":{\\\"token\\\":\\\"$2a$10$BffKUj44ujzeHP3QUxPXXOchF2F6bOv/hQdYeAciZ5ZvrT6LvSxnO\\\",\\\"expiry\\\":1669356469}}\""], ["updated_at", "2020-11-25 06:07:49.019282"], ["id", 1]]
  [1m[35m (43.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 156], ["current_sign_in_at", "2020-11-25 06:07:49.065989"], ["last_sign_in_at", "2020-11-25 06:07:19.737621"], ["updated_at", "2020-11-25 06:07:49.066518"], ["id", 1]]
  [1m[35m (70.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 348ms (Views: 0.3ms | ActiveRecord: 115.1ms | Allocations: 15019)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:07:49 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 75ms (ActiveRecord: 0.2ms | Allocations: 2728)



NoMethodError - undefined method `[]' for nil:NilClass:
  app/controllers/api/v1/api_controller.rb:40:in `find_cart'

  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 10], ["owner_type", "Cart"]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:08:54 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"oq_NzX-APRz8MYnLyXjBbw\\\":{\\\"token\\\":\\\"$2a$10$nrWldTB3XQoXvou.2LVdm.C6fCBK19xx/J5ZlXdNd.1ELKMfJEqZS\\\",\\\"expiry\\\":1669356409},\\\"9iN6mszpFCXTRyc8FNQXIw\\\":{\\\"token\\\":\\\"$2a$10$L9ilpYUe4BdRQ6WewxAusuf2bEwDijUjBptQfQR50Lrem/mtBYh6m\\\",\\\"expiry\\\":1669356434},\\\"K5vthLY24NKOGzM5ELqvpg\\\":{\\\"token\\\":\\\"$2a$10$Vc2HkWShxL/VZApd/8EgduEM2nUWbUZRhUOkwJcmPLCrWuIAXL.8K\\\",\\\"expiry\\\":1669356439},\\\"BPIYEDVsOjJICGQzy0E6GA\\\":{\\\"token\\\":\\\"$2a$10$BffKUj44ujzeHP3QUxPXXOchF2F6bOv/hQdYeAciZ5ZvrT6LvSxnO\\\",\\\"expiry\\\":1669356469},\\\"mb6hV_pWmaGpbzTfgm0arg\\\":{\\\"token\\\":\\\"$2a$10$fUXm5kRkDjwq4R4hY5AvSejxK0mhAPQgf1skx8JQFqUxFmyynk3ha\\\",\\\"expiry\\\":1669356534}}\""], ["updated_at", "2020-11-25 06:08:54.271085"], ["id", 1]]
  [1m[35m (56.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 157], ["current_sign_in_at", "2020-11-25 06:08:54.331362"], ["last_sign_in_at", "2020-11-25 06:07:49.065989"], ["updated_at", "2020-11-25 06:08:54.331812"], ["id", 1]]
  [1m[35m (26.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 307ms (Views: 0.3ms | ActiveRecord: 84.5ms | Allocations: 15018)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 13:08:54 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 5], ["created_at", "2020-11-25 06:08:54.494768"], ["updated_at", "2020-11-25 06:08:54.494768"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (20.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 12], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.3ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 12], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 42], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-25 06:08:54.530036"], ["updated_at", "2020-11-25 06:08:54.530036"]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 12], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mShoppingCartItem Update (87.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "notes" = $1 WHERE "shopping_cart_items"."id" = $2[0m  [["notes", "Beli yang banyak 90"], ["id", 14]]
  ↳ app/controllers/api/v1/carts_controller.rb:11:in `add_to_cart'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 227ms (Views: 0.2ms | ActiveRecord: 118.7ms | Allocations: 17475)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:09:06 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"9iN6mszpFCXTRyc8FNQXIw\\\":{\\\"token\\\":\\\"$2a$10$L9ilpYUe4BdRQ6WewxAusuf2bEwDijUjBptQfQR50Lrem/mtBYh6m\\\",\\\"expiry\\\":1669356434},\\\"K5vthLY24NKOGzM5ELqvpg\\\":{\\\"token\\\":\\\"$2a$10$Vc2HkWShxL/VZApd/8EgduEM2nUWbUZRhUOkwJcmPLCrWuIAXL.8K\\\",\\\"expiry\\\":1669356439},\\\"BPIYEDVsOjJICGQzy0E6GA\\\":{\\\"token\\\":\\\"$2a$10$BffKUj44ujzeHP3QUxPXXOchF2F6bOv/hQdYeAciZ5ZvrT6LvSxnO\\\",\\\"expiry\\\":1669356469},\\\"mb6hV_pWmaGpbzTfgm0arg\\\":{\\\"token\\\":\\\"$2a$10$fUXm5kRkDjwq4R4hY5AvSejxK0mhAPQgf1skx8JQFqUxFmyynk3ha\\\",\\\"expiry\\\":1669356534},\\\"D3aXPD_hAIbQHxXlQcU0kg\\\":{\\\"token\\\":\\\"$2a$10$MdXBqiLvd2nATtV4Je2X9Oi0vXvb8QebNJ.azBKQzSFUKedf49ssi\\\",\\\"expiry\\\":1669356546}}\""], ["updated_at", "2020-11-25 06:09:06.924228"], ["id", 1]]
  [1m[35m (27.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 158], ["current_sign_in_at", "2020-11-25 06:09:06.956169"], ["last_sign_in_at", "2020-11-25 06:08:54.331362"], ["updated_at", "2020-11-25 06:09:06.956697"], ["id", 1]]
  [1m[35m (60.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 339ms (Views: 0.3ms | ActiveRecord: 89.5ms | Allocations: 15020)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:09:07 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 74ms (ActiveRecord: 0.4ms | Allocations: 2729)



NoMethodError - undefined method `[]' for nil:NilClass:
  app/controllers/api/v1/api_controller.rb:40:in `find_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:09:28 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"K5vthLY24NKOGzM5ELqvpg\\\":{\\\"token\\\":\\\"$2a$10$Vc2HkWShxL/VZApd/8EgduEM2nUWbUZRhUOkwJcmPLCrWuIAXL.8K\\\",\\\"expiry\\\":1669356439},\\\"BPIYEDVsOjJICGQzy0E6GA\\\":{\\\"token\\\":\\\"$2a$10$BffKUj44ujzeHP3QUxPXXOchF2F6bOv/hQdYeAciZ5ZvrT6LvSxnO\\\",\\\"expiry\\\":1669356469},\\\"mb6hV_pWmaGpbzTfgm0arg\\\":{\\\"token\\\":\\\"$2a$10$fUXm5kRkDjwq4R4hY5AvSejxK0mhAPQgf1skx8JQFqUxFmyynk3ha\\\",\\\"expiry\\\":1669356534},\\\"D3aXPD_hAIbQHxXlQcU0kg\\\":{\\\"token\\\":\\\"$2a$10$MdXBqiLvd2nATtV4Je2X9Oi0vXvb8QebNJ.azBKQzSFUKedf49ssi\\\",\\\"expiry\\\":1669356546},\\\"8r-QQ1ER-JTWoACNRjWBnA\\\":{\\\"token\\\":\\\"$2a$10$T7XLtA5FX4iMriLeUwD7O.sqcMhaOM3P6qo/5uFkh/7MBSs1Cn/Au\\\",\\\"expiry\\\":1669356569}}\""], ["updated_at", "2020-11-25 06:09:29.174812"], ["id", 1]]
  [1m[35m (41.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 159], ["current_sign_in_at", "2020-11-25 06:09:29.222118"], ["last_sign_in_at", "2020-11-25 06:09:06.956169"], ["updated_at", "2020-11-25 06:09:29.222741"], ["id", 1]]
  [1m[35m (72.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 373ms (Views: 0.3ms | ActiveRecord: 119.7ms | Allocations: 25803)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:09:29 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:33:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 10], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:33:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:33:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 10], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:33:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 11], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:33:in `index'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:33:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 11], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:33:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:33:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 12], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:33:in `index'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:33:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 12], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:33:in `index'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:33:in `index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 139ms (Views: 0.1ms | ActiveRecord: 11.1ms | Allocations: 41530)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:33:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:33:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:09:43 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"BPIYEDVsOjJICGQzy0E6GA\\\":{\\\"token\\\":\\\"$2a$10$BffKUj44ujzeHP3QUxPXXOchF2F6bOv/hQdYeAciZ5ZvrT6LvSxnO\\\",\\\"expiry\\\":1669356469},\\\"mb6hV_pWmaGpbzTfgm0arg\\\":{\\\"token\\\":\\\"$2a$10$fUXm5kRkDjwq4R4hY5AvSejxK0mhAPQgf1skx8JQFqUxFmyynk3ha\\\",\\\"expiry\\\":1669356534},\\\"D3aXPD_hAIbQHxXlQcU0kg\\\":{\\\"token\\\":\\\"$2a$10$MdXBqiLvd2nATtV4Je2X9Oi0vXvb8QebNJ.azBKQzSFUKedf49ssi\\\",\\\"expiry\\\":1669356546},\\\"8r-QQ1ER-JTWoACNRjWBnA\\\":{\\\"token\\\":\\\"$2a$10$T7XLtA5FX4iMriLeUwD7O.sqcMhaOM3P6qo/5uFkh/7MBSs1Cn/Au\\\",\\\"expiry\\\":1669356569},\\\"4QynvPN1NijJw51aXx_W_Q\\\":{\\\"token\\\":\\\"$2a$10$HCOjwoBPrNTPnUw7CMLCfOEpnVDOB2FhA90K1qxfhK16j4HDDQtW6\\\",\\\"expiry\\\":1669356583}}\""], ["updated_at", "2020-11-25 06:09:43.861156"], ["id", 1]]
  [1m[35m (55.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 160], ["current_sign_in_at", "2020-11-25 06:09:43.920806"], ["last_sign_in_at", "2020-11-25 06:09:29.222118"], ["updated_at", "2020-11-25 06:09:43.921336"], ["id", 1]]
  [1m[35m (83.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 363ms (Views: 0.3ms | ActiveRecord: 140.7ms | Allocations: 15018)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 13:09:44 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 ORDER BY "carts"."id" ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `remove_carts'
  [1m[36mShoppingCartItem Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 10], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `remove_carts'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 84ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 4877)


  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mShoppingCartItem Load (0.5ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "shopping_cart_items"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:11:43 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"mb6hV_pWmaGpbzTfgm0arg\\\":{\\\"token\\\":\\\"$2a$10$fUXm5kRkDjwq4R4hY5AvSejxK0mhAPQgf1skx8JQFqUxFmyynk3ha\\\",\\\"expiry\\\":1669356534},\\\"D3aXPD_hAIbQHxXlQcU0kg\\\":{\\\"token\\\":\\\"$2a$10$MdXBqiLvd2nATtV4Je2X9Oi0vXvb8QebNJ.azBKQzSFUKedf49ssi\\\",\\\"expiry\\\":1669356546},\\\"8r-QQ1ER-JTWoACNRjWBnA\\\":{\\\"token\\\":\\\"$2a$10$T7XLtA5FX4iMriLeUwD7O.sqcMhaOM3P6qo/5uFkh/7MBSs1Cn/Au\\\",\\\"expiry\\\":1669356569},\\\"4QynvPN1NijJw51aXx_W_Q\\\":{\\\"token\\\":\\\"$2a$10$HCOjwoBPrNTPnUw7CMLCfOEpnVDOB2FhA90K1qxfhK16j4HDDQtW6\\\",\\\"expiry\\\":1669356583},\\\"nxcM5CRQpICzjL7bDhU86g\\\":{\\\"token\\\":\\\"$2a$10$sjn4Y984uAVGXCgg3/OHe.beYdUffOy/8WMx.mgaM77VPaIr7d58W\\\",\\\"expiry\\\":1669356704}}\""], ["updated_at", "2020-11-25 06:11:44.165143"], ["id", 1]]
  [1m[35m (31.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 161], ["current_sign_in_at", "2020-11-25 06:11:44.200722"], ["last_sign_in_at", "2020-11-25 06:09:43.920806"], ["updated_at", "2020-11-25 06:11:44.201417"], ["id", 1]]
  [1m[35m (11.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 295ms (Views: 0.3ms | ActiveRecord: 46.8ms | Allocations: 25802)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 13:11:44 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts"."id" FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `remove_carts'
  [1m[36mShoppingCartItem Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 10], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `block in remove_carts'
  [1m[36mShoppingCartItem Destroy (10.1ms)[0m  [1m[31mDELETE FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 11], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `block in remove_carts'
  [1m[36mShoppingCartItem Destroy (54.2ms)[0m  [1m[31mDELETE FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 12], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `block in remove_carts'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 159ms (Views: 0.2ms | ActiveRecord: 71.2ms | Allocations: 11065)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:12:14 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"D3aXPD_hAIbQHxXlQcU0kg\\\":{\\\"token\\\":\\\"$2a$10$MdXBqiLvd2nATtV4Je2X9Oi0vXvb8QebNJ.azBKQzSFUKedf49ssi\\\",\\\"expiry\\\":1669356546},\\\"8r-QQ1ER-JTWoACNRjWBnA\\\":{\\\"token\\\":\\\"$2a$10$T7XLtA5FX4iMriLeUwD7O.sqcMhaOM3P6qo/5uFkh/7MBSs1Cn/Au\\\",\\\"expiry\\\":1669356569},\\\"4QynvPN1NijJw51aXx_W_Q\\\":{\\\"token\\\":\\\"$2a$10$HCOjwoBPrNTPnUw7CMLCfOEpnVDOB2FhA90K1qxfhK16j4HDDQtW6\\\",\\\"expiry\\\":1669356583},\\\"nxcM5CRQpICzjL7bDhU86g\\\":{\\\"token\\\":\\\"$2a$10$sjn4Y984uAVGXCgg3/OHe.beYdUffOy/8WMx.mgaM77VPaIr7d58W\\\",\\\"expiry\\\":1669356704},\\\"nnjzmuy93YSdQNYbBC_4PQ\\\":{\\\"token\\\":\\\"$2a$10$NWEElNVQcg4biI1PeGmhpufb.bZTTteCRiUl/yT6Dhx5z8YrLuXQa\\\",\\\"expiry\\\":1669356734}}\""], ["updated_at", "2020-11-25 06:12:14.810749"], ["id", 1]]
  [1m[35m (15.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 162], ["current_sign_in_at", "2020-11-25 06:12:14.830314"], ["last_sign_in_at", "2020-11-25 06:11:44.200722"], ["updated_at", "2020-11-25 06:12:14.830774"], ["id", 1]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 276ms (Views: 0.2ms | ActiveRecord: 27.7ms | Allocations: 25785)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 13:12:14 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts"."id" FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `remove_carts'
  [1m[36mShoppingCartItem Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 10], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `block in remove_carts'
  [1m[36mShoppingCartItem Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 11], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `block in remove_carts'
  [1m[36mShoppingCartItem Destroy (0.2ms)[0m  [1m[31mDELETE FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 12], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:24:in `block in remove_carts'
  [1m[36mCart Destroy (14.7ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:26:in `remove_carts'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 104ms (Views: 0.2ms | ActiveRecord: 20.3ms | Allocations: 11481)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:13:59 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"8r-QQ1ER-JTWoACNRjWBnA\\\":{\\\"token\\\":\\\"$2a$10$T7XLtA5FX4iMriLeUwD7O.sqcMhaOM3P6qo/5uFkh/7MBSs1Cn/Au\\\",\\\"expiry\\\":1669356569},\\\"4QynvPN1NijJw51aXx_W_Q\\\":{\\\"token\\\":\\\"$2a$10$HCOjwoBPrNTPnUw7CMLCfOEpnVDOB2FhA90K1qxfhK16j4HDDQtW6\\\",\\\"expiry\\\":1669356583},\\\"nxcM5CRQpICzjL7bDhU86g\\\":{\\\"token\\\":\\\"$2a$10$sjn4Y984uAVGXCgg3/OHe.beYdUffOy/8WMx.mgaM77VPaIr7d58W\\\",\\\"expiry\\\":1669356704},\\\"nnjzmuy93YSdQNYbBC_4PQ\\\":{\\\"token\\\":\\\"$2a$10$NWEElNVQcg4biI1PeGmhpufb.bZTTteCRiUl/yT6Dhx5z8YrLuXQa\\\",\\\"expiry\\\":1669356734},\\\"EaLOFIqOzUcVZISMWGgN0A\\\":{\\\"token\\\":\\\"$2a$10$0yRw4TLls9/iXSwxKjDI/eWdvz.OEmukzMakMHCOLzVePb1IjJkGS\\\",\\\"expiry\\\":1669356839}}\""], ["updated_at", "2020-11-25 06:13:59.713781"], ["id", 1]]
  [1m[35m (48.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 163], ["current_sign_in_at", "2020-11-25 06:13:59.767408"], ["last_sign_in_at", "2020-11-25 06:12:14.830314"], ["updated_at", "2020-11-25 06:13:59.767916"], ["id", 1]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.2ms | ActiveRecord: 56.9ms | Allocations: 25785)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 13:13:59 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts"."id" FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `remove_carts'
  [1m[36mCart Destroy (0.2ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:26:in `remove_carts'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 81ms (Views: 0.2ms | ActiveRecord: 5.1ms | Allocations: 4725)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:15:12 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"4QynvPN1NijJw51aXx_W_Q\\\":{\\\"token\\\":\\\"$2a$10$HCOjwoBPrNTPnUw7CMLCfOEpnVDOB2FhA90K1qxfhK16j4HDDQtW6\\\",\\\"expiry\\\":1669356583},\\\"nxcM5CRQpICzjL7bDhU86g\\\":{\\\"token\\\":\\\"$2a$10$sjn4Y984uAVGXCgg3/OHe.beYdUffOy/8WMx.mgaM77VPaIr7d58W\\\",\\\"expiry\\\":1669356704},\\\"nnjzmuy93YSdQNYbBC_4PQ\\\":{\\\"token\\\":\\\"$2a$10$NWEElNVQcg4biI1PeGmhpufb.bZTTteCRiUl/yT6Dhx5z8YrLuXQa\\\",\\\"expiry\\\":1669356734},\\\"EaLOFIqOzUcVZISMWGgN0A\\\":{\\\"token\\\":\\\"$2a$10$0yRw4TLls9/iXSwxKjDI/eWdvz.OEmukzMakMHCOLzVePb1IjJkGS\\\",\\\"expiry\\\":1669356839},\\\"rfbNUyBUuQmHVzzt8APXQA\\\":{\\\"token\\\":\\\"$2a$10$GePhJTNsS944Z0JSmnV3R.zC7CHJcabr33sNICQrb9R6OOP.9VMx6\\\",\\\"expiry\\\":1669356912}}\""], ["updated_at", "2020-11-25 06:15:12.755899"], ["id", 1]]
  [1m[35m (27.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 164], ["current_sign_in_at", "2020-11-25 06:15:12.786861"], ["last_sign_in_at", "2020-11-25 06:13:59.767408"], ["updated_at", "2020-11-25 06:15:12.787336"], ["id", 1]]
  [1m[35m (97.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 353ms (Views: 0.3ms | ActiveRecord: 126.7ms | Allocations: 15018)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:15:12 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"product"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}, "cart"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
Couldn't find Store without an ID
Completed 404 Not Found in 96ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 8656)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:15:24 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"nxcM5CRQpICzjL7bDhU86g\\\":{\\\"token\\\":\\\"$2a$10$sjn4Y984uAVGXCgg3/OHe.beYdUffOy/8WMx.mgaM77VPaIr7d58W\\\",\\\"expiry\\\":1669356704},\\\"nnjzmuy93YSdQNYbBC_4PQ\\\":{\\\"token\\\":\\\"$2a$10$NWEElNVQcg4biI1PeGmhpufb.bZTTteCRiUl/yT6Dhx5z8YrLuXQa\\\",\\\"expiry\\\":1669356734},\\\"EaLOFIqOzUcVZISMWGgN0A\\\":{\\\"token\\\":\\\"$2a$10$0yRw4TLls9/iXSwxKjDI/eWdvz.OEmukzMakMHCOLzVePb1IjJkGS\\\",\\\"expiry\\\":1669356839},\\\"rfbNUyBUuQmHVzzt8APXQA\\\":{\\\"token\\\":\\\"$2a$10$GePhJTNsS944Z0JSmnV3R.zC7CHJcabr33sNICQrb9R6OOP.9VMx6\\\",\\\"expiry\\\":1669356912},\\\"K9uvJRwPP0jeGBQS8-PZ6A\\\":{\\\"token\\\":\\\"$2a$10$zno1NOGqpb9/9OcXjjkeVuniKdPnc2x0tNXf4pJ2e/pB0v07wyuTK\\\",\\\"expiry\\\":1669356925}}\""], ["updated_at", "2020-11-25 06:15:25.167989"], ["id", 1]]
  [1m[35m (51.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 165], ["current_sign_in_at", "2020-11-25 06:15:25.223057"], ["last_sign_in_at", "2020-11-25 06:15:12.786861"], ["updated_at", "2020-11-25 06:15:25.223480"], ["id", 1]]
  [1m[35m (70.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 351ms (Views: 0.2ms | ActiveRecord: 124.1ms | Allocations: 15021)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:15:25 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["created_at", "2020-11-25 06:15:25.437301"], ["updated_at", "2020-11-25 06:15:25.437301"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (25.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 13], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
No template found for Api::V1::CartsController#remove_cart_item, rendering head :no_content
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 154ms (ActiveRecord: 32.2ms | Allocations: 27356)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:16:00 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"nnjzmuy93YSdQNYbBC_4PQ\\\":{\\\"token\\\":\\\"$2a$10$NWEElNVQcg4biI1PeGmhpufb.bZTTteCRiUl/yT6Dhx5z8YrLuXQa\\\",\\\"expiry\\\":1669356734},\\\"EaLOFIqOzUcVZISMWGgN0A\\\":{\\\"token\\\":\\\"$2a$10$0yRw4TLls9/iXSwxKjDI/eWdvz.OEmukzMakMHCOLzVePb1IjJkGS\\\",\\\"expiry\\\":1669356839},\\\"rfbNUyBUuQmHVzzt8APXQA\\\":{\\\"token\\\":\\\"$2a$10$GePhJTNsS944Z0JSmnV3R.zC7CHJcabr33sNICQrb9R6OOP.9VMx6\\\",\\\"expiry\\\":1669356912},\\\"K9uvJRwPP0jeGBQS8-PZ6A\\\":{\\\"token\\\":\\\"$2a$10$zno1NOGqpb9/9OcXjjkeVuniKdPnc2x0tNXf4pJ2e/pB0v07wyuTK\\\",\\\"expiry\\\":1669356925},\\\"_bMNq_GbJppXHRgRE7pAZQ\\\":{\\\"token\\\":\\\"$2a$10$oiDYamkNP7ZU5BYi/ne.PebjM/CwWdVj/Kpz0xRXE2Yi9is1oDa2a\\\",\\\"expiry\\\":1669356960}}\""], ["updated_at", "2020-11-25 06:16:00.842541"], ["id", 1]]
  [1m[35m (54.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 166], ["current_sign_in_at", "2020-11-25 06:16:00.901079"], ["last_sign_in_at", "2020-11-25 06:15:25.223057"], ["updated_at", "2020-11-25 06:16:00.901657"], ["id", 1]]
  [1m[35m (63.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 351ms (Views: 0.2ms | ActiveRecord: 119.7ms | Allocations: 15017)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:16:01 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["created_at", "2020-11-25 06:16:01.090207"], ["updated_at", "2020-11-25 06:16:01.090207"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (106.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 14], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
No template found for Api::V1::CartsController#remove_cart_item, rendering head :no_content
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 193ms (ActiveRecord: 107.4ms | Allocations: 9828)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:16:05 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"EaLOFIqOzUcVZISMWGgN0A\\\":{\\\"token\\\":\\\"$2a$10$0yRw4TLls9/iXSwxKjDI/eWdvz.OEmukzMakMHCOLzVePb1IjJkGS\\\",\\\"expiry\\\":1669356839},\\\"rfbNUyBUuQmHVzzt8APXQA\\\":{\\\"token\\\":\\\"$2a$10$GePhJTNsS944Z0JSmnV3R.zC7CHJcabr33sNICQrb9R6OOP.9VMx6\\\",\\\"expiry\\\":1669356912},\\\"K9uvJRwPP0jeGBQS8-PZ6A\\\":{\\\"token\\\":\\\"$2a$10$zno1NOGqpb9/9OcXjjkeVuniKdPnc2x0tNXf4pJ2e/pB0v07wyuTK\\\",\\\"expiry\\\":1669356925},\\\"_bMNq_GbJppXHRgRE7pAZQ\\\":{\\\"token\\\":\\\"$2a$10$oiDYamkNP7ZU5BYi/ne.PebjM/CwWdVj/Kpz0xRXE2Yi9is1oDa2a\\\",\\\"expiry\\\":1669356960},\\\"36bIPUkTc4BgIZElM1wQkQ\\\":{\\\"token\\\":\\\"$2a$10$zwf6o7ODZC4oauHneE0QWOYDI3XiADWra4zJTge1a8EEPo0eiQSZq\\\",\\\"expiry\\\":1669356965}}\""], ["updated_at", "2020-11-25 06:16:05.789384"], ["id", 1]]
  [1m[35m (43.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 167], ["current_sign_in_at", "2020-11-25 06:16:05.837754"], ["last_sign_in_at", "2020-11-25 06:16:00.901079"], ["updated_at", "2020-11-25 06:16:05.838386"], ["id", 1]]
  [1m[35m (37.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 315ms (Views: 0.2ms | ActiveRecord: 82.4ms | Allocations: 15017)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:16:05 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (1.4ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["created_at", "2020-11-25 06:16:06.018090"], ["updated_at", "2020-11-25 06:16:06.018090"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (45.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 15], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
No template found for Api::V1::CartsController#remove_cart_item, rendering head :no_content
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 169ms (ActiveRecord: 47.9ms | Allocations: 9818)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:16:28 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"rfbNUyBUuQmHVzzt8APXQA\\\":{\\\"token\\\":\\\"$2a$10$GePhJTNsS944Z0JSmnV3R.zC7CHJcabr33sNICQrb9R6OOP.9VMx6\\\",\\\"expiry\\\":1669356912},\\\"K9uvJRwPP0jeGBQS8-PZ6A\\\":{\\\"token\\\":\\\"$2a$10$zno1NOGqpb9/9OcXjjkeVuniKdPnc2x0tNXf4pJ2e/pB0v07wyuTK\\\",\\\"expiry\\\":1669356925},\\\"_bMNq_GbJppXHRgRE7pAZQ\\\":{\\\"token\\\":\\\"$2a$10$oiDYamkNP7ZU5BYi/ne.PebjM/CwWdVj/Kpz0xRXE2Yi9is1oDa2a\\\",\\\"expiry\\\":1669356960},\\\"36bIPUkTc4BgIZElM1wQkQ\\\":{\\\"token\\\":\\\"$2a$10$zwf6o7ODZC4oauHneE0QWOYDI3XiADWra4zJTge1a8EEPo0eiQSZq\\\",\\\"expiry\\\":1669356965},\\\"q0lE8E7nF1T5FOuscHa4tw\\\":{\\\"token\\\":\\\"$2a$10$hIHZNIr9FZyhTJRQffgSxObE5dTO.ieNG.swYnisPBQK.brbfW6t2\\\",\\\"expiry\\\":1669356988}}\""], ["updated_at", "2020-11-25 06:16:28.751907"], ["id", 1]]
  [1m[35m (68.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 168], ["current_sign_in_at", "2020-11-25 06:16:28.824946"], ["last_sign_in_at", "2020-11-25 06:16:05.837754"], ["updated_at", "2020-11-25 06:16:28.825582"], ["id", 1]]
  [1m[35m (69.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 370ms (Views: 0.4ms | ActiveRecord: 140.6ms | Allocations: 15017)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:16:28 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["created_at", "2020-11-25 06:16:29.056439"], ["updated_at", "2020-11-25 06:16:29.056439"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (24.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mShoppingCartItem Load (0.4ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 16], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
No template found for Api::V1::CartsController#remove_cart_item, rendering head :no_content
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 150ms (ActiveRecord: 26.1ms | Allocations: 9818)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "shopping_cart_items"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:17:12 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"K9uvJRwPP0jeGBQS8-PZ6A\\\":{\\\"token\\\":\\\"$2a$10$zno1NOGqpb9/9OcXjjkeVuniKdPnc2x0tNXf4pJ2e/pB0v07wyuTK\\\",\\\"expiry\\\":1669356925},\\\"_bMNq_GbJppXHRgRE7pAZQ\\\":{\\\"token\\\":\\\"$2a$10$oiDYamkNP7ZU5BYi/ne.PebjM/CwWdVj/Kpz0xRXE2Yi9is1oDa2a\\\",\\\"expiry\\\":1669356960},\\\"36bIPUkTc4BgIZElM1wQkQ\\\":{\\\"token\\\":\\\"$2a$10$zwf6o7ODZC4oauHneE0QWOYDI3XiADWra4zJTge1a8EEPo0eiQSZq\\\",\\\"expiry\\\":1669356965},\\\"q0lE8E7nF1T5FOuscHa4tw\\\":{\\\"token\\\":\\\"$2a$10$hIHZNIr9FZyhTJRQffgSxObE5dTO.ieNG.swYnisPBQK.brbfW6t2\\\",\\\"expiry\\\":1669356988},\\\"nnrrPaPukZwWAekP4HjbZw\\\":{\\\"token\\\":\\\"$2a$10$srN1wN00YLnqyjzFCbfASeTZTmm1HahmvaO95dfb6SzaSWtELD9Hm\\\",\\\"expiry\\\":1669357033}}\""], ["updated_at", "2020-11-25 06:17:13.123080"], ["id", 1]]
  [1m[35m (60.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 169], ["current_sign_in_at", "2020-11-25 06:17:13.189880"], ["last_sign_in_at", "2020-11-25 06:16:28.824946"], ["updated_at", "2020-11-25 06:17:13.191164"], ["id", 1]]
  [1m[35m (9.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.3ms | ActiveRecord: 76.2ms | Allocations: 25804)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:17:13 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:49:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:49:in `find_cart'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["created_at", "2020-11-25 06:17:13.382683"], ["updated_at", "2020-11-25 06:17:13.382683"]]
  ↳ app/controllers/api/v1/api_controller.rb:49:in `find_cart'
  [1m[35m (13.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:49:in `find_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 17], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
No template found for Api::V1::CartsController#remove_cart_item, rendering head :no_content
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 139ms (ActiveRecord: 23.2ms | Allocations: 24059)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:18:13 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"_bMNq_GbJppXHRgRE7pAZQ\\\":{\\\"token\\\":\\\"$2a$10$oiDYamkNP7ZU5BYi/ne.PebjM/CwWdVj/Kpz0xRXE2Yi9is1oDa2a\\\",\\\"expiry\\\":1669356960},\\\"36bIPUkTc4BgIZElM1wQkQ\\\":{\\\"token\\\":\\\"$2a$10$zwf6o7ODZC4oauHneE0QWOYDI3XiADWra4zJTge1a8EEPo0eiQSZq\\\",\\\"expiry\\\":1669356965},\\\"q0lE8E7nF1T5FOuscHa4tw\\\":{\\\"token\\\":\\\"$2a$10$hIHZNIr9FZyhTJRQffgSxObE5dTO.ieNG.swYnisPBQK.brbfW6t2\\\",\\\"expiry\\\":1669356988},\\\"nnrrPaPukZwWAekP4HjbZw\\\":{\\\"token\\\":\\\"$2a$10$srN1wN00YLnqyjzFCbfASeTZTmm1HahmvaO95dfb6SzaSWtELD9Hm\\\",\\\"expiry\\\":1669357033},\\\"J8T7H1OWTwiZB7twwO3Umg\\\":{\\\"token\\\":\\\"$2a$10$rlGqLuKbmfBOMkCs4QKlLOBiZfSI.UlrC3u6zDyHQXGj9i2Dfb1BW\\\",\\\"expiry\\\":1669357094}}\""], ["updated_at", "2020-11-25 06:18:14.160786"], ["id", 1]]
  [1m[35m (29.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 170], ["current_sign_in_at", "2020-11-25 06:18:14.193433"], ["last_sign_in_at", "2020-11-25 06:17:13.189880"], ["updated_at", "2020-11-25 06:18:14.193873"], ["id", 1]]
  [1m[35m (72.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 333ms (Views: 0.3ms | ActiveRecord: 104.4ms | Allocations: 15018)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:18:14 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCACHE Store Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:49:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:49:in `find_cart'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["created_at", "2020-11-25 06:18:14.398297"], ["updated_at", "2020-11-25 06:18:14.398297"]]
  ↳ app/controllers/api/v1/api_controller.rb:49:in `find_cart'
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:49:in `find_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 18], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
No template found for Api::V1::CartsController#remove_cart_item, rendering head :no_content
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 106ms (ActiveRecord: 13.5ms | Allocations: 9829)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:21:15 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"36bIPUkTc4BgIZElM1wQkQ\\\":{\\\"token\\\":\\\"$2a$10$zwf6o7ODZC4oauHneE0QWOYDI3XiADWra4zJTge1a8EEPo0eiQSZq\\\",\\\"expiry\\\":1669356965},\\\"q0lE8E7nF1T5FOuscHa4tw\\\":{\\\"token\\\":\\\"$2a$10$hIHZNIr9FZyhTJRQffgSxObE5dTO.ieNG.swYnisPBQK.brbfW6t2\\\",\\\"expiry\\\":1669356988},\\\"nnrrPaPukZwWAekP4HjbZw\\\":{\\\"token\\\":\\\"$2a$10$srN1wN00YLnqyjzFCbfASeTZTmm1HahmvaO95dfb6SzaSWtELD9Hm\\\",\\\"expiry\\\":1669357033},\\\"J8T7H1OWTwiZB7twwO3Umg\\\":{\\\"token\\\":\\\"$2a$10$rlGqLuKbmfBOMkCs4QKlLOBiZfSI.UlrC3u6zDyHQXGj9i2Dfb1BW\\\",\\\"expiry\\\":1669357094},\\\"6TU7rr8igrWjUIvcnbzESw\\\":{\\\"token\\\":\\\"$2a$10$K.98PRDX66Pk0GVnoBQZ7.26lXt/CK6Wp.kM0TNnqttmSpF3T3CC.\\\",\\\"expiry\\\":1669357276}}\""], ["updated_at", "2020-11-25 06:21:16.075116"], ["id", 1]]
  [1m[35m (44.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 171], ["current_sign_in_at", "2020-11-25 06:21:16.123758"], ["last_sign_in_at", "2020-11-25 06:18:14.193433"], ["updated_at", "2020-11-25 06:21:16.124323"], ["id", 1]]
  [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 1.0ms | ActiveRecord: 61.3ms | Allocations: 25801)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:21:16 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:49:in `find_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 13], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
No template found for Api::V1::CartsController#remove_cart_item, rendering head :no_content
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 122ms (ActiveRecord: 10.6ms | Allocations: 19517)


  [1m[36mCart Destroy (24.7ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mShoppingCartItem Destroy (28.8ms)[0m  [1m[31mDELETE FROM "shopping_cart_items"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:23:13 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"q0lE8E7nF1T5FOuscHa4tw\\\":{\\\"token\\\":\\\"$2a$10$hIHZNIr9FZyhTJRQffgSxObE5dTO.ieNG.swYnisPBQK.brbfW6t2\\\",\\\"expiry\\\":1669356988},\\\"nnrrPaPukZwWAekP4HjbZw\\\":{\\\"token\\\":\\\"$2a$10$srN1wN00YLnqyjzFCbfASeTZTmm1HahmvaO95dfb6SzaSWtELD9Hm\\\",\\\"expiry\\\":1669357033},\\\"J8T7H1OWTwiZB7twwO3Umg\\\":{\\\"token\\\":\\\"$2a$10$rlGqLuKbmfBOMkCs4QKlLOBiZfSI.UlrC3u6zDyHQXGj9i2Dfb1BW\\\",\\\"expiry\\\":1669357094},\\\"6TU7rr8igrWjUIvcnbzESw\\\":{\\\"token\\\":\\\"$2a$10$K.98PRDX66Pk0GVnoBQZ7.26lXt/CK6Wp.kM0TNnqttmSpF3T3CC.\\\",\\\"expiry\\\":1669357276},\\\"nCZvtu0_7lcbcq6TZDaUWQ\\\":{\\\"token\\\":\\\"$2a$10$9HWCnONXj2PWNhnuP1wxKewUv.8wjtAP0YaMudshBEiy1QxnCIUe6\\\",\\\"expiry\\\":1669357394}}\""], ["updated_at", "2020-11-25 06:23:14.104500"], ["id", 1]]
  [1m[35m (40.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 172], ["current_sign_in_at", "2020-11-25 06:23:14.151721"], ["last_sign_in_at", "2020-11-25 06:21:16.123758"], ["updated_at", "2020-11-25 06:23:14.152166"], ["id", 1]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.3ms | ActiveRecord: 49.1ms | Allocations: 25801)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:23:14 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>1, "quantity"=>3, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["created_at", "2020-11-25 06:23:14.333829"], ["updated_at", "2020-11-25 06:23:14.333829"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (21.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 19], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
No template found for Api::V1::CartsController#remove_cart_item, rendering head :no_content
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 204 No Content in 152ms (ActiveRecord: 35.1ms | Allocations: 24667)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:24:04 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"nnrrPaPukZwWAekP4HjbZw\\\":{\\\"token\\\":\\\"$2a$10$srN1wN00YLnqyjzFCbfASeTZTmm1HahmvaO95dfb6SzaSWtELD9Hm\\\",\\\"expiry\\\":1669357033},\\\"J8T7H1OWTwiZB7twwO3Umg\\\":{\\\"token\\\":\\\"$2a$10$rlGqLuKbmfBOMkCs4QKlLOBiZfSI.UlrC3u6zDyHQXGj9i2Dfb1BW\\\",\\\"expiry\\\":1669357094},\\\"6TU7rr8igrWjUIvcnbzESw\\\":{\\\"token\\\":\\\"$2a$10$K.98PRDX66Pk0GVnoBQZ7.26lXt/CK6Wp.kM0TNnqttmSpF3T3CC.\\\",\\\"expiry\\\":1669357276},\\\"nCZvtu0_7lcbcq6TZDaUWQ\\\":{\\\"token\\\":\\\"$2a$10$9HWCnONXj2PWNhnuP1wxKewUv.8wjtAP0YaMudshBEiy1QxnCIUe6\\\",\\\"expiry\\\":1669357394},\\\"2Dj9nZySc85sGszelGdczQ\\\":{\\\"token\\\":\\\"$2a$10$AAEEMFi5eYlb3AQ/jTIuRut2wTF4pxeRPkLzYqVBJP5dyGicBQ0p2\\\",\\\"expiry\\\":1669357444}}\""], ["updated_at", "2020-11-25 06:24:04.481891"], ["id", 1]]
  [1m[35m (19.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 173], ["current_sign_in_at", "2020-11-25 06:24:04.504667"], ["last_sign_in_at", "2020-11-25 06:23:14.151721"], ["updated_at", "2020-11-25 06:24:04.507063"], ["id", 1]]
  [1m[35m (66.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 342ms (Views: 0.3ms | ActiveRecord: 89.3ms | Allocations: 25802)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 13:24:04 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 5], ["created_at", "2020-11-25 06:24:04.738434"], ["updated_at", "2020-11-25 06:24:04.738434"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (35.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 20], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.4ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 20], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 42], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-25 06:24:04.851134"], ["updated_at", "2020-11-25 06:24:04.851134"]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (67.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.4ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 20], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mShoppingCartItem Update (3.7ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "notes" = $1 WHERE "shopping_cart_items"."id" = $2[0m  [["notes", "Beli yang banyak 90"], ["id", 15]]
  ↳ app/controllers/api/v1/carts_controller.rb:11:in `add_to_cart'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 319ms (Views: 0.2ms | ActiveRecord: 121.6ms | Allocations: 44160)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:24:19 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"J8T7H1OWTwiZB7twwO3Umg\\\":{\\\"token\\\":\\\"$2a$10$rlGqLuKbmfBOMkCs4QKlLOBiZfSI.UlrC3u6zDyHQXGj9i2Dfb1BW\\\",\\\"expiry\\\":1669357094},\\\"6TU7rr8igrWjUIvcnbzESw\\\":{\\\"token\\\":\\\"$2a$10$K.98PRDX66Pk0GVnoBQZ7.26lXt/CK6Wp.kM0TNnqttmSpF3T3CC.\\\",\\\"expiry\\\":1669357276},\\\"nCZvtu0_7lcbcq6TZDaUWQ\\\":{\\\"token\\\":\\\"$2a$10$9HWCnONXj2PWNhnuP1wxKewUv.8wjtAP0YaMudshBEiy1QxnCIUe6\\\",\\\"expiry\\\":1669357394},\\\"2Dj9nZySc85sGszelGdczQ\\\":{\\\"token\\\":\\\"$2a$10$AAEEMFi5eYlb3AQ/jTIuRut2wTF4pxeRPkLzYqVBJP5dyGicBQ0p2\\\",\\\"expiry\\\":1669357444},\\\"KPuKPiaOsmSbXjQri7g_IA\\\":{\\\"token\\\":\\\"$2a$10$NP6n8dnlG.EIDT8yW73Gd.yuRA3q2otX01zdT8vkkBk8XBWWV4L1u\\\",\\\"expiry\\\":1669357459}}\""], ["updated_at", "2020-11-25 06:24:19.940224"], ["id", 1]]
  [1m[35m (55.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 174], ["current_sign_in_at", "2020-11-25 06:24:20.003403"], ["last_sign_in_at", "2020-11-25 06:24:04.504667"], ["updated_at", "2020-11-25 06:24:20.004586"], ["id", 1]]
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.8ms | ActiveRecord: 62.6ms | Allocations: 15019)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:24:20 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 19], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 95ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 6439)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:24:36 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"6TU7rr8igrWjUIvcnbzESw\\\":{\\\"token\\\":\\\"$2a$10$K.98PRDX66Pk0GVnoBQZ7.26lXt/CK6Wp.kM0TNnqttmSpF3T3CC.\\\",\\\"expiry\\\":1669357276},\\\"nCZvtu0_7lcbcq6TZDaUWQ\\\":{\\\"token\\\":\\\"$2a$10$9HWCnONXj2PWNhnuP1wxKewUv.8wjtAP0YaMudshBEiy1QxnCIUe6\\\",\\\"expiry\\\":1669357394},\\\"2Dj9nZySc85sGszelGdczQ\\\":{\\\"token\\\":\\\"$2a$10$AAEEMFi5eYlb3AQ/jTIuRut2wTF4pxeRPkLzYqVBJP5dyGicBQ0p2\\\",\\\"expiry\\\":1669357444},\\\"KPuKPiaOsmSbXjQri7g_IA\\\":{\\\"token\\\":\\\"$2a$10$NP6n8dnlG.EIDT8yW73Gd.yuRA3q2otX01zdT8vkkBk8XBWWV4L1u\\\",\\\"expiry\\\":1669357459},\\\"yJnzjGDdqLyYgeqF-sZnVA\\\":{\\\"token\\\":\\\"$2a$10$uvPpBjJBQZDaXlC0O4pgTugJdKJ0RAqgOqwARmbrQBqQwpbgeWCjq\\\",\\\"expiry\\\":1669357477}}\""], ["updated_at", "2020-11-25 06:24:37.112608"], ["id", 1]]
  [1m[35m (52.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 175], ["current_sign_in_at", "2020-11-25 06:24:37.169190"], ["last_sign_in_at", "2020-11-25 06:24:20.003403"], ["updated_at", "2020-11-25 06:24:37.169871"], ["id", 1]]
  [1m[35m (46.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 331ms (Views: 0.4ms | ActiveRecord: 100.5ms | Allocations: 15021)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:24:37 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>1}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mShoppingCartItem Load (0.6ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 19], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 88ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 6430)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:24:45 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"nCZvtu0_7lcbcq6TZDaUWQ\\\":{\\\"token\\\":\\\"$2a$10$9HWCnONXj2PWNhnuP1wxKewUv.8wjtAP0YaMudshBEiy1QxnCIUe6\\\",\\\"expiry\\\":1669357394},\\\"2Dj9nZySc85sGszelGdczQ\\\":{\\\"token\\\":\\\"$2a$10$AAEEMFi5eYlb3AQ/jTIuRut2wTF4pxeRPkLzYqVBJP5dyGicBQ0p2\\\",\\\"expiry\\\":1669357444},\\\"KPuKPiaOsmSbXjQri7g_IA\\\":{\\\"token\\\":\\\"$2a$10$NP6n8dnlG.EIDT8yW73Gd.yuRA3q2otX01zdT8vkkBk8XBWWV4L1u\\\",\\\"expiry\\\":1669357459},\\\"yJnzjGDdqLyYgeqF-sZnVA\\\":{\\\"token\\\":\\\"$2a$10$uvPpBjJBQZDaXlC0O4pgTugJdKJ0RAqgOqwARmbrQBqQwpbgeWCjq\\\",\\\"expiry\\\":1669357477},\\\"gvTFUFSmz85D3C4cNh6BZA\\\":{\\\"token\\\":\\\"$2a$10$I.mv5LXCza0PhRKWYNNKxe4FI7KFtPdGB6Ge/l5wSjRf8MVGit4Sm\\\",\\\"expiry\\\":1669357485}}\""], ["updated_at", "2020-11-25 06:24:45.962779"], ["id", 1]]
  [1m[35m (40.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 176], ["current_sign_in_at", "2020-11-25 06:24:46.009147"], ["last_sign_in_at", "2020-11-25 06:24:37.169190"], ["updated_at", "2020-11-25 06:24:46.009774"], ["id", 1]]
  [1m[35m (72.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 354ms (Views: 0.3ms | ActiveRecord: 115.0ms | Allocations: 15017)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:24:46 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:37:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 19], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:37:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:37:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 19], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:37:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 20], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:37:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:37:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 20], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:37:in `index'
  [1m[36mProductVariant Load (0.5ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:37:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 124ms (Views: 0.1ms | ActiveRecord: 2.5ms | Allocations: 20212)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:37:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:37:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:26:58 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"2Dj9nZySc85sGszelGdczQ\\\":{\\\"token\\\":\\\"$2a$10$AAEEMFi5eYlb3AQ/jTIuRut2wTF4pxeRPkLzYqVBJP5dyGicBQ0p2\\\",\\\"expiry\\\":1669357444},\\\"KPuKPiaOsmSbXjQri7g_IA\\\":{\\\"token\\\":\\\"$2a$10$NP6n8dnlG.EIDT8yW73Gd.yuRA3q2otX01zdT8vkkBk8XBWWV4L1u\\\",\\\"expiry\\\":1669357459},\\\"yJnzjGDdqLyYgeqF-sZnVA\\\":{\\\"token\\\":\\\"$2a$10$uvPpBjJBQZDaXlC0O4pgTugJdKJ0RAqgOqwARmbrQBqQwpbgeWCjq\\\",\\\"expiry\\\":1669357477},\\\"gvTFUFSmz85D3C4cNh6BZA\\\":{\\\"token\\\":\\\"$2a$10$I.mv5LXCza0PhRKWYNNKxe4FI7KFtPdGB6Ge/l5wSjRf8MVGit4Sm\\\",\\\"expiry\\\":1669357485},\\\"jESYhzDaxp20nX9fEP1Dkw\\\":{\\\"token\\\":\\\"$2a$10$je/nnLu4pxHngUbfoorhCO7z3Nz6ZKvQHIxIfhoeIjEs0cyglnSgm\\\",\\\"expiry\\\":1669357618}}\""], ["updated_at", "2020-11-25 06:26:58.932440"], ["id", 1]]
  [1m[35m (41.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 177], ["current_sign_in_at", "2020-11-25 06:26:58.977520"], ["last_sign_in_at", "2020-11-25 06:24:46.009147"], ["updated_at", "2020-11-25 06:26:58.977929"], ["id", 1]]
  [1m[35m (50.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.3ms | ActiveRecord: 102.2ms | Allocations: 25801)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:26:59 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:38:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 19], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:38:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:38:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 19], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:38:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 20], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:38:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:38:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 20], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:38:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:38:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 146ms (Views: 0.1ms | ActiveRecord: 10.7ms | Allocations: 36044)


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:store]
  Add to your query: .includes([:store])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:38:in `index'


user: bainur
GET /api/v1/carts
USE eager loading detected
  Cart => [:shopping_cart_items]
  Add to your query: .includes([:shopping_cart_items])
Call stack
  /home/bainur/projects/minitoko2/minitoko/app/controllers/api/v1/carts_controller.rb:38:in `index'


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:27:03 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"KPuKPiaOsmSbXjQri7g_IA\\\":{\\\"token\\\":\\\"$2a$10$NP6n8dnlG.EIDT8yW73Gd.yuRA3q2otX01zdT8vkkBk8XBWWV4L1u\\\",\\\"expiry\\\":1669357459},\\\"yJnzjGDdqLyYgeqF-sZnVA\\\":{\\\"token\\\":\\\"$2a$10$uvPpBjJBQZDaXlC0O4pgTugJdKJ0RAqgOqwARmbrQBqQwpbgeWCjq\\\",\\\"expiry\\\":1669357477},\\\"gvTFUFSmz85D3C4cNh6BZA\\\":{\\\"token\\\":\\\"$2a$10$I.mv5LXCza0PhRKWYNNKxe4FI7KFtPdGB6Ge/l5wSjRf8MVGit4Sm\\\",\\\"expiry\\\":1669357485},\\\"jESYhzDaxp20nX9fEP1Dkw\\\":{\\\"token\\\":\\\"$2a$10$je/nnLu4pxHngUbfoorhCO7z3Nz6ZKvQHIxIfhoeIjEs0cyglnSgm\\\",\\\"expiry\\\":1669357618},\\\"bN_PN0sk2UYg36U7VhDdjw\\\":{\\\"token\\\":\\\"$2a$10$15eoiUqBIZt5ql4oY7gEmul9KXMLMm8KqoFcTtKbTnxmtNq4Bzyqi\\\",\\\"expiry\\\":1669357623}}\""], ["updated_at", "2020-11-25 06:27:03.293523"], ["id", 1]]
  [1m[35m (45.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 178], ["current_sign_in_at", "2020-11-25 06:27:03.342648"], ["last_sign_in_at", "2020-11-25 06:26:58.977520"], ["updated_at", "2020-11-25 06:27:03.343177"], ["id", 1]]
  [1m[35m (50.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 325ms (Views: 0.3ms | ActiveRecord: 97.1ms | Allocations: 15021)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:27:03 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mShoppingCartItem Load (0.4ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 19], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
Completed 500 Internal Server Error in 101ms (ActiveRecord: 1.3ms | Allocations: 5788)



NoMethodError - undefined method `update_columns' for nil:NilClass:
  app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'

  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Destroy (37.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mShoppingCartItem Destroy (802.1ms)[0m  [1m[31mDELETE FROM "shopping_cart_items"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:27:54 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"yJnzjGDdqLyYgeqF-sZnVA\\\":{\\\"token\\\":\\\"$2a$10$uvPpBjJBQZDaXlC0O4pgTugJdKJ0RAqgOqwARmbrQBqQwpbgeWCjq\\\",\\\"expiry\\\":1669357477},\\\"gvTFUFSmz85D3C4cNh6BZA\\\":{\\\"token\\\":\\\"$2a$10$I.mv5LXCza0PhRKWYNNKxe4FI7KFtPdGB6Ge/l5wSjRf8MVGit4Sm\\\",\\\"expiry\\\":1669357485},\\\"jESYhzDaxp20nX9fEP1Dkw\\\":{\\\"token\\\":\\\"$2a$10$je/nnLu4pxHngUbfoorhCO7z3Nz6ZKvQHIxIfhoeIjEs0cyglnSgm\\\",\\\"expiry\\\":1669357618},\\\"bN_PN0sk2UYg36U7VhDdjw\\\":{\\\"token\\\":\\\"$2a$10$15eoiUqBIZt5ql4oY7gEmul9KXMLMm8KqoFcTtKbTnxmtNq4Bzyqi\\\",\\\"expiry\\\":1669357623},\\\"tXcn2iPvM15JgkvozDBQLg\\\":{\\\"token\\\":\\\"$2a$10$/Rk/Y7QYx2NNUYyhbDA5yO5ArX6KIRyAOWGM9rDUjMLKC9jcWgE7a\\\",\\\"expiry\\\":1669357674}}\""], ["updated_at", "2020-11-25 06:27:54.852502"], ["id", 1]]
  [1m[35m (34.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 179], ["current_sign_in_at", "2020-11-25 06:27:54.890508"], ["last_sign_in_at", "2020-11-25 06:27:03.342648"], ["updated_at", "2020-11-25 06:27:54.890999"], ["id", 1]]
  [1m[35m (76.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 0.3ms | ActiveRecord: 112.7ms | Allocations: 15018)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 13:27:55 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (0.2ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 5], ["created_at", "2020-11-25 06:27:55.141172"], ["updated_at", "2020-11-25 06:27:55.141172"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (50.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 21], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.3ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 21], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 42], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-25 06:27:55.225828"], ["updated_at", "2020-11-25 06:27:55.225828"]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (16.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 21], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mShoppingCartItem Update (69.7ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "notes" = $1 WHERE "shopping_cart_items"."id" = $2[0m  [["notes", "Beli yang banyak 90"], ["id", 16]]
  ↳ app/controllers/api/v1/carts_controller.rb:11:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 282ms (Views: 0.2ms | ActiveRecord: 141.1ms | Allocations: 29197)


  [1m[36mShoppingCartItem Load (1.0ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items"[0m
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:28:14 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"gvTFUFSmz85D3C4cNh6BZA\\\":{\\\"token\\\":\\\"$2a$10$I.mv5LXCza0PhRKWYNNKxe4FI7KFtPdGB6Ge/l5wSjRf8MVGit4Sm\\\",\\\"expiry\\\":1669357485},\\\"jESYhzDaxp20nX9fEP1Dkw\\\":{\\\"token\\\":\\\"$2a$10$je/nnLu4pxHngUbfoorhCO7z3Nz6ZKvQHIxIfhoeIjEs0cyglnSgm\\\",\\\"expiry\\\":1669357618},\\\"bN_PN0sk2UYg36U7VhDdjw\\\":{\\\"token\\\":\\\"$2a$10$15eoiUqBIZt5ql4oY7gEmul9KXMLMm8KqoFcTtKbTnxmtNq4Bzyqi\\\",\\\"expiry\\\":1669357623},\\\"tXcn2iPvM15JgkvozDBQLg\\\":{\\\"token\\\":\\\"$2a$10$/Rk/Y7QYx2NNUYyhbDA5yO5ArX6KIRyAOWGM9rDUjMLKC9jcWgE7a\\\",\\\"expiry\\\":1669357674},\\\"UIVLysMNA_mUZvfUD7NA0Q\\\":{\\\"token\\\":\\\"$2a$10$7pC4ldE.VTXX5Mzvt2CWD.6O7bio2J.qyMgv2RIslK68BmAAzURti\\\",\\\"expiry\\\":1669357694}}\""], ["updated_at", "2020-11-25 06:28:14.726927"], ["id", 1]]
  [1m[35m (29.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 180], ["current_sign_in_at", "2020-11-25 06:28:14.759760"], ["last_sign_in_at", "2020-11-25 06:27:54.890508"], ["updated_at", "2020-11-25 06:28:14.760235"], ["id", 1]]
  [1m[35m (61.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 323ms (Views: 0.3ms | ActiveRecord: 92.0ms | Allocations: 15018)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:28:14 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 1], ["created_at", "2020-11-25 06:28:14.949390"], ["updated_at", "2020-11-25 06:28:14.949390"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (26.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 22], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
Completed 500 Internal Server Error in 120ms (ActiveRecord: 28.3ms | Allocations: 9413)



NoMethodError - undefined method `update_columns' for nil:NilClass:
  app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'

  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:30:46 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"jESYhzDaxp20nX9fEP1Dkw\\\":{\\\"token\\\":\\\"$2a$10$je/nnLu4pxHngUbfoorhCO7z3Nz6ZKvQHIxIfhoeIjEs0cyglnSgm\\\",\\\"expiry\\\":1669357618},\\\"bN_PN0sk2UYg36U7VhDdjw\\\":{\\\"token\\\":\\\"$2a$10$15eoiUqBIZt5ql4oY7gEmul9KXMLMm8KqoFcTtKbTnxmtNq4Bzyqi\\\",\\\"expiry\\\":1669357623},\\\"tXcn2iPvM15JgkvozDBQLg\\\":{\\\"token\\\":\\\"$2a$10$/Rk/Y7QYx2NNUYyhbDA5yO5ArX6KIRyAOWGM9rDUjMLKC9jcWgE7a\\\",\\\"expiry\\\":1669357674},\\\"UIVLysMNA_mUZvfUD7NA0Q\\\":{\\\"token\\\":\\\"$2a$10$7pC4ldE.VTXX5Mzvt2CWD.6O7bio2J.qyMgv2RIslK68BmAAzURti\\\",\\\"expiry\\\":1669357694},\\\"oG0thO2z-bL0nrMK7XoR_w\\\":{\\\"token\\\":\\\"$2a$10$/ym0.Mx9rl00IROKOD.HTuUmLn6F7o4igAA7PXZb4SfbSo/OvEPCK\\\",\\\"expiry\\\":1669357847}}\""], ["updated_at", "2020-11-25 06:30:47.172081"], ["id", 1]]
  [1m[35m (13.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 181], ["current_sign_in_at", "2020-11-25 06:30:47.189908"], ["last_sign_in_at", "2020-11-25 06:28:14.759760"], ["updated_at", "2020-11-25 06:30:47.190597"], ["id", 1]]
  [1m[35m (11.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.5ms | ActiveRecord: 29.3ms | Allocations: 25801)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:30:47 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>1}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'
Completed 500 Internal Server Error in 78ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 6183)



NoMethodError - undefined method `id' for #<ActiveRecord::Relation []>
Did you mean?  ids:
  app/controllers/api/v1/carts_controller.rb:21:in `remove_cart_item'

  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCart Destroy (30.6ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = $1[0m  [["id", 22]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:31:10 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"bN_PN0sk2UYg36U7VhDdjw\\\":{\\\"token\\\":\\\"$2a$10$15eoiUqBIZt5ql4oY7gEmul9KXMLMm8KqoFcTtKbTnxmtNq4Bzyqi\\\",\\\"expiry\\\":1669357623},\\\"tXcn2iPvM15JgkvozDBQLg\\\":{\\\"token\\\":\\\"$2a$10$/Rk/Y7QYx2NNUYyhbDA5yO5ArX6KIRyAOWGM9rDUjMLKC9jcWgE7a\\\",\\\"expiry\\\":1669357674},\\\"UIVLysMNA_mUZvfUD7NA0Q\\\":{\\\"token\\\":\\\"$2a$10$7pC4ldE.VTXX5Mzvt2CWD.6O7bio2J.qyMgv2RIslK68BmAAzURti\\\",\\\"expiry\\\":1669357694},\\\"oG0thO2z-bL0nrMK7XoR_w\\\":{\\\"token\\\":\\\"$2a$10$/ym0.Mx9rl00IROKOD.HTuUmLn6F7o4igAA7PXZb4SfbSo/OvEPCK\\\",\\\"expiry\\\":1669357847},\\\"C5mA5x-Jvk3slge_Lp2KWQ\\\":{\\\"token\\\":\\\"$2a$10$IerK93mhhNFC6tZXQxT6pO/mcOdN3MhEtfO/G1ktPPlZ0b5eCy.Ry\\\",\\\"expiry\\\":1669357871}}\""], ["updated_at", "2020-11-25 06:31:11.162060"], ["id", 1]]
  [1m[35m (53.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 182], ["current_sign_in_at", "2020-11-25 06:31:11.218609"], ["last_sign_in_at", "2020-11-25 06:30:47.189908"], ["updated_at", "2020-11-25 06:31:11.219027"], ["id", 1]]
  [1m[35m (72.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 355ms (Views: 0.5ms | ActiveRecord: 127.0ms | Allocations: 15019)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:31:11 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'
Completed 500 Internal Server Error in 97ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 4801)



NoMethodError - undefined method `id' for #<ActiveRecord::Relation []>
Did you mean?  ids:
  app/controllers/api/v1/carts_controller.rb:21:in `remove_cart_item'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:31:37 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"tXcn2iPvM15JgkvozDBQLg\\\":{\\\"token\\\":\\\"$2a$10$/Rk/Y7QYx2NNUYyhbDA5yO5ArX6KIRyAOWGM9rDUjMLKC9jcWgE7a\\\",\\\"expiry\\\":1669357674},\\\"UIVLysMNA_mUZvfUD7NA0Q\\\":{\\\"token\\\":\\\"$2a$10$7pC4ldE.VTXX5Mzvt2CWD.6O7bio2J.qyMgv2RIslK68BmAAzURti\\\",\\\"expiry\\\":1669357694},\\\"oG0thO2z-bL0nrMK7XoR_w\\\":{\\\"token\\\":\\\"$2a$10$/ym0.Mx9rl00IROKOD.HTuUmLn6F7o4igAA7PXZb4SfbSo/OvEPCK\\\",\\\"expiry\\\":1669357847},\\\"C5mA5x-Jvk3slge_Lp2KWQ\\\":{\\\"token\\\":\\\"$2a$10$IerK93mhhNFC6tZXQxT6pO/mcOdN3MhEtfO/G1ktPPlZ0b5eCy.Ry\\\",\\\"expiry\\\":1669357871},\\\"5_lYO9_cN6lz9v0npPKydQ\\\":{\\\"token\\\":\\\"$2a$10$zioxJjCxZDf45SD2C3UmMuLzfo2ey5M5pei/HpeQZfL7YsYO/2CcW\\\",\\\"expiry\\\":1669357898}}\""], ["updated_at", "2020-11-25 06:31:38.155083"], ["id", 1]]
  [1m[35m (49.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 183], ["current_sign_in_at", "2020-11-25 06:31:38.214622"], ["last_sign_in_at", "2020-11-25 06:31:11.218609"], ["updated_at", "2020-11-25 06:31:38.215450"], ["id", 1]]
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 314ms (Views: 0.2ms | ActiveRecord: 61.9ms | Allocations: 25802)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:31:38 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `p'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `remove_cart_item'
Completed 500 Internal Server Error in 84ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 6860)



NoMethodError - undefined method `id' for #<ActiveRecord::Relation []>
Did you mean?  ids:
  app/controllers/api/v1/carts_controller.rb:23:in `remove_cart_item'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:32:01 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"UIVLysMNA_mUZvfUD7NA0Q\\\":{\\\"token\\\":\\\"$2a$10$7pC4ldE.VTXX5Mzvt2CWD.6O7bio2J.qyMgv2RIslK68BmAAzURti\\\",\\\"expiry\\\":1669357694},\\\"oG0thO2z-bL0nrMK7XoR_w\\\":{\\\"token\\\":\\\"$2a$10$/ym0.Mx9rl00IROKOD.HTuUmLn6F7o4igAA7PXZb4SfbSo/OvEPCK\\\",\\\"expiry\\\":1669357847},\\\"C5mA5x-Jvk3slge_Lp2KWQ\\\":{\\\"token\\\":\\\"$2a$10$IerK93mhhNFC6tZXQxT6pO/mcOdN3MhEtfO/G1ktPPlZ0b5eCy.Ry\\\",\\\"expiry\\\":1669357871},\\\"5_lYO9_cN6lz9v0npPKydQ\\\":{\\\"token\\\":\\\"$2a$10$zioxJjCxZDf45SD2C3UmMuLzfo2ey5M5pei/HpeQZfL7YsYO/2CcW\\\",\\\"expiry\\\":1669357898},\\\"r4XcX0wWcqTXAM1tPh481Q\\\":{\\\"token\\\":\\\"$2a$10$Jz73OyI0XTCvME4cqCH8dO.TljwcE8L8opujV3mLEGqWrEBP4qIdS\\\",\\\"expiry\\\":1669357921}}\""], ["updated_at", "2020-11-25 06:32:01.573063"], ["id", 1]]
  [1m[35m (28.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 184], ["current_sign_in_at", "2020-11-25 06:32:01.607138"], ["last_sign_in_at", "2020-11-25 06:31:38.214622"], ["updated_at", "2020-11-25 06:32:01.607797"], ["id", 1]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.3ms | ActiveRecord: 38.4ms | Allocations: 25789)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:32:01 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>1}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `p'
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `remove_cart_item'
Completed 500 Internal Server Error in 83ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 6848)



NoMethodError - undefined method `id' for #<ActiveRecord::Relation []>
Did you mean?  ids:
  app/controllers/api/v1/carts_controller.rb:23:in `remove_cart_item'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:32:11 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"oG0thO2z-bL0nrMK7XoR_w\\\":{\\\"token\\\":\\\"$2a$10$/ym0.Mx9rl00IROKOD.HTuUmLn6F7o4igAA7PXZb4SfbSo/OvEPCK\\\",\\\"expiry\\\":1669357847},\\\"C5mA5x-Jvk3slge_Lp2KWQ\\\":{\\\"token\\\":\\\"$2a$10$IerK93mhhNFC6tZXQxT6pO/mcOdN3MhEtfO/G1ktPPlZ0b5eCy.Ry\\\",\\\"expiry\\\":1669357871},\\\"5_lYO9_cN6lz9v0npPKydQ\\\":{\\\"token\\\":\\\"$2a$10$zioxJjCxZDf45SD2C3UmMuLzfo2ey5M5pei/HpeQZfL7YsYO/2CcW\\\",\\\"expiry\\\":1669357898},\\\"r4XcX0wWcqTXAM1tPh481Q\\\":{\\\"token\\\":\\\"$2a$10$Jz73OyI0XTCvME4cqCH8dO.TljwcE8L8opujV3mLEGqWrEBP4qIdS\\\",\\\"expiry\\\":1669357921},\\\"02T2s1RUXf5kvUVbQf_wSg\\\":{\\\"token\\\":\\\"$2a$10$PPKjjus8ty2/PPQf9y2NIuOXK/jFNK/OFqOsGnA/EOiiZ9SB8Y2Vq\\\",\\\"expiry\\\":1669357931}}\""], ["updated_at", "2020-11-25 06:32:11.736380"], ["id", 1]]
  [1m[35m (17.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 185], ["current_sign_in_at", "2020-11-25 06:32:11.758113"], ["last_sign_in_at", "2020-11-25 06:32:01.607138"], ["updated_at", "2020-11-25 06:32:11.758543"], ["id", 1]]
  [1m[35m (60.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 324ms (Views: 0.4ms | ActiveRecord: 83.5ms | Allocations: 25806)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:32:11 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `p'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `remove_cart_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 84ms (Views: 0.3ms | ActiveRecord: 2.3ms | Allocations: 5261)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:32:47 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"C5mA5x-Jvk3slge_Lp2KWQ\\\":{\\\"token\\\":\\\"$2a$10$IerK93mhhNFC6tZXQxT6pO/mcOdN3MhEtfO/G1ktPPlZ0b5eCy.Ry\\\",\\\"expiry\\\":1669357871},\\\"5_lYO9_cN6lz9v0npPKydQ\\\":{\\\"token\\\":\\\"$2a$10$zioxJjCxZDf45SD2C3UmMuLzfo2ey5M5pei/HpeQZfL7YsYO/2CcW\\\",\\\"expiry\\\":1669357898},\\\"r4XcX0wWcqTXAM1tPh481Q\\\":{\\\"token\\\":\\\"$2a$10$Jz73OyI0XTCvME4cqCH8dO.TljwcE8L8opujV3mLEGqWrEBP4qIdS\\\",\\\"expiry\\\":1669357921},\\\"02T2s1RUXf5kvUVbQf_wSg\\\":{\\\"token\\\":\\\"$2a$10$PPKjjus8ty2/PPQf9y2NIuOXK/jFNK/OFqOsGnA/EOiiZ9SB8Y2Vq\\\",\\\"expiry\\\":1669357931},\\\"t2PtlyDZjX-_9MR8nibMnw\\\":{\\\"token\\\":\\\"$2a$10$VPP2AhQNzQ3.entDX.KgOeNH/o5zlFeQFnkDSw8zeTfAHtYtDQvqe\\\",\\\"expiry\\\":1669357968}}\""], ["updated_at", "2020-11-25 06:32:48.009065"], ["id", 1]]
  [1m[35m (18.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 186], ["current_sign_in_at", "2020-11-25 06:32:48.037577"], ["last_sign_in_at", "2020-11-25 06:32:11.758113"], ["updated_at", "2020-11-25 06:32:48.038244"], ["id", 1]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 286ms (Views: 0.2ms | ActiveRecord: 31.2ms | Allocations: 25801)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:32:48 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `p'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:21:in `remove_cart_item'
Completed 500 Internal Server Error in 81ms (ActiveRecord: 2.1ms | Allocations: 3599)



ArgumentError - wrong number of arguments (given 0, expected 1):
  app/controllers/api/v1/api_controller.rb:23:in `render_not_found'
  app/controllers/api/v1/carts_controller.rb:21:in `remove_cart_item'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:33:14 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"5_lYO9_cN6lz9v0npPKydQ\\\":{\\\"token\\\":\\\"$2a$10$zioxJjCxZDf45SD2C3UmMuLzfo2ey5M5pei/HpeQZfL7YsYO/2CcW\\\",\\\"expiry\\\":1669357898},\\\"r4XcX0wWcqTXAM1tPh481Q\\\":{\\\"token\\\":\\\"$2a$10$Jz73OyI0XTCvME4cqCH8dO.TljwcE8L8opujV3mLEGqWrEBP4qIdS\\\",\\\"expiry\\\":1669357921},\\\"02T2s1RUXf5kvUVbQf_wSg\\\":{\\\"token\\\":\\\"$2a$10$PPKjjus8ty2/PPQf9y2NIuOXK/jFNK/OFqOsGnA/EOiiZ9SB8Y2Vq\\\",\\\"expiry\\\":1669357931},\\\"t2PtlyDZjX-_9MR8nibMnw\\\":{\\\"token\\\":\\\"$2a$10$VPP2AhQNzQ3.entDX.KgOeNH/o5zlFeQFnkDSw8zeTfAHtYtDQvqe\\\",\\\"expiry\\\":1669357968},\\\"B-g5gwHH9qjsDU_m7PfKmw\\\":{\\\"token\\\":\\\"$2a$10$rHG9A6NRp97p2SZnVXndS.TSCbJyMHA166HJPBmLgbqR6Xu6c7k56\\\",\\\"expiry\\\":1669357995}}\""], ["updated_at", "2020-11-25 06:33:15.123487"], ["id", 1]]
  [1m[35m (32.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 187], ["current_sign_in_at", "2020-11-25 06:33:15.159390"], ["last_sign_in_at", "2020-11-25 06:32:48.037577"], ["updated_at", "2020-11-25 06:33:15.159874"], ["id", 1]]
  [1m[35m (61.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 340ms (Views: 0.2ms | ActiveRecord: 98.7ms | Allocations: 25786)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:33:15 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>1}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 82ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 4575)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:33:39 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"r4XcX0wWcqTXAM1tPh481Q\\\":{\\\"token\\\":\\\"$2a$10$Jz73OyI0XTCvME4cqCH8dO.TljwcE8L8opujV3mLEGqWrEBP4qIdS\\\",\\\"expiry\\\":1669357921},\\\"02T2s1RUXf5kvUVbQf_wSg\\\":{\\\"token\\\":\\\"$2a$10$PPKjjus8ty2/PPQf9y2NIuOXK/jFNK/OFqOsGnA/EOiiZ9SB8Y2Vq\\\",\\\"expiry\\\":1669357931},\\\"t2PtlyDZjX-_9MR8nibMnw\\\":{\\\"token\\\":\\\"$2a$10$VPP2AhQNzQ3.entDX.KgOeNH/o5zlFeQFnkDSw8zeTfAHtYtDQvqe\\\",\\\"expiry\\\":1669357968},\\\"B-g5gwHH9qjsDU_m7PfKmw\\\":{\\\"token\\\":\\\"$2a$10$rHG9A6NRp97p2SZnVXndS.TSCbJyMHA166HJPBmLgbqR6Xu6c7k56\\\",\\\"expiry\\\":1669357995},\\\"dy-cCeeO_AHDv0h3lgylPw\\\":{\\\"token\\\":\\\"$2a$10$3CLXAGi8urR80r9ipvZkde9vG8xsxnpuw3EQg.HZnC5Z/LdC9LsXi\\\",\\\"expiry\\\":1669358019}}\""], ["updated_at", "2020-11-25 06:33:39.739958"], ["id", 1]]
  [1m[35m (380.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 188], ["current_sign_in_at", "2020-11-25 06:33:40.124289"], ["last_sign_in_at", "2020-11-25 06:33:15.159390"], ["updated_at", "2020-11-25 06:33:40.124931"], ["id", 1]]
  [1m[35m (59.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 683ms (Views: 0.3ms | ActiveRecord: 445.0ms | Allocations: 25789)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:33:40 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>1}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 77ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 4580)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:33:57 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"02T2s1RUXf5kvUVbQf_wSg\\\":{\\\"token\\\":\\\"$2a$10$PPKjjus8ty2/PPQf9y2NIuOXK/jFNK/OFqOsGnA/EOiiZ9SB8Y2Vq\\\",\\\"expiry\\\":1669357931},\\\"t2PtlyDZjX-_9MR8nibMnw\\\":{\\\"token\\\":\\\"$2a$10$VPP2AhQNzQ3.entDX.KgOeNH/o5zlFeQFnkDSw8zeTfAHtYtDQvqe\\\",\\\"expiry\\\":1669357968},\\\"B-g5gwHH9qjsDU_m7PfKmw\\\":{\\\"token\\\":\\\"$2a$10$rHG9A6NRp97p2SZnVXndS.TSCbJyMHA166HJPBmLgbqR6Xu6c7k56\\\",\\\"expiry\\\":1669357995},\\\"dy-cCeeO_AHDv0h3lgylPw\\\":{\\\"token\\\":\\\"$2a$10$3CLXAGi8urR80r9ipvZkde9vG8xsxnpuw3EQg.HZnC5Z/LdC9LsXi\\\",\\\"expiry\\\":1669358019},\\\"pyzpQj0fAFIKRkBj9d6kiA\\\":{\\\"token\\\":\\\"$2a$10$xfuYD/ViW0xceXwnjnzyOeQSLnT6ZD4Viald9ptYJPnpgl1a/nmvm\\\",\\\"expiry\\\":1669358037}}\""], ["updated_at", "2020-11-25 06:33:57.542726"], ["id", 1]]
  [1m[35m (56.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 189], ["current_sign_in_at", "2020-11-25 06:33:57.604848"], ["last_sign_in_at", "2020-11-25 06:33:40.124289"], ["updated_at", "2020-11-25 06:33:57.605451"], ["id", 1]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 292ms (Views: 0.2ms | ActiveRecord: 61.2ms | Allocations: 15018)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:33:57 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>5}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" IS NULL[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 80ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 4015)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:34:24 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"t2PtlyDZjX-_9MR8nibMnw\\\":{\\\"token\\\":\\\"$2a$10$VPP2AhQNzQ3.entDX.KgOeNH/o5zlFeQFnkDSw8zeTfAHtYtDQvqe\\\",\\\"expiry\\\":1669357968},\\\"B-g5gwHH9qjsDU_m7PfKmw\\\":{\\\"token\\\":\\\"$2a$10$rHG9A6NRp97p2SZnVXndS.TSCbJyMHA166HJPBmLgbqR6Xu6c7k56\\\",\\\"expiry\\\":1669357995},\\\"dy-cCeeO_AHDv0h3lgylPw\\\":{\\\"token\\\":\\\"$2a$10$3CLXAGi8urR80r9ipvZkde9vG8xsxnpuw3EQg.HZnC5Z/LdC9LsXi\\\",\\\"expiry\\\":1669358019},\\\"pyzpQj0fAFIKRkBj9d6kiA\\\":{\\\"token\\\":\\\"$2a$10$xfuYD/ViW0xceXwnjnzyOeQSLnT6ZD4Viald9ptYJPnpgl1a/nmvm\\\",\\\"expiry\\\":1669358037},\\\"kApXIz67M0mC66V7vdFcLQ\\\":{\\\"token\\\":\\\"$2a$10$HmWO9Gl6SCobKvGp1dxVIOoI5UHNnMwoz8OCElCZh6rloeZDmbYrO\\\",\\\"expiry\\\":1669358065}}\""], ["updated_at", "2020-11-25 06:34:25.009620"], ["id", 1]]
  [1m[35m (26.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 190], ["current_sign_in_at", "2020-11-25 06:34:25.039694"], ["last_sign_in_at", "2020-11-25 06:33:57.604848"], ["updated_at", "2020-11-25 06:34:25.040142"], ["id", 1]]
  [1m[35m (77.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 353ms (Views: 0.3ms | ActiveRecord: 108.3ms | Allocations: 25785)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:34:25 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>5}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2[0m  [["user_id", 1], ["store_id", 5]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'
Completed 500 Internal Server Error in 93ms (ActiveRecord: 3.4ms | Allocations: 8565)



NoMethodError - undefined method `id' for #<Cart::ActiveRecord_Relation:0x00007f069862a390>
Did you mean?  ids:
  app/controllers/api/v1/carts_controller.rb:21:in `remove_cart_item'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:34:39 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"B-g5gwHH9qjsDU_m7PfKmw\\\":{\\\"token\\\":\\\"$2a$10$rHG9A6NRp97p2SZnVXndS.TSCbJyMHA166HJPBmLgbqR6Xu6c7k56\\\",\\\"expiry\\\":1669357995},\\\"dy-cCeeO_AHDv0h3lgylPw\\\":{\\\"token\\\":\\\"$2a$10$3CLXAGi8urR80r9ipvZkde9vG8xsxnpuw3EQg.HZnC5Z/LdC9LsXi\\\",\\\"expiry\\\":1669358019},\\\"pyzpQj0fAFIKRkBj9d6kiA\\\":{\\\"token\\\":\\\"$2a$10$xfuYD/ViW0xceXwnjnzyOeQSLnT6ZD4Viald9ptYJPnpgl1a/nmvm\\\",\\\"expiry\\\":1669358037},\\\"kApXIz67M0mC66V7vdFcLQ\\\":{\\\"token\\\":\\\"$2a$10$HmWO9Gl6SCobKvGp1dxVIOoI5UHNnMwoz8OCElCZh6rloeZDmbYrO\\\",\\\"expiry\\\":1669358065},\\\"bsTlUke1VI4HtE5dLxpxPg\\\":{\\\"token\\\":\\\"$2a$10$JI3uAJB1nkS3187tRx46Y.2JoEr4FGciFuuW3ItNI3ZM0M1wFpsQm\\\",\\\"expiry\\\":1669358080}}\""], ["updated_at", "2020-11-25 06:34:40.262909"], ["id", 1]]
  [1m[35m (26.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 191], ["current_sign_in_at", "2020-11-25 06:34:40.301215"], ["last_sign_in_at", "2020-11-25 06:34:25.039694"], ["updated_at", "2020-11-25 06:34:40.301888"], ["id", 1]]
  [1m[35m (67.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 349ms (Views: 0.3ms | ActiveRecord: 98.6ms | Allocations: 25770)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:34:40 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>5}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" ASC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
Completed 500 Internal Server Error in 92ms (ActiveRecord: 2.9ms | Allocations: 7359)



NoMethodError - undefined method `id' for nil:NilClass:
  app/controllers/api/v1/carts_controller.rb:21:in `remove_cart_item'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:35:27 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"dy-cCeeO_AHDv0h3lgylPw\\\":{\\\"token\\\":\\\"$2a$10$3CLXAGi8urR80r9ipvZkde9vG8xsxnpuw3EQg.HZnC5Z/LdC9LsXi\\\",\\\"expiry\\\":1669358019},\\\"pyzpQj0fAFIKRkBj9d6kiA\\\":{\\\"token\\\":\\\"$2a$10$xfuYD/ViW0xceXwnjnzyOeQSLnT6ZD4Viald9ptYJPnpgl1a/nmvm\\\",\\\"expiry\\\":1669358037},\\\"kApXIz67M0mC66V7vdFcLQ\\\":{\\\"token\\\":\\\"$2a$10$HmWO9Gl6SCobKvGp1dxVIOoI5UHNnMwoz8OCElCZh6rloeZDmbYrO\\\",\\\"expiry\\\":1669358065},\\\"bsTlUke1VI4HtE5dLxpxPg\\\":{\\\"token\\\":\\\"$2a$10$JI3uAJB1nkS3187tRx46Y.2JoEr4FGciFuuW3ItNI3ZM0M1wFpsQm\\\",\\\"expiry\\\":1669358080},\\\"WydijXGDABRKS5V34BFIFA\\\":{\\\"token\\\":\\\"$2a$10$2xJ3c3VPQdWJAl699BOuS.KwrA7uZdUbKLhj81H1e3NCfYer5l0rW\\\",\\\"expiry\\\":1669358127}}\""], ["updated_at", "2020-11-25 06:35:27.520638"], ["id", 1]]
  [1m[35m (51.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 192], ["current_sign_in_at", "2020-11-25 06:35:27.576502"], ["last_sign_in_at", "2020-11-25 06:34:40.301215"], ["updated_at", "2020-11-25 06:35:27.577165"], ["id", 1]]
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 311ms (Views: 0.3ms | ActiveRecord: 58.8ms | Allocations: 25786)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:35:27 +0700

SyntaxError - syntax error, unexpected '.'
... owner_type: 'Cart', item_id: .id).first
...                              ^
:
  app/controllers/api/v1/carts_controller.rb:22:in `'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:35:40 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"pyzpQj0fAFIKRkBj9d6kiA\\\":{\\\"token\\\":\\\"$2a$10$xfuYD/ViW0xceXwnjnzyOeQSLnT6ZD4Viald9ptYJPnpgl1a/nmvm\\\",\\\"expiry\\\":1669358037},\\\"kApXIz67M0mC66V7vdFcLQ\\\":{\\\"token\\\":\\\"$2a$10$HmWO9Gl6SCobKvGp1dxVIOoI5UHNnMwoz8OCElCZh6rloeZDmbYrO\\\",\\\"expiry\\\":1669358065},\\\"bsTlUke1VI4HtE5dLxpxPg\\\":{\\\"token\\\":\\\"$2a$10$JI3uAJB1nkS3187tRx46Y.2JoEr4FGciFuuW3ItNI3ZM0M1wFpsQm\\\",\\\"expiry\\\":1669358080},\\\"WydijXGDABRKS5V34BFIFA\\\":{\\\"token\\\":\\\"$2a$10$2xJ3c3VPQdWJAl699BOuS.KwrA7uZdUbKLhj81H1e3NCfYer5l0rW\\\",\\\"expiry\\\":1669358127},\\\"jX2lc362A1Z179vqPISTfw\\\":{\\\"token\\\":\\\"$2a$10$KeniMFu9ariaAxWiSgmpW.LZ/Tewfo0iijeVyOzbdKTrMe3VNTS36\\\",\\\"expiry\\\":1669358141}}\""], ["updated_at", "2020-11-25 06:35:41.035214"], ["id", 1]]
  [1m[35m (14.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 193], ["current_sign_in_at", "2020-11-25 06:35:41.054993"], ["last_sign_in_at", "2020-11-25 06:35:27.576502"], ["updated_at", "2020-11-25 06:35:41.055598"], ["id", 1]]
  [1m[35m (12.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.3ms | ActiveRecord: 37.4ms | Allocations: 25769)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:35:41 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>5}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" ASC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 21], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `remove_cart_item'
  [1m[36mShoppingCartItem Update (21.8ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1 WHERE "shopping_cart_items"."id" = $2[0m  [["quantity", nil], ["id", 16]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `remove_cart_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 130ms (Views: 0.2ms | ActiveRecord: 29.4ms | Allocations: 19850)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:35:46 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"kApXIz67M0mC66V7vdFcLQ\\\":{\\\"token\\\":\\\"$2a$10$HmWO9Gl6SCobKvGp1dxVIOoI5UHNnMwoz8OCElCZh6rloeZDmbYrO\\\",\\\"expiry\\\":1669358065},\\\"bsTlUke1VI4HtE5dLxpxPg\\\":{\\\"token\\\":\\\"$2a$10$JI3uAJB1nkS3187tRx46Y.2JoEr4FGciFuuW3ItNI3ZM0M1wFpsQm\\\",\\\"expiry\\\":1669358080},\\\"WydijXGDABRKS5V34BFIFA\\\":{\\\"token\\\":\\\"$2a$10$2xJ3c3VPQdWJAl699BOuS.KwrA7uZdUbKLhj81H1e3NCfYer5l0rW\\\",\\\"expiry\\\":1669358127},\\\"jX2lc362A1Z179vqPISTfw\\\":{\\\"token\\\":\\\"$2a$10$KeniMFu9ariaAxWiSgmpW.LZ/Tewfo0iijeVyOzbdKTrMe3VNTS36\\\",\\\"expiry\\\":1669358141},\\\"HxZ27KKdSr0lppv8Trdqvg\\\":{\\\"token\\\":\\\"$2a$10$x8BIz0x6WDN0bNl3LWXh3OZXTJddMXl0X0WaqZyUiGxrp1L5pXf3S\\\",\\\"expiry\\\":1669358146}}\""], ["updated_at", "2020-11-25 06:35:46.320509"], ["id", 1]]
  [1m[35m (22.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 194], ["current_sign_in_at", "2020-11-25 06:35:46.346892"], ["last_sign_in_at", "2020-11-25 06:35:41.054993"], ["updated_at", "2020-11-25 06:35:46.347345"], ["id", 1]]
  [1m[35m (82.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.2ms | ActiveRecord: 106.8ms | Allocations: 15018)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:35:46 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 100ms (Views: 0.1ms | ActiveRecord: 3.6ms | Allocations: 16030)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:36:16 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"bsTlUke1VI4HtE5dLxpxPg\\\":{\\\"token\\\":\\\"$2a$10$JI3uAJB1nkS3187tRx46Y.2JoEr4FGciFuuW3ItNI3ZM0M1wFpsQm\\\",\\\"expiry\\\":1669358080},\\\"WydijXGDABRKS5V34BFIFA\\\":{\\\"token\\\":\\\"$2a$10$2xJ3c3VPQdWJAl699BOuS.KwrA7uZdUbKLhj81H1e3NCfYer5l0rW\\\",\\\"expiry\\\":1669358127},\\\"jX2lc362A1Z179vqPISTfw\\\":{\\\"token\\\":\\\"$2a$10$KeniMFu9ariaAxWiSgmpW.LZ/Tewfo0iijeVyOzbdKTrMe3VNTS36\\\",\\\"expiry\\\":1669358141},\\\"HxZ27KKdSr0lppv8Trdqvg\\\":{\\\"token\\\":\\\"$2a$10$x8BIz0x6WDN0bNl3LWXh3OZXTJddMXl0X0WaqZyUiGxrp1L5pXf3S\\\",\\\"expiry\\\":1669358146},\\\"UR7lM8R3TbJIvyVJnji1yw\\\":{\\\"token\\\":\\\"$2a$10$KV4NyY/HaIN6A3nkFahIDewaTJB7ppijIjhAuyQBJfyN81cm/KuK6\\\",\\\"expiry\\\":1669358177}}\""], ["updated_at", "2020-11-25 06:36:17.139913"], ["id", 1]]
  [1m[35m (20.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 195], ["current_sign_in_at", "2020-11-25 06:36:17.167462"], ["last_sign_in_at", "2020-11-25 06:35:46.346892"], ["updated_at", "2020-11-25 06:36:17.168174"], ["id", 1]]
  [1m[35m (11.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 287ms (Views: 0.4ms | ActiveRecord: 35.8ms | Allocations: 25801)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:36:17 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>5}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" ASC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 21], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `remove_cart_item'
  [1m[36mShoppingCartItem Update (13.6ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1 WHERE "shopping_cart_items"."id" = $2[0m  [["quantity", 1], ["id", 16]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `remove_cart_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 130ms (Views: 0.3ms | ActiveRecord: 21.6ms | Allocations: 19802)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:36:31 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"WydijXGDABRKS5V34BFIFA\\\":{\\\"token\\\":\\\"$2a$10$2xJ3c3VPQdWJAl699BOuS.KwrA7uZdUbKLhj81H1e3NCfYer5l0rW\\\",\\\"expiry\\\":1669358127},\\\"jX2lc362A1Z179vqPISTfw\\\":{\\\"token\\\":\\\"$2a$10$KeniMFu9ariaAxWiSgmpW.LZ/Tewfo0iijeVyOzbdKTrMe3VNTS36\\\",\\\"expiry\\\":1669358141},\\\"HxZ27KKdSr0lppv8Trdqvg\\\":{\\\"token\\\":\\\"$2a$10$x8BIz0x6WDN0bNl3LWXh3OZXTJddMXl0X0WaqZyUiGxrp1L5pXf3S\\\",\\\"expiry\\\":1669358146},\\\"UR7lM8R3TbJIvyVJnji1yw\\\":{\\\"token\\\":\\\"$2a$10$KV4NyY/HaIN6A3nkFahIDewaTJB7ppijIjhAuyQBJfyN81cm/KuK6\\\",\\\"expiry\\\":1669358177},\\\"QYDVWzhLP7pzyFtaQtfZBQ\\\":{\\\"token\\\":\\\"$2a$10$FNUlDsDj5Q0zTIfsWkwphueTe8w7vmRdVqhzsAYr5pLZejdWtFzO6\\\",\\\"expiry\\\":1669358191}}\""], ["updated_at", "2020-11-25 06:36:31.391632"], ["id", 1]]
  [1m[35m (25.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 196], ["current_sign_in_at", "2020-11-25 06:36:31.420945"], ["last_sign_in_at", "2020-11-25 06:36:17.167462"], ["updated_at", "2020-11-25 06:36:31.421443"], ["id", 1]]
  [1m[35m (60.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.2ms | ActiveRecord: 88.3ms | Allocations: 15018)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:36:31 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 112ms (Views: 0.4ms | ActiveRecord: 3.7ms | Allocations: 16028)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:36:42 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"jX2lc362A1Z179vqPISTfw\\\":{\\\"token\\\":\\\"$2a$10$KeniMFu9ariaAxWiSgmpW.LZ/Tewfo0iijeVyOzbdKTrMe3VNTS36\\\",\\\"expiry\\\":1669358141},\\\"HxZ27KKdSr0lppv8Trdqvg\\\":{\\\"token\\\":\\\"$2a$10$x8BIz0x6WDN0bNl3LWXh3OZXTJddMXl0X0WaqZyUiGxrp1L5pXf3S\\\",\\\"expiry\\\":1669358146},\\\"UR7lM8R3TbJIvyVJnji1yw\\\":{\\\"token\\\":\\\"$2a$10$KV4NyY/HaIN6A3nkFahIDewaTJB7ppijIjhAuyQBJfyN81cm/KuK6\\\",\\\"expiry\\\":1669358177},\\\"QYDVWzhLP7pzyFtaQtfZBQ\\\":{\\\"token\\\":\\\"$2a$10$FNUlDsDj5Q0zTIfsWkwphueTe8w7vmRdVqhzsAYr5pLZejdWtFzO6\\\",\\\"expiry\\\":1669358191},\\\"31RtMfhhlxKWYJkVkmE0JA\\\":{\\\"token\\\":\\\"$2a$10$Q2dSIdAPOTbPfeCK6rBjhuX9QU16PzQelBocBu.IWu0etkeTu9mP2\\\",\\\"expiry\\\":1669358203}}\""], ["updated_at", "2020-11-25 06:36:43.130604"], ["id", 1]]
  [1m[35m (79.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 197], ["current_sign_in_at", "2020-11-25 06:36:43.214696"], ["last_sign_in_at", "2020-11-25 06:36:31.420945"], ["updated_at", "2020-11-25 06:36:43.215123"], ["id", 1]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.3ms | ActiveRecord: 84.6ms | Allocations: 15018)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 13:36:43 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 21], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.4ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 4], ["updated_at", "2020-11-25 06:36:43.366034"], ["id", 16]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (19.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 21], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mShoppingCartItem Update (75.0ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "notes" = $1 WHERE "shopping_cart_items"."id" = $2[0m  [["notes", "Beli yang banyak 90"], ["id", 16]]
  ↳ app/controllers/api/v1/carts_controller.rb:11:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 215ms (Views: 0.2ms | ActiveRecord: 99.6ms | Allocations: 19949)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:36:45 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"HxZ27KKdSr0lppv8Trdqvg\\\":{\\\"token\\\":\\\"$2a$10$x8BIz0x6WDN0bNl3LWXh3OZXTJddMXl0X0WaqZyUiGxrp1L5pXf3S\\\",\\\"expiry\\\":1669358146},\\\"UR7lM8R3TbJIvyVJnji1yw\\\":{\\\"token\\\":\\\"$2a$10$KV4NyY/HaIN6A3nkFahIDewaTJB7ppijIjhAuyQBJfyN81cm/KuK6\\\",\\\"expiry\\\":1669358177},\\\"QYDVWzhLP7pzyFtaQtfZBQ\\\":{\\\"token\\\":\\\"$2a$10$FNUlDsDj5Q0zTIfsWkwphueTe8w7vmRdVqhzsAYr5pLZejdWtFzO6\\\",\\\"expiry\\\":1669358191},\\\"31RtMfhhlxKWYJkVkmE0JA\\\":{\\\"token\\\":\\\"$2a$10$Q2dSIdAPOTbPfeCK6rBjhuX9QU16PzQelBocBu.IWu0etkeTu9mP2\\\",\\\"expiry\\\":1669358203},\\\"y0tGm7luoNO8YTBD093HNA\\\":{\\\"token\\\":\\\"$2a$10$42baJO3LVagGIIymnoGYn.GaoMM6S3e7g2BzBl1lIKSdkkipC8D0i\\\",\\\"expiry\\\":1669358206}}\""], ["updated_at", "2020-11-25 06:36:46.135916"], ["id", 1]]
  [1m[35m (58.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 198], ["current_sign_in_at", "2020-11-25 06:36:46.198243"], ["last_sign_in_at", "2020-11-25 06:36:43.214696"], ["updated_at", "2020-11-25 06:36:46.198853"], ["id", 1]]
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 304ms (Views: 0.2ms | ActiveRecord: 64.0ms | Allocations: 15017)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:36:46 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 84ms (Views: 0.1ms | ActiveRecord: 1.3ms | Allocations: 8665)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:36:52 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"UR7lM8R3TbJIvyVJnji1yw\\\":{\\\"token\\\":\\\"$2a$10$KV4NyY/HaIN6A3nkFahIDewaTJB7ppijIjhAuyQBJfyN81cm/KuK6\\\",\\\"expiry\\\":1669358177},\\\"QYDVWzhLP7pzyFtaQtfZBQ\\\":{\\\"token\\\":\\\"$2a$10$FNUlDsDj5Q0zTIfsWkwphueTe8w7vmRdVqhzsAYr5pLZejdWtFzO6\\\",\\\"expiry\\\":1669358191},\\\"31RtMfhhlxKWYJkVkmE0JA\\\":{\\\"token\\\":\\\"$2a$10$Q2dSIdAPOTbPfeCK6rBjhuX9QU16PzQelBocBu.IWu0etkeTu9mP2\\\",\\\"expiry\\\":1669358203},\\\"y0tGm7luoNO8YTBD093HNA\\\":{\\\"token\\\":\\\"$2a$10$42baJO3LVagGIIymnoGYn.GaoMM6S3e7g2BzBl1lIKSdkkipC8D0i\\\",\\\"expiry\\\":1669358206},\\\"9ae2bntZyJQJTufiTaJyVw\\\":{\\\"token\\\":\\\"$2a$10$q4Vx7yp56/.D8SRzCwDZC.kIV6Y/DciRNoITwNU2HCyTYZbP9QaVC\\\",\\\"expiry\\\":1669358212}}\""], ["updated_at", "2020-11-25 06:36:52.438928"], ["id", 1]]
  [1m[35m (34.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 199], ["current_sign_in_at", "2020-11-25 06:36:52.477383"], ["last_sign_in_at", "2020-11-25 06:36:46.198243"], ["updated_at", "2020-11-25 06:36:52.477946"], ["id", 1]]
  [1m[35m (71.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 338ms (Views: 0.3ms | ActiveRecord: 107.4ms | Allocations: 15017)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:36:52 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>5}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" ASC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'
  [1m[36mShoppingCartItem Load (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 21], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `remove_cart_item'
  [1m[36mShoppingCartItem Update (37.1ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1 WHERE "shopping_cart_items"."id" = $2[0m  [["quantity", 1], ["id", 16]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `remove_cart_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 123ms (Views: 0.2ms | ActiveRecord: 38.1ms | Allocations: 6170)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:36:57 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"QYDVWzhLP7pzyFtaQtfZBQ\\\":{\\\"token\\\":\\\"$2a$10$FNUlDsDj5Q0zTIfsWkwphueTe8w7vmRdVqhzsAYr5pLZejdWtFzO6\\\",\\\"expiry\\\":1669358191},\\\"31RtMfhhlxKWYJkVkmE0JA\\\":{\\\"token\\\":\\\"$2a$10$Q2dSIdAPOTbPfeCK6rBjhuX9QU16PzQelBocBu.IWu0etkeTu9mP2\\\",\\\"expiry\\\":1669358203},\\\"y0tGm7luoNO8YTBD093HNA\\\":{\\\"token\\\":\\\"$2a$10$42baJO3LVagGIIymnoGYn.GaoMM6S3e7g2BzBl1lIKSdkkipC8D0i\\\",\\\"expiry\\\":1669358206},\\\"9ae2bntZyJQJTufiTaJyVw\\\":{\\\"token\\\":\\\"$2a$10$q4Vx7yp56/.D8SRzCwDZC.kIV6Y/DciRNoITwNU2HCyTYZbP9QaVC\\\",\\\"expiry\\\":1669358212},\\\"ra5w1yfzRHNC0WUVEw64uw\\\":{\\\"token\\\":\\\"$2a$10$/nnod4Nz0CGKbsWhCE7uZOZcdbGPxiULkPJbY3jngwtvNKmNyrQwi\\\",\\\"expiry\\\":1669358217}}\""], ["updated_at", "2020-11-25 06:36:57.228123"], ["id", 1]]
  [1m[35m (26.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 200], ["current_sign_in_at", "2020-11-25 06:36:57.258582"], ["last_sign_in_at", "2020-11-25 06:36:52.477383"], ["updated_at", "2020-11-25 06:36:57.259009"], ["id", 1]]
  [1m[35m (50.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 313ms (Views: 0.6ms | ActiveRecord: 79.2ms | Allocations: 15017)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:36:57 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 84ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 8669)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:37:35 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"31RtMfhhlxKWYJkVkmE0JA\\\":{\\\"token\\\":\\\"$2a$10$Q2dSIdAPOTbPfeCK6rBjhuX9QU16PzQelBocBu.IWu0etkeTu9mP2\\\",\\\"expiry\\\":1669358203},\\\"y0tGm7luoNO8YTBD093HNA\\\":{\\\"token\\\":\\\"$2a$10$42baJO3LVagGIIymnoGYn.GaoMM6S3e7g2BzBl1lIKSdkkipC8D0i\\\",\\\"expiry\\\":1669358206},\\\"9ae2bntZyJQJTufiTaJyVw\\\":{\\\"token\\\":\\\"$2a$10$q4Vx7yp56/.D8SRzCwDZC.kIV6Y/DciRNoITwNU2HCyTYZbP9QaVC\\\",\\\"expiry\\\":1669358212},\\\"ra5w1yfzRHNC0WUVEw64uw\\\":{\\\"token\\\":\\\"$2a$10$/nnod4Nz0CGKbsWhCE7uZOZcdbGPxiULkPJbY3jngwtvNKmNyrQwi\\\",\\\"expiry\\\":1669358217},\\\"Azj-uHVIJSb7-M4waOoGIw\\\":{\\\"token\\\":\\\"$2a$10$Y0b4Ovct86g63WZWq770oOpKPGlCcgFgSG3Jq0V4YC0Yrw5BY2XtK\\\",\\\"expiry\\\":1669358256}}\""], ["updated_at", "2020-11-25 06:37:36.093310"], ["id", 1]]
  [1m[35m (20.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 201], ["current_sign_in_at", "2020-11-25 06:37:36.120883"], ["last_sign_in_at", "2020-11-25 06:36:57.258582"], ["updated_at", "2020-11-25 06:37:36.121593"], ["id", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 291ms (Views: 0.2ms | ActiveRecord: 32.7ms | Allocations: 25819)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:37:36 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mShoppingCartItem Load (0.5ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 137ms (Views: 0.2ms | ActiveRecord: 11.2ms | Allocations: 30339)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:37:42 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"y0tGm7luoNO8YTBD093HNA\\\":{\\\"token\\\":\\\"$2a$10$42baJO3LVagGIIymnoGYn.GaoMM6S3e7g2BzBl1lIKSdkkipC8D0i\\\",\\\"expiry\\\":1669358206},\\\"9ae2bntZyJQJTufiTaJyVw\\\":{\\\"token\\\":\\\"$2a$10$q4Vx7yp56/.D8SRzCwDZC.kIV6Y/DciRNoITwNU2HCyTYZbP9QaVC\\\",\\\"expiry\\\":1669358212},\\\"ra5w1yfzRHNC0WUVEw64uw\\\":{\\\"token\\\":\\\"$2a$10$/nnod4Nz0CGKbsWhCE7uZOZcdbGPxiULkPJbY3jngwtvNKmNyrQwi\\\",\\\"expiry\\\":1669358217},\\\"Azj-uHVIJSb7-M4waOoGIw\\\":{\\\"token\\\":\\\"$2a$10$Y0b4Ovct86g63WZWq770oOpKPGlCcgFgSG3Jq0V4YC0Yrw5BY2XtK\\\",\\\"expiry\\\":1669358256},\\\"4CgAVKtZQoSZJNoNRMLNvw\\\":{\\\"token\\\":\\\"$2a$10$dVB0QuwJwiGiZiLXpTpCi.F2aCnPms9FEW/AChaO5wFxcAkVT9iGe\\\",\\\"expiry\\\":1669358262}}\""], ["updated_at", "2020-11-25 06:37:42.417357"], ["id", 1]]
  [1m[35m (56.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 202], ["current_sign_in_at", "2020-11-25 06:37:42.478625"], ["last_sign_in_at", "2020-11-25 06:37:36.120883"], ["updated_at", "2020-11-25 06:37:42.479103"], ["id", 1]]
  [1m[35m (70.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 361ms (Views: 0.3ms | ActiveRecord: 128.6ms | Allocations: 15018)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:37:42 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>1, "store_id"=>5}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" ASC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:18:in `remove_cart_item'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 21], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:22:in `remove_cart_item'
  [1m[36mShoppingCartItem Update (14.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1 WHERE "shopping_cart_items"."id" = $2[0m  [["quantity", 0], ["id", 16]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `remove_cart_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 102ms (Views: 0.3ms | ActiveRecord: 15.5ms | Allocations: 6333)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:37:45 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"9ae2bntZyJQJTufiTaJyVw\\\":{\\\"token\\\":\\\"$2a$10$q4Vx7yp56/.D8SRzCwDZC.kIV6Y/DciRNoITwNU2HCyTYZbP9QaVC\\\",\\\"expiry\\\":1669358212},\\\"ra5w1yfzRHNC0WUVEw64uw\\\":{\\\"token\\\":\\\"$2a$10$/nnod4Nz0CGKbsWhCE7uZOZcdbGPxiULkPJbY3jngwtvNKmNyrQwi\\\",\\\"expiry\\\":1669358217},\\\"Azj-uHVIJSb7-M4waOoGIw\\\":{\\\"token\\\":\\\"$2a$10$Y0b4Ovct86g63WZWq770oOpKPGlCcgFgSG3Jq0V4YC0Yrw5BY2XtK\\\",\\\"expiry\\\":1669358256},\\\"4CgAVKtZQoSZJNoNRMLNvw\\\":{\\\"token\\\":\\\"$2a$10$dVB0QuwJwiGiZiLXpTpCi.F2aCnPms9FEW/AChaO5wFxcAkVT9iGe\\\",\\\"expiry\\\":1669358262},\\\"jmC5APBMuEGbsXe5o17Iyw\\\":{\\\"token\\\":\\\"$2a$10$rOgZmjLYyjyQVy6j3P5NvOcEfHGtXxg8StG5hcTJaC7thpuTP7YN2\\\",\\\"expiry\\\":1669358265}}\""], ["updated_at", "2020-11-25 06:37:45.660465"], ["id", 1]]
  [1m[35m (47.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 203], ["current_sign_in_at", "2020-11-25 06:37:45.714518"], ["last_sign_in_at", "2020-11-25 06:37:42.478625"], ["updated_at", "2020-11-25 06:37:45.715121"], ["id", 1]]
  [1m[35m (55.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 341ms (Views: 0.2ms | ActiveRecord: 105.1ms | Allocations: 15017)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:37:45 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:42:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 93ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 8666)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:41:15 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"ra5w1yfzRHNC0WUVEw64uw\\\":{\\\"token\\\":\\\"$2a$10$/nnod4Nz0CGKbsWhCE7uZOZcdbGPxiULkPJbY3jngwtvNKmNyrQwi\\\",\\\"expiry\\\":1669358217},\\\"Azj-uHVIJSb7-M4waOoGIw\\\":{\\\"token\\\":\\\"$2a$10$Y0b4Ovct86g63WZWq770oOpKPGlCcgFgSG3Jq0V4YC0Yrw5BY2XtK\\\",\\\"expiry\\\":1669358256},\\\"4CgAVKtZQoSZJNoNRMLNvw\\\":{\\\"token\\\":\\\"$2a$10$dVB0QuwJwiGiZiLXpTpCi.F2aCnPms9FEW/AChaO5wFxcAkVT9iGe\\\",\\\"expiry\\\":1669358262},\\\"jmC5APBMuEGbsXe5o17Iyw\\\":{\\\"token\\\":\\\"$2a$10$rOgZmjLYyjyQVy6j3P5NvOcEfHGtXxg8StG5hcTJaC7thpuTP7YN2\\\",\\\"expiry\\\":1669358265},\\\"Je9XRfGTjf98IvYzlpeSYA\\\":{\\\"token\\\":\\\"$2a$10$zlxIg4RN53ZfFSP.TFxe6uYbDdrtIaI/Fjwf19/nV./aqrSJLBnyK\\\",\\\"expiry\\\":1669358476}}\""], ["updated_at", "2020-11-25 06:41:16.387225"], ["id", 1]]
  [1m[35m (96.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 204], ["current_sign_in_at", "2020-11-25 06:41:16.489866"], ["last_sign_in_at", "2020-11-25 06:37:45.714518"], ["updated_at", "2020-11-25 06:41:16.490473"], ["id", 1]]
  [1m[35m (73.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 437ms (Views: 0.3ms | ActiveRecord: 175.6ms | Allocations: 25817)


Started POST "/api/v1/remove_cart_item" for ::1 at 2020-11-25 13:41:16 +0700
Processing by Api::V1::CartsController#remove_cart_item as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>0, "store_id"=>5}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 ORDER BY "carts"."id" ASC LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:19:in `remove_cart_item'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:20:in `remove_cart_item'
  [1m[36mShoppingCartItem Load (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 21], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:23:in `remove_cart_item'
  [1m[36mShoppingCartItem Destroy (54.6ms)[0m  [1m[31mDELETE FROM "shopping_cart_items" WHERE "shopping_cart_items"."id" = $1[0m  [["id", 16]]
  ↳ app/controllers/api/v1/carts_controller.rb:27:in `remove_cart_item'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 166ms (Views: 0.2ms | ActiveRecord: 62.0ms | Allocations: 19792)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:41:27 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Azj-uHVIJSb7-M4waOoGIw\\\":{\\\"token\\\":\\\"$2a$10$Y0b4Ovct86g63WZWq770oOpKPGlCcgFgSG3Jq0V4YC0Yrw5BY2XtK\\\",\\\"expiry\\\":1669358256},\\\"4CgAVKtZQoSZJNoNRMLNvw\\\":{\\\"token\\\":\\\"$2a$10$dVB0QuwJwiGiZiLXpTpCi.F2aCnPms9FEW/AChaO5wFxcAkVT9iGe\\\",\\\"expiry\\\":1669358262},\\\"jmC5APBMuEGbsXe5o17Iyw\\\":{\\\"token\\\":\\\"$2a$10$rOgZmjLYyjyQVy6j3P5NvOcEfHGtXxg8StG5hcTJaC7thpuTP7YN2\\\",\\\"expiry\\\":1669358265},\\\"Je9XRfGTjf98IvYzlpeSYA\\\":{\\\"token\\\":\\\"$2a$10$zlxIg4RN53ZfFSP.TFxe6uYbDdrtIaI/Fjwf19/nV./aqrSJLBnyK\\\",\\\"expiry\\\":1669358476},\\\"fhPCkCPc0ACrNnAgmtkQ0w\\\":{\\\"token\\\":\\\"$2a$10$2UyxLuKnsZJIoCtpmXYGRux47HLbx/.MJ09uc346YkkMoZjk82PV.\\\",\\\"expiry\\\":1669358487}}\""], ["updated_at", "2020-11-25 06:41:27.687826"], ["id", 1]]
  [1m[35m (35.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 205], ["current_sign_in_at", "2020-11-25 06:41:27.727007"], ["last_sign_in_at", "2020-11-25 06:41:16.489866"], ["updated_at", "2020-11-25 06:41:27.727450"], ["id", 1]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 269ms (Views: 0.3ms | ActiveRecord: 42.6ms | Allocations: 15018)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:41:27 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 97ms (Views: 0.1ms | ActiveRecord: 3.4ms | Allocations: 13298)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:41:53 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"4CgAVKtZQoSZJNoNRMLNvw\\\":{\\\"token\\\":\\\"$2a$10$dVB0QuwJwiGiZiLXpTpCi.F2aCnPms9FEW/AChaO5wFxcAkVT9iGe\\\",\\\"expiry\\\":1669358262},\\\"jmC5APBMuEGbsXe5o17Iyw\\\":{\\\"token\\\":\\\"$2a$10$rOgZmjLYyjyQVy6j3P5NvOcEfHGtXxg8StG5hcTJaC7thpuTP7YN2\\\",\\\"expiry\\\":1669358265},\\\"Je9XRfGTjf98IvYzlpeSYA\\\":{\\\"token\\\":\\\"$2a$10$zlxIg4RN53ZfFSP.TFxe6uYbDdrtIaI/Fjwf19/nV./aqrSJLBnyK\\\",\\\"expiry\\\":1669358476},\\\"fhPCkCPc0ACrNnAgmtkQ0w\\\":{\\\"token\\\":\\\"$2a$10$2UyxLuKnsZJIoCtpmXYGRux47HLbx/.MJ09uc346YkkMoZjk82PV.\\\",\\\"expiry\\\":1669358487},\\\"ELZPpUT8m6JAsHvgmOhkaQ\\\":{\\\"token\\\":\\\"$2a$10$0kh2kGffrxOUxvykVgn/tO3EBT1cXrblj340lhNjcPw/mLsGbA9Wi\\\",\\\"expiry\\\":1669358513}}\""], ["updated_at", "2020-11-25 06:41:53.380638"], ["id", 1]]
  [1m[35m (25.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 206], ["current_sign_in_at", "2020-11-25 06:41:53.409440"], ["last_sign_in_at", "2020-11-25 06:41:27.727007"], ["updated_at", "2020-11-25 06:41:53.410067"], ["id", 1]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 253ms (Views: 0.3ms | ActiveRecord: 29.9ms | Allocations: 15017)


Started DELETE "/api/v1/remove_carts" for ::1 at 2020-11-25 13:41:53 +0700
Processing by Api::V1::CartsController#remove_carts as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts"."id" FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:35:in `remove_carts'
  [1m[36mShoppingCartItem Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 21], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:36:in `block in remove_carts'
  [1m[36mCart Destroy (21.6ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:38:in `remove_carts'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 100ms (Views: 0.1ms | ActiveRecord: 22.5ms | Allocations: 5184)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:44:18 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"jmC5APBMuEGbsXe5o17Iyw\\\":{\\\"token\\\":\\\"$2a$10$rOgZmjLYyjyQVy6j3P5NvOcEfHGtXxg8StG5hcTJaC7thpuTP7YN2\\\",\\\"expiry\\\":1669358265},\\\"Je9XRfGTjf98IvYzlpeSYA\\\":{\\\"token\\\":\\\"$2a$10$zlxIg4RN53ZfFSP.TFxe6uYbDdrtIaI/Fjwf19/nV./aqrSJLBnyK\\\",\\\"expiry\\\":1669358476},\\\"fhPCkCPc0ACrNnAgmtkQ0w\\\":{\\\"token\\\":\\\"$2a$10$2UyxLuKnsZJIoCtpmXYGRux47HLbx/.MJ09uc346YkkMoZjk82PV.\\\",\\\"expiry\\\":1669358487},\\\"ELZPpUT8m6JAsHvgmOhkaQ\\\":{\\\"token\\\":\\\"$2a$10$0kh2kGffrxOUxvykVgn/tO3EBT1cXrblj340lhNjcPw/mLsGbA9Wi\\\",\\\"expiry\\\":1669358513},\\\"JKgAeAwtgS8dAs7dMBfayg\\\":{\\\"token\\\":\\\"$2a$10$sBQmE1xRVJ2gvD/xSiMlCOeQVukVQc5HIkFIppsbkD46nkxAksX2m\\\",\\\"expiry\\\":1669358658}}\""], ["updated_at", "2020-11-25 06:44:18.251632"], ["id", 1]]
  [1m[35m (28.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 207], ["current_sign_in_at", "2020-11-25 06:44:18.284286"], ["last_sign_in_at", "2020-11-25 06:41:53.409440"], ["updated_at", "2020-11-25 06:44:18.285018"], ["id", 1]]
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 272ms (Views: 0.3ms | ActiveRecord: 43.4ms | Allocations: 15017)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:44:18 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 93ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 4024)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:44:26 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Je9XRfGTjf98IvYzlpeSYA\\\":{\\\"token\\\":\\\"$2a$10$zlxIg4RN53ZfFSP.TFxe6uYbDdrtIaI/Fjwf19/nV./aqrSJLBnyK\\\",\\\"expiry\\\":1669358476},\\\"fhPCkCPc0ACrNnAgmtkQ0w\\\":{\\\"token\\\":\\\"$2a$10$2UyxLuKnsZJIoCtpmXYGRux47HLbx/.MJ09uc346YkkMoZjk82PV.\\\",\\\"expiry\\\":1669358487},\\\"ELZPpUT8m6JAsHvgmOhkaQ\\\":{\\\"token\\\":\\\"$2a$10$0kh2kGffrxOUxvykVgn/tO3EBT1cXrblj340lhNjcPw/mLsGbA9Wi\\\",\\\"expiry\\\":1669358513},\\\"JKgAeAwtgS8dAs7dMBfayg\\\":{\\\"token\\\":\\\"$2a$10$sBQmE1xRVJ2gvD/xSiMlCOeQVukVQc5HIkFIppsbkD46nkxAksX2m\\\",\\\"expiry\\\":1669358658},\\\"DdmE002X1N9tPBVbiISdZw\\\":{\\\"token\\\":\\\"$2a$10$XS.sj5dnZEMSFKwJFQLhtOmnt9UzfZVapyRIDq7wNKt65T3yNG7wK\\\",\\\"expiry\\\":1669358666}}\""], ["updated_at", "2020-11-25 06:44:26.472827"], ["id", 1]]
  [1m[35m (28.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 208], ["current_sign_in_at", "2020-11-25 06:44:26.504392"], ["last_sign_in_at", "2020-11-25 06:44:18.284286"], ["updated_at", "2020-11-25 06:44:26.504854"], ["id", 1]]
  [1m[35m (61.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 316ms (Views: 0.3ms | ActiveRecord: 91.1ms | Allocations: 15018)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 13:44:26 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 5], ["created_at", "2020-11-25 06:44:26.690580"], ["updated_at", "2020-11-25 06:44:26.690580"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (19.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 23], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.4ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 23], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 42], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-25 06:44:26.745582"], ["updated_at", "2020-11-25 06:44:26.745582"]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (55.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 23], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mShoppingCartItem Update (6.7ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "notes" = $1 WHERE "shopping_cart_items"."id" = $2[0m  [["notes", "Beli yang banyak 90"], ["id", 17]]
  ↳ app/controllers/api/v1/carts_controller.rb:11:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 214ms (Views: 0.3ms | ActiveRecord: 86.2ms | Allocations: 30525)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:44:29 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"fhPCkCPc0ACrNnAgmtkQ0w\\\":{\\\"token\\\":\\\"$2a$10$2UyxLuKnsZJIoCtpmXYGRux47HLbx/.MJ09uc346YkkMoZjk82PV.\\\",\\\"expiry\\\":1669358487},\\\"ELZPpUT8m6JAsHvgmOhkaQ\\\":{\\\"token\\\":\\\"$2a$10$0kh2kGffrxOUxvykVgn/tO3EBT1cXrblj340lhNjcPw/mLsGbA9Wi\\\",\\\"expiry\\\":1669358513},\\\"JKgAeAwtgS8dAs7dMBfayg\\\":{\\\"token\\\":\\\"$2a$10$sBQmE1xRVJ2gvD/xSiMlCOeQVukVQc5HIkFIppsbkD46nkxAksX2m\\\",\\\"expiry\\\":1669358658},\\\"DdmE002X1N9tPBVbiISdZw\\\":{\\\"token\\\":\\\"$2a$10$XS.sj5dnZEMSFKwJFQLhtOmnt9UzfZVapyRIDq7wNKt65T3yNG7wK\\\",\\\"expiry\\\":1669358666},\\\"lN3O2uoUznWBinvD2JNlnQ\\\":{\\\"token\\\":\\\"$2a$10$ibllovRfWdpQKpqyS3TBc.ifn/u9H9LUDMruTOx1J..sbWISC5Thq\\\",\\\"expiry\\\":1669358670}}\""], ["updated_at", "2020-11-25 06:44:30.215455"], ["id", 1]]
  [1m[35m (49.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 209], ["current_sign_in_at", "2020-11-25 06:44:30.268307"], ["last_sign_in_at", "2020-11-25 06:44:26.504392"], ["updated_at", "2020-11-25 06:44:30.268812"], ["id", 1]]
  [1m[35m (24.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 304ms (Views: 0.2ms | ActiveRecord: 75.1ms | Allocations: 15017)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:44:30 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 85ms (Views: 0.1ms | ActiveRecord: 1.2ms | Allocations: 8881)


  [1m[35m (16.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2997034632337992540)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProductIdToShoppingCartItem (20201125064616)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2997034632337992540)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2997034632337992540)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProductIdToShoppingCartItem (20201125064616)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (71.7ms)[0m  [1m[35mALTER TABLE "shopping_cart_items" ADD "product_id" integer[0m
  [1m[35m (224.8ms)[0m  [1m[35mCREATE  INDEX  "index_shopping_cart_items_on_product_id" ON "shopping_cart_items"  ("product_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201125064616"]]
  [1m[35m (161.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (87.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2997034632337992540)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:47:55 +0700
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"ELZPpUT8m6JAsHvgmOhkaQ\\\":{\\\"token\\\":\\\"$2a$10$0kh2kGffrxOUxvykVgn/tO3EBT1cXrblj340lhNjcPw/mLsGbA9Wi\\\",\\\"expiry\\\":1669358513},\\\"JKgAeAwtgS8dAs7dMBfayg\\\":{\\\"token\\\":\\\"$2a$10$sBQmE1xRVJ2gvD/xSiMlCOeQVukVQc5HIkFIppsbkD46nkxAksX2m\\\",\\\"expiry\\\":1669358658},\\\"DdmE002X1N9tPBVbiISdZw\\\":{\\\"token\\\":\\\"$2a$10$XS.sj5dnZEMSFKwJFQLhtOmnt9UzfZVapyRIDq7wNKt65T3yNG7wK\\\",\\\"expiry\\\":1669358666},\\\"lN3O2uoUznWBinvD2JNlnQ\\\":{\\\"token\\\":\\\"$2a$10$ibllovRfWdpQKpqyS3TBc.ifn/u9H9LUDMruTOx1J..sbWISC5Thq\\\",\\\"expiry\\\":1669358670},\\\"K5AJLV0mrafDgzWRLDEihw\\\":{\\\"token\\\":\\\"$2a$10$0h9gjwsbvmIe/b0hMjG4Y.bKEz8FYlhSVRPiih1PM.dEI0SikpZAK\\\",\\\"expiry\\\":1669358876}}\""], ["updated_at", "2020-11-25 06:47:56.360919"], ["id", 1]]
  [1m[35m (45.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 210], ["current_sign_in_at", "2020-11-25 06:47:56.411215"], ["last_sign_in_at", "2020-11-25 06:44:30.268307"], ["updated_at", "2020-11-25 06:47:56.411848"], ["id", 1]]
  [1m[35m (26.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 321ms (Views: 0.2ms | ActiveRecord: 76.1ms | Allocations: 25785)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 13:47:56 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (1.0ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 23], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 23], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Update (0.3ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "quantity" = $1, "updated_at" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["quantity", 6], ["updated_at", "2020-11-25 06:47:56.638252"], ["id", 17]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (14.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.7ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 23], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 23], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mShoppingCartItem Update (6.9ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "notes" = $1, "product_id" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["notes", "Beli yang banyak 90"], ["product_id", 5], ["id", 17]]
  ↳ app/controllers/api/v1/carts_controller.rb:11:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 180ms (Views: 0.3ms | ActiveRecord: 36.4ms | Allocations: 43602)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:47:59 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"JKgAeAwtgS8dAs7dMBfayg\\\":{\\\"token\\\":\\\"$2a$10$sBQmE1xRVJ2gvD/xSiMlCOeQVukVQc5HIkFIppsbkD46nkxAksX2m\\\",\\\"expiry\\\":1669358658},\\\"DdmE002X1N9tPBVbiISdZw\\\":{\\\"token\\\":\\\"$2a$10$XS.sj5dnZEMSFKwJFQLhtOmnt9UzfZVapyRIDq7wNKt65T3yNG7wK\\\",\\\"expiry\\\":1669358666},\\\"lN3O2uoUznWBinvD2JNlnQ\\\":{\\\"token\\\":\\\"$2a$10$ibllovRfWdpQKpqyS3TBc.ifn/u9H9LUDMruTOx1J..sbWISC5Thq\\\",\\\"expiry\\\":1669358670},\\\"K5AJLV0mrafDgzWRLDEihw\\\":{\\\"token\\\":\\\"$2a$10$0h9gjwsbvmIe/b0hMjG4Y.bKEz8FYlhSVRPiih1PM.dEI0SikpZAK\\\",\\\"expiry\\\":1669358876},\\\"LdaE5vO9nGewWUdvi1e7IA\\\":{\\\"token\\\":\\\"$2a$10$zpuv.sd4pk5r5wBkh8mZQOvW8/ryjggnLtF5SdFIWRTmxf78OygY.\\\",\\\"expiry\\\":1669358879}}\""], ["updated_at", "2020-11-25 06:47:59.637006"], ["id", 1]]
  [1m[35m (55.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 211], ["current_sign_in_at", "2020-11-25 06:47:59.696079"], ["last_sign_in_at", "2020-11-25 06:47:56.411215"], ["updated_at", "2020-11-25 06:47:59.696527"], ["id", 1]]
  [1m[35m (59.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 348ms (Views: 0.3ms | ActiveRecord: 116.3ms | Allocations: 15018)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:47:59 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.9ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 93ms (Views: 0.1ms | ActiveRecord: 2.2ms | Allocations: 12806)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:48:21 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"DdmE002X1N9tPBVbiISdZw\\\":{\\\"token\\\":\\\"$2a$10$XS.sj5dnZEMSFKwJFQLhtOmnt9UzfZVapyRIDq7wNKt65T3yNG7wK\\\",\\\"expiry\\\":1669358666},\\\"lN3O2uoUznWBinvD2JNlnQ\\\":{\\\"token\\\":\\\"$2a$10$ibllovRfWdpQKpqyS3TBc.ifn/u9H9LUDMruTOx1J..sbWISC5Thq\\\",\\\"expiry\\\":1669358670},\\\"K5AJLV0mrafDgzWRLDEihw\\\":{\\\"token\\\":\\\"$2a$10$0h9gjwsbvmIe/b0hMjG4Y.bKEz8FYlhSVRPiih1PM.dEI0SikpZAK\\\",\\\"expiry\\\":1669358876},\\\"LdaE5vO9nGewWUdvi1e7IA\\\":{\\\"token\\\":\\\"$2a$10$zpuv.sd4pk5r5wBkh8mZQOvW8/ryjggnLtF5SdFIWRTmxf78OygY.\\\",\\\"expiry\\\":1669358879},\\\"Yg74lu83KQkqDYUXjTWsKg\\\":{\\\"token\\\":\\\"$2a$10$ENFndGbOkvLkbpqLKnplF.tpWlTxCKveWfw4dc90dV/FLAyRNLkCK\\\",\\\"expiry\\\":1669358902}}\""], ["updated_at", "2020-11-25 06:48:22.205091"], ["id", 1]]
  [1m[35m (18.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 212], ["current_sign_in_at", "2020-11-25 06:48:22.228327"], ["last_sign_in_at", "2020-11-25 06:47:59.696079"], ["updated_at", "2020-11-25 06:48:22.229010"], ["id", 1]]
  [1m[35m (11.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 285ms (Views: 0.2ms | ActiveRecord: 34.7ms | Allocations: 25802)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:48:22 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 127ms (Views: 0.2ms | ActiveRecord: 9.3ms | Allocations: 31088)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:48:52 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"lN3O2uoUznWBinvD2JNlnQ\\\":{\\\"token\\\":\\\"$2a$10$ibllovRfWdpQKpqyS3TBc.ifn/u9H9LUDMruTOx1J..sbWISC5Thq\\\",\\\"expiry\\\":1669358670},\\\"K5AJLV0mrafDgzWRLDEihw\\\":{\\\"token\\\":\\\"$2a$10$0h9gjwsbvmIe/b0hMjG4Y.bKEz8FYlhSVRPiih1PM.dEI0SikpZAK\\\",\\\"expiry\\\":1669358876},\\\"LdaE5vO9nGewWUdvi1e7IA\\\":{\\\"token\\\":\\\"$2a$10$zpuv.sd4pk5r5wBkh8mZQOvW8/ryjggnLtF5SdFIWRTmxf78OygY.\\\",\\\"expiry\\\":1669358879},\\\"Yg74lu83KQkqDYUXjTWsKg\\\":{\\\"token\\\":\\\"$2a$10$ENFndGbOkvLkbpqLKnplF.tpWlTxCKveWfw4dc90dV/FLAyRNLkCK\\\",\\\"expiry\\\":1669358902},\\\"2bEc4BlrrBRdA52PZEotzg\\\":{\\\"token\\\":\\\"$2a$10$ksVWff1Pyr35BmQzqMEJauw2k45E0Zav7r2099rHEZD7GQ8Wef01e\\\",\\\"expiry\\\":1669358932}}\""], ["updated_at", "2020-11-25 06:48:52.844567"], ["id", 1]]
  [1m[35m (19.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 213], ["current_sign_in_at", "2020-11-25 06:48:52.870453"], ["last_sign_in_at", "2020-11-25 06:48:22.228327"], ["updated_at", "2020-11-25 06:48:52.871050"], ["id", 1]]
  [1m[35m (11.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 294ms (Views: 0.3ms | ActiveRecord: 35.2ms | Allocations: 25801)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:48:52 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 134ms (Views: 0.1ms | ActiveRecord: 11.5ms | Allocations: 30884)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:49:27 +0700
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"K5AJLV0mrafDgzWRLDEihw\\\":{\\\"token\\\":\\\"$2a$10$0h9gjwsbvmIe/b0hMjG4Y.bKEz8FYlhSVRPiih1PM.dEI0SikpZAK\\\",\\\"expiry\\\":1669358876},\\\"LdaE5vO9nGewWUdvi1e7IA\\\":{\\\"token\\\":\\\"$2a$10$zpuv.sd4pk5r5wBkh8mZQOvW8/ryjggnLtF5SdFIWRTmxf78OygY.\\\",\\\"expiry\\\":1669358879},\\\"Yg74lu83KQkqDYUXjTWsKg\\\":{\\\"token\\\":\\\"$2a$10$ENFndGbOkvLkbpqLKnplF.tpWlTxCKveWfw4dc90dV/FLAyRNLkCK\\\",\\\"expiry\\\":1669358902},\\\"2bEc4BlrrBRdA52PZEotzg\\\":{\\\"token\\\":\\\"$2a$10$ksVWff1Pyr35BmQzqMEJauw2k45E0Zav7r2099rHEZD7GQ8Wef01e\\\",\\\"expiry\\\":1669358932},\\\"ALHZylw9aIT9p04BT9MjiQ\\\":{\\\"token\\\":\\\"$2a$10$KR94UGQXqd./hKlBIqtbuO2j5ql4AGRJDffTB.s6ret.sYeK1VEse\\\",\\\"expiry\\\":1669358967}}\""], ["updated_at", "2020-11-25 06:49:27.675338"], ["id", 1]]
  [1m[35m (11.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 214], ["current_sign_in_at", "2020-11-25 06:49:27.700334"], ["last_sign_in_at", "2020-11-25 06:48:52.870453"], ["updated_at", "2020-11-25 06:49:27.701449"], ["id", 1]]
  [1m[35m (54.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 342ms (Views: 0.4ms | ActiveRecord: 73.3ms | Allocations: 27476)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:49:27 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.4ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 166ms (Views: 0.2ms | ActiveRecord: 11.6ms | Allocations: 33274)


  [1m[36mShoppingCartItem Load (0.7ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" ORDER BY "shopping_cart_items"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:50:25 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"LdaE5vO9nGewWUdvi1e7IA\\\":{\\\"token\\\":\\\"$2a$10$zpuv.sd4pk5r5wBkh8mZQOvW8/ryjggnLtF5SdFIWRTmxf78OygY.\\\",\\\"expiry\\\":1669358879},\\\"Yg74lu83KQkqDYUXjTWsKg\\\":{\\\"token\\\":\\\"$2a$10$ENFndGbOkvLkbpqLKnplF.tpWlTxCKveWfw4dc90dV/FLAyRNLkCK\\\",\\\"expiry\\\":1669358902},\\\"2bEc4BlrrBRdA52PZEotzg\\\":{\\\"token\\\":\\\"$2a$10$ksVWff1Pyr35BmQzqMEJauw2k45E0Zav7r2099rHEZD7GQ8Wef01e\\\",\\\"expiry\\\":1669358932},\\\"ALHZylw9aIT9p04BT9MjiQ\\\":{\\\"token\\\":\\\"$2a$10$KR94UGQXqd./hKlBIqtbuO2j5ql4AGRJDffTB.s6ret.sYeK1VEse\\\",\\\"expiry\\\":1669358967},\\\"hBgPHRQnjXc4P4iZJ4yt3A\\\":{\\\"token\\\":\\\"$2a$10$W3nhoDUDmoCT5a/S/DzdCOCx7BkHH7vaYievq89lPrnCEHsDMcTUm\\\",\\\"expiry\\\":1669359025}}\""], ["updated_at", "2020-11-25 06:50:25.904642"], ["id", 1]]
  [1m[35m (16.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 215], ["current_sign_in_at", "2020-11-25 06:50:25.927195"], ["last_sign_in_at", "2020-11-25 06:49:27.700334"], ["updated_at", "2020-11-25 06:50:25.928443"], ["id", 1]]
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 289ms (Views: 0.2ms | ActiveRecord: 31.9ms | Allocations: 25789)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:50:25 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "product_variants"."id" FROM "product_variants" WHERE "product_variants"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 174ms (Views: 0.1ms | ActiveRecord: 14.3ms | Allocations: 40251)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:51:23 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Yg74lu83KQkqDYUXjTWsKg\\\":{\\\"token\\\":\\\"$2a$10$ENFndGbOkvLkbpqLKnplF.tpWlTxCKveWfw4dc90dV/FLAyRNLkCK\\\",\\\"expiry\\\":1669358902},\\\"2bEc4BlrrBRdA52PZEotzg\\\":{\\\"token\\\":\\\"$2a$10$ksVWff1Pyr35BmQzqMEJauw2k45E0Zav7r2099rHEZD7GQ8Wef01e\\\",\\\"expiry\\\":1669358932},\\\"ALHZylw9aIT9p04BT9MjiQ\\\":{\\\"token\\\":\\\"$2a$10$KR94UGQXqd./hKlBIqtbuO2j5ql4AGRJDffTB.s6ret.sYeK1VEse\\\",\\\"expiry\\\":1669358967},\\\"hBgPHRQnjXc4P4iZJ4yt3A\\\":{\\\"token\\\":\\\"$2a$10$W3nhoDUDmoCT5a/S/DzdCOCx7BkHH7vaYievq89lPrnCEHsDMcTUm\\\",\\\"expiry\\\":1669359025},\\\"-DnVnt_V9lbtTe5SuPSuaw\\\":{\\\"token\\\":\\\"$2a$10$MvClEl2lNU47S.yjFYM5L.bUEbQ3NMU8rsSGMTYTV31xOK/x3F.Qm\\\",\\\"expiry\\\":1669359083}}\""], ["updated_at", "2020-11-25 06:51:23.944998"], ["id", 1]]
  [1m[35m (18.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 216], ["current_sign_in_at", "2020-11-25 06:51:23.967669"], ["last_sign_in_at", "2020-11-25 06:50:25.927195"], ["updated_at", "2020-11-25 06:51:23.968365"], ["id", 1]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 278ms (Views: 0.2ms | ActiveRecord: 26.0ms | Allocations: 25791)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:51:24 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:34:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:34:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 166ms (Views: 0.2ms | ActiveRecord: 12.7ms | Allocations: 37382)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:52:11 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"2bEc4BlrrBRdA52PZEotzg\\\":{\\\"token\\\":\\\"$2a$10$ksVWff1Pyr35BmQzqMEJauw2k45E0Zav7r2099rHEZD7GQ8Wef01e\\\",\\\"expiry\\\":1669358932},\\\"ALHZylw9aIT9p04BT9MjiQ\\\":{\\\"token\\\":\\\"$2a$10$KR94UGQXqd./hKlBIqtbuO2j5ql4AGRJDffTB.s6ret.sYeK1VEse\\\",\\\"expiry\\\":1669358967},\\\"hBgPHRQnjXc4P4iZJ4yt3A\\\":{\\\"token\\\":\\\"$2a$10$W3nhoDUDmoCT5a/S/DzdCOCx7BkHH7vaYievq89lPrnCEHsDMcTUm\\\",\\\"expiry\\\":1669359025},\\\"-DnVnt_V9lbtTe5SuPSuaw\\\":{\\\"token\\\":\\\"$2a$10$MvClEl2lNU47S.yjFYM5L.bUEbQ3NMU8rsSGMTYTV31xOK/x3F.Qm\\\",\\\"expiry\\\":1669359083},\\\"rYS21UWdKMYts5wWk4uU5A\\\":{\\\"token\\\":\\\"$2a$10$jKXvAj.ojNN4z3aKJI3Td.186Nx4lf4NZs.4YaLPMIcZpEzywsIpW\\\",\\\"expiry\\\":1669359131}}\""], ["updated_at", "2020-11-25 06:52:11.943733"], ["id", 1]]
  [1m[35m (122.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 217], ["current_sign_in_at", "2020-11-25 06:52:12.071551"], ["last_sign_in_at", "2020-11-25 06:51:23.967669"], ["updated_at", "2020-11-25 06:52:12.072091"], ["id", 1]]
  [1m[35m (37.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 426ms (Views: 0.2ms | ActiveRecord: 164.8ms | Allocations: 25807)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:52:12 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.1ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:34:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:34:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 153ms (Views: 0.1ms | ActiveRecord: 12.9ms | Allocations: 37486)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:52:35 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"ALHZylw9aIT9p04BT9MjiQ\\\":{\\\"token\\\":\\\"$2a$10$KR94UGQXqd./hKlBIqtbuO2j5ql4AGRJDffTB.s6ret.sYeK1VEse\\\",\\\"expiry\\\":1669358967},\\\"hBgPHRQnjXc4P4iZJ4yt3A\\\":{\\\"token\\\":\\\"$2a$10$W3nhoDUDmoCT5a/S/DzdCOCx7BkHH7vaYievq89lPrnCEHsDMcTUm\\\",\\\"expiry\\\":1669359025},\\\"-DnVnt_V9lbtTe5SuPSuaw\\\":{\\\"token\\\":\\\"$2a$10$MvClEl2lNU47S.yjFYM5L.bUEbQ3NMU8rsSGMTYTV31xOK/x3F.Qm\\\",\\\"expiry\\\":1669359083},\\\"rYS21UWdKMYts5wWk4uU5A\\\":{\\\"token\\\":\\\"$2a$10$jKXvAj.ojNN4z3aKJI3Td.186Nx4lf4NZs.4YaLPMIcZpEzywsIpW\\\",\\\"expiry\\\":1669359131},\\\"IBabM5z-I0qjFWVa5GZmOQ\\\":{\\\"token\\\":\\\"$2a$10$zVG894JoYvpUdcw1ptO9M.gJc.Maem5wopsbGFApJEqdr1mTzhQou\\\",\\\"expiry\\\":1669359155}}\""], ["updated_at", "2020-11-25 06:52:35.462386"], ["id", 1]]
  [1m[35m (27.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 218], ["current_sign_in_at", "2020-11-25 06:52:35.495736"], ["last_sign_in_at", "2020-11-25 06:52:12.071551"], ["updated_at", "2020-11-25 06:52:35.496454"], ["id", 1]]
  [1m[35m (18.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 303ms (Views: 0.4ms | ActiveRecord: 50.9ms | Allocations: 25822)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:52:35 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.4ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:34:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:34:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 155ms (Views: 0.2ms | ActiveRecord: 15.0ms | Allocations: 37350)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:52:49 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"hBgPHRQnjXc4P4iZJ4yt3A\\\":{\\\"token\\\":\\\"$2a$10$W3nhoDUDmoCT5a/S/DzdCOCx7BkHH7vaYievq89lPrnCEHsDMcTUm\\\",\\\"expiry\\\":1669359025},\\\"-DnVnt_V9lbtTe5SuPSuaw\\\":{\\\"token\\\":\\\"$2a$10$MvClEl2lNU47S.yjFYM5L.bUEbQ3NMU8rsSGMTYTV31xOK/x3F.Qm\\\",\\\"expiry\\\":1669359083},\\\"rYS21UWdKMYts5wWk4uU5A\\\":{\\\"token\\\":\\\"$2a$10$jKXvAj.ojNN4z3aKJI3Td.186Nx4lf4NZs.4YaLPMIcZpEzywsIpW\\\",\\\"expiry\\\":1669359131},\\\"IBabM5z-I0qjFWVa5GZmOQ\\\":{\\\"token\\\":\\\"$2a$10$zVG894JoYvpUdcw1ptO9M.gJc.Maem5wopsbGFApJEqdr1mTzhQou\\\",\\\"expiry\\\":1669359155},\\\"GXMKVEddUdghTP8pXM2sgA\\\":{\\\"token\\\":\\\"$2a$10$g4HEOIB0FlkEZgvEaFzD0u0AoDGAuw8mrmELx98MQKfNmVhu.QGua\\\",\\\"expiry\\\":1669359170}}\""], ["updated_at", "2020-11-25 06:52:50.121019"], ["id", 1]]
  [1m[35m (473.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 219], ["current_sign_in_at", "2020-11-25 06:52:50.598325"], ["last_sign_in_at", "2020-11-25 06:52:35.495736"], ["updated_at", "2020-11-25 06:52:50.598856"], ["id", 1]]
  [1m[35m (28.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 745ms (Views: 0.3ms | ActiveRecord: 505.7ms | Allocations: 25805)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:52:50 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.4ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:34:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:34:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 166ms (Views: 0.2ms | ActiveRecord: 16.1ms | Allocations: 37367)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 13:53:39 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"-DnVnt_V9lbtTe5SuPSuaw\\\":{\\\"token\\\":\\\"$2a$10$MvClEl2lNU47S.yjFYM5L.bUEbQ3NMU8rsSGMTYTV31xOK/x3F.Qm\\\",\\\"expiry\\\":1669359083},\\\"rYS21UWdKMYts5wWk4uU5A\\\":{\\\"token\\\":\\\"$2a$10$jKXvAj.ojNN4z3aKJI3Td.186Nx4lf4NZs.4YaLPMIcZpEzywsIpW\\\",\\\"expiry\\\":1669359131},\\\"IBabM5z-I0qjFWVa5GZmOQ\\\":{\\\"token\\\":\\\"$2a$10$zVG894JoYvpUdcw1ptO9M.gJc.Maem5wopsbGFApJEqdr1mTzhQou\\\",\\\"expiry\\\":1669359155},\\\"GXMKVEddUdghTP8pXM2sgA\\\":{\\\"token\\\":\\\"$2a$10$g4HEOIB0FlkEZgvEaFzD0u0AoDGAuw8mrmELx98MQKfNmVhu.QGua\\\",\\\"expiry\\\":1669359170},\\\"BzauEksMmrvLAs5L2k0Aow\\\":{\\\"token\\\":\\\"$2a$10$oes0PsxBVcHJ3.O2MgiR2eNppS4PN2iztbUETvqtz2xBlA159yvgG\\\",\\\"expiry\\\":1669359219}}\""], ["updated_at", "2020-11-25 06:53:39.924311"], ["id", 1]]
  [1m[35m (111.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 220], ["current_sign_in_at", "2020-11-25 06:53:40.040002"], ["last_sign_in_at", "2020-11-25 06:52:50.598325"], ["updated_at", "2020-11-25 06:53:40.040441"], ["id", 1]]
  [1m[35m (77.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 455ms (Views: 0.7ms | ActiveRecord: 193.4ms | Allocations: 25802)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 13:53:40 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 23], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:31:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:31:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 207ms (Views: 0.2ms | ActiveRecord: 13.5ms | Allocations: 37516)


  [1m[36mCart Destroy (39.5ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mShoppingCartItem Destroy (30.1ms)[0m  [1m[31mDELETE FROM "shopping_cart_items"[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:00:26 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"rYS21UWdKMYts5wWk4uU5A\\\":{\\\"token\\\":\\\"$2a$10$jKXvAj.ojNN4z3aKJI3Td.186Nx4lf4NZs.4YaLPMIcZpEzywsIpW\\\",\\\"expiry\\\":1669359131},\\\"IBabM5z-I0qjFWVa5GZmOQ\\\":{\\\"token\\\":\\\"$2a$10$zVG894JoYvpUdcw1ptO9M.gJc.Maem5wopsbGFApJEqdr1mTzhQou\\\",\\\"expiry\\\":1669359155},\\\"GXMKVEddUdghTP8pXM2sgA\\\":{\\\"token\\\":\\\"$2a$10$g4HEOIB0FlkEZgvEaFzD0u0AoDGAuw8mrmELx98MQKfNmVhu.QGua\\\",\\\"expiry\\\":1669359170},\\\"BzauEksMmrvLAs5L2k0Aow\\\":{\\\"token\\\":\\\"$2a$10$oes0PsxBVcHJ3.O2MgiR2eNppS4PN2iztbUETvqtz2xBlA159yvgG\\\",\\\"expiry\\\":1669359219},\\\"2NAYIQ0bYWfWWPxzRgTAuA\\\":{\\\"token\\\":\\\"$2a$10$nBfJlMdbPRzK8rpmNgexM.3cXRKEygiWeOCUNABThfqXVlOxTvV4a\\\",\\\"expiry\\\":1669359626}}\""], ["updated_at", "2020-11-25 07:00:27.004652"], ["id", 1]]
  [1m[35m (23.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 221], ["current_sign_in_at", "2020-11-25 07:00:27.036918"], ["last_sign_in_at", "2020-11-25 06:53:40.040002"], ["updated_at", "2020-11-25 07:00:27.037602"], ["id", 1]]
  [1m[35m (54.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 336ms (Views: 0.3ms | ActiveRecord: 80.8ms | Allocations: 15188)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 14:00:27 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.4ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCACHE Store Load (0.0ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("user_id", "store_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["store_id", 5], ["created_at", "2020-11-25 07:00:27.251692"], ["updated_at", "2020-11-25 07:00:27.251692"]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[35m (19.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 24], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 24], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
Completed 500 Internal Server Error in 148ms (ActiveRecord: 22.4ms | Allocations: 19274)



NoMethodError - undefined method `update_columns' for nil:NilClass:
  app/controllers/api/v1/carts_controller.rb:11:in `add_to_cart'

Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:01:10 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"IBabM5z-I0qjFWVa5GZmOQ\\\":{\\\"token\\\":\\\"$2a$10$zVG894JoYvpUdcw1ptO9M.gJc.Maem5wopsbGFApJEqdr1mTzhQou\\\",\\\"expiry\\\":1669359155},\\\"GXMKVEddUdghTP8pXM2sgA\\\":{\\\"token\\\":\\\"$2a$10$g4HEOIB0FlkEZgvEaFzD0u0AoDGAuw8mrmELx98MQKfNmVhu.QGua\\\",\\\"expiry\\\":1669359170},\\\"BzauEksMmrvLAs5L2k0Aow\\\":{\\\"token\\\":\\\"$2a$10$oes0PsxBVcHJ3.O2MgiR2eNppS4PN2iztbUETvqtz2xBlA159yvgG\\\",\\\"expiry\\\":1669359219},\\\"2NAYIQ0bYWfWWPxzRgTAuA\\\":{\\\"token\\\":\\\"$2a$10$nBfJlMdbPRzK8rpmNgexM.3cXRKEygiWeOCUNABThfqXVlOxTvV4a\\\",\\\"expiry\\\":1669359626},\\\"icvB9jaTvp-Bj0lamaFWDA\\\":{\\\"token\\\":\\\"$2a$10$1eeQy3GdQcoKFjgMoBEz5eYPM6y0p0.UeFMnECbN9kscrtql8LEpq\\\",\\\"expiry\\\":1669359670}}\""], ["updated_at", "2020-11-25 07:01:10.707826"], ["id", 1]]
  [1m[35m (198.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 222], ["current_sign_in_at", "2020-11-25 07:01:10.919218"], ["last_sign_in_at", "2020-11-25 07:00:27.036918"], ["updated_at", "2020-11-25 07:01:10.920152"], ["id", 1]]
  [1m[35m (15.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 468ms (Views: 0.4ms | ActiveRecord: 220.8ms | Allocations: 25927)


Started POST "/api/v1/add_to_cart" for ::1 at 2020-11-25 14:01:10 +0700
Processing by Api::V1::CartsController#add_to_cart as JSON
  Parameters: {"cart"=>{"product_variant_id"=>42, "quantity"=>3, "store_id"=>5, "notes"=>"Beli yang banyak 90"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:42:in `find_cart'
  [1m[36mProductVariant Load (0.1ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:45:in `find_cart'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1 AND "carts"."store_id" = $2 LIMIT $3[0m  [["user_id", 1], ["store_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/api_controller.rb:46:in `find_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_type" = $3 AND "shopping_cart_items"."item_id" = $4 ORDER BY "shopping_cart_items"."id" ASC LIMIT $5[0m  [["owner_id", 24], ["owner_type", "Cart"], ["item_type", "ProductVariant"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mCACHE ProductVariant Load (0.0ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Create (0.3ms)[0m  [1m[32mINSERT INTO "shopping_cart_items" ("owner_id", "owner_type", "quantity", "item_id", "item_type", "price_currency", "price_cents", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["owner_id", 24], ["owner_type", "Cart"], ["quantity", 3], ["item_id", 42], ["item_type", "ProductVariant"], ["price_currency", "USD"], ["price_cents", "10000000.0"], ["created_at", "2020-11-25 07:01:11.112321"], ["updated_at", "2020-11-25 07:01:11.112321"]]
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[35m (81.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/carts_controller.rb:8:in `add_to_cart'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2 AND "shopping_cart_items"."item_id" = $3 ORDER BY "shopping_cart_items"."id" ASC LIMIT $4[0m  [["owner_id", 24], ["owner_type", "Cart"], ["item_id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:10:in `add_to_cart'
  [1m[36mShoppingCartItem Update (7.4ms)[0m  [1m[33mUPDATE "shopping_cart_items" SET "notes" = $1, "product_id" = $2 WHERE "shopping_cart_items"."id" = $3[0m  [["notes", "Beli yang banyak 90"], ["product_id", 5], ["id", 18]]
  ↳ app/controllers/api/v1/carts_controller.rb:11:in `add_to_cart'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 234ms (Views: 0.3ms | ActiveRecord: 102.6ms | Allocations: 39518)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:01:19 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"GXMKVEddUdghTP8pXM2sgA\\\":{\\\"token\\\":\\\"$2a$10$g4HEOIB0FlkEZgvEaFzD0u0AoDGAuw8mrmELx98MQKfNmVhu.QGua\\\",\\\"expiry\\\":1669359170},\\\"BzauEksMmrvLAs5L2k0Aow\\\":{\\\"token\\\":\\\"$2a$10$oes0PsxBVcHJ3.O2MgiR2eNppS4PN2iztbUETvqtz2xBlA159yvgG\\\",\\\"expiry\\\":1669359219},\\\"2NAYIQ0bYWfWWPxzRgTAuA\\\":{\\\"token\\\":\\\"$2a$10$nBfJlMdbPRzK8rpmNgexM.3cXRKEygiWeOCUNABThfqXVlOxTvV4a\\\",\\\"expiry\\\":1669359626},\\\"icvB9jaTvp-Bj0lamaFWDA\\\":{\\\"token\\\":\\\"$2a$10$1eeQy3GdQcoKFjgMoBEz5eYPM6y0p0.UeFMnECbN9kscrtql8LEpq\\\",\\\"expiry\\\":1669359670},\\\"yUQciMJIcNI26Vtw3Ld7-A\\\":{\\\"token\\\":\\\"$2a$10$uQLO/iR4BkohaD0oouTByufphI7kOdDrEoOD/sqNJdfm45gd8BTvO\\\",\\\"expiry\\\":1669359680}}\""], ["updated_at", "2020-11-25 07:01:20.027311"], ["id", 1]]
  [1m[35m (53.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 223], ["current_sign_in_at", "2020-11-25 07:01:20.084443"], ["last_sign_in_at", "2020-11-25 07:01:10.919218"], ["updated_at", "2020-11-25 07:01:20.085126"], ["id", 1]]
  [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.3ms | ActiveRecord: 68.8ms | Allocations: 15018)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 14:01:20 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 24], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 24], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:31:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:31:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 96ms (Views: 0.1ms | ActiveRecord: 2.0ms | Allocations: 11605)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2997034632337992540)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateOrderStores (20201125053840)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (238.4ms)[0m  [1m[35mCREATE TABLE "order_stores" ("id" bigserial primary key, "order_id" integer, "store_id" integer, "store_order_number" character varying, "total" decimal, "status" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201125053840"]]
  [1m[35m (28.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOrderProducts (20201125053930)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (127.0ms)[0m  [1m[35mCREATE TABLE "order_products" ("id" bigserial primary key, "order_store_id" integer, "product_variant_id" integer, "price" decimal, "notes" text, "total" decimal, "quantity" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201125053930"]]
  [1m[35m (19.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2997034632337992540)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:38:57 +0700
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"BzauEksMmrvLAs5L2k0Aow\\\":{\\\"token\\\":\\\"$2a$10$oes0PsxBVcHJ3.O2MgiR2eNppS4PN2iztbUETvqtz2xBlA159yvgG\\\",\\\"expiry\\\":1669359219},\\\"2NAYIQ0bYWfWWPxzRgTAuA\\\":{\\\"token\\\":\\\"$2a$10$nBfJlMdbPRzK8rpmNgexM.3cXRKEygiWeOCUNABThfqXVlOxTvV4a\\\",\\\"expiry\\\":1669359626},\\\"icvB9jaTvp-Bj0lamaFWDA\\\":{\\\"token\\\":\\\"$2a$10$1eeQy3GdQcoKFjgMoBEz5eYPM6y0p0.UeFMnECbN9kscrtql8LEpq\\\",\\\"expiry\\\":1669359670},\\\"yUQciMJIcNI26Vtw3Ld7-A\\\":{\\\"token\\\":\\\"$2a$10$uQLO/iR4BkohaD0oouTByufphI7kOdDrEoOD/sqNJdfm45gd8BTvO\\\",\\\"expiry\\\":1669359680},\\\"RcWbsm74RyZzrucQmJ6rAg\\\":{\\\"token\\\":\\\"$2a$10$sa2tSuWSdb1p.6Y.0CnsEeurWM9ukrMlulex0dFWub69vGK4Vy0i6\\\",\\\"expiry\\\":1669361938}}\""], ["updated_at", "2020-11-25 07:38:58.369107"], ["id", 1]]
  [1m[35m (55.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 224], ["current_sign_in_at", "2020-11-25 07:38:58.449966"], ["last_sign_in_at", "2020-11-25 07:01:20.084443"], ["updated_at", "2020-11-25 07:38:58.450700"], ["id", 1]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 366ms (Views: 0.2ms | ActiveRecord: 67.8ms | Allocations: 27595)


Started GET "/api/v1/create_order" for ::1 at 2020-11-25 14:38:58 +0700
  
ActionController::RoutingError (No route matches [GET] "/api/v1/create_order"):
  
actionpack (6.0.3.3) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.3) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
request_store (1.5.0) lib/request_store/middleware.rb:19:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.3) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (5.1.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.3) lib/rails/engine.rb:527:in `call'
puma (5.0.2) lib/puma/configuration.rb:238:in `call'
puma (5.0.2) lib/puma/server.rb:638:in `block in handle_request'
puma (5.0.2) lib/puma/thread_pool.rb:337:in `with_force_shutdown'
puma (5.0.2) lib/puma/server.rb:637:in `handle_request'
puma (5.0.2) lib/puma/server.rb:394:in `process_client'
puma (5.0.2) lib/puma/server.rb:250:in `block in run'
puma (5.0.2) lib/puma/thread_pool.rb:145:in `block in spawn_thread'
Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:39:04 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"2NAYIQ0bYWfWWPxzRgTAuA\\\":{\\\"token\\\":\\\"$2a$10$nBfJlMdbPRzK8rpmNgexM.3cXRKEygiWeOCUNABThfqXVlOxTvV4a\\\",\\\"expiry\\\":1669359626},\\\"icvB9jaTvp-Bj0lamaFWDA\\\":{\\\"token\\\":\\\"$2a$10$1eeQy3GdQcoKFjgMoBEz5eYPM6y0p0.UeFMnECbN9kscrtql8LEpq\\\",\\\"expiry\\\":1669359670},\\\"yUQciMJIcNI26Vtw3Ld7-A\\\":{\\\"token\\\":\\\"$2a$10$uQLO/iR4BkohaD0oouTByufphI7kOdDrEoOD/sqNJdfm45gd8BTvO\\\",\\\"expiry\\\":1669359680},\\\"RcWbsm74RyZzrucQmJ6rAg\\\":{\\\"token\\\":\\\"$2a$10$sa2tSuWSdb1p.6Y.0CnsEeurWM9ukrMlulex0dFWub69vGK4Vy0i6\\\",\\\"expiry\\\":1669361938},\\\"1uKyGqet2xuT4_tP6SncAg\\\":{\\\"token\\\":\\\"$2a$10$jkYYuK89GLm2oIfcG4fWJeRjOIDehvjt4E5q1fKAA/wvA2lloFjgy\\\",\\\"expiry\\\":1669361944}}\""], ["updated_at", "2020-11-25 07:39:04.983356"], ["id", 1]]
  [1m[35m (21.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 225], ["current_sign_in_at", "2020-11-25 07:39:05.009242"], ["last_sign_in_at", "2020-11-25 07:38:58.449966"], ["updated_at", "2020-11-25 07:39:05.009735"], ["id", 1]]
  [1m[35m (70.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 0.2ms | ActiveRecord: 94.6ms | Allocations: 15088)


Started POST "/api/v1/create_order" for ::1 at 2020-11-25 14:39:05 +0700
Processing by Api::V1::OrdersController#create as JSON
  Parameters: {"order"=>{"order_stores"=>{"0"=>{"store_id"=>5, "order_products"=>{"0"=>{"product_variant_id"=>42, "shopping_cart_item_id"=>1}}}}}}
Filter chain halted as :authenticate_user! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 425)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:39:27 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"icvB9jaTvp-Bj0lamaFWDA\\\":{\\\"token\\\":\\\"$2a$10$1eeQy3GdQcoKFjgMoBEz5eYPM6y0p0.UeFMnECbN9kscrtql8LEpq\\\",\\\"expiry\\\":1669359670},\\\"yUQciMJIcNI26Vtw3Ld7-A\\\":{\\\"token\\\":\\\"$2a$10$uQLO/iR4BkohaD0oouTByufphI7kOdDrEoOD/sqNJdfm45gd8BTvO\\\",\\\"expiry\\\":1669359680},\\\"RcWbsm74RyZzrucQmJ6rAg\\\":{\\\"token\\\":\\\"$2a$10$sa2tSuWSdb1p.6Y.0CnsEeurWM9ukrMlulex0dFWub69vGK4Vy0i6\\\",\\\"expiry\\\":1669361938},\\\"1uKyGqet2xuT4_tP6SncAg\\\":{\\\"token\\\":\\\"$2a$10$jkYYuK89GLm2oIfcG4fWJeRjOIDehvjt4E5q1fKAA/wvA2lloFjgy\\\",\\\"expiry\\\":1669361944},\\\"Z98Ok2owK4Ex7BpKZTAztw\\\":{\\\"token\\\":\\\"$2a$10$XQCbOBXtdIThVzxlbB/D/uD5MTpc88iPQxQNjR/.VJOLfLQXYaHvu\\\",\\\"expiry\\\":1669361967}}\""], ["updated_at", "2020-11-25 07:39:27.226195"], ["id", 1]]
  [1m[35m (56.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 226], ["current_sign_in_at", "2020-11-25 07:39:27.286503"], ["last_sign_in_at", "2020-11-25 07:39:05.009242"], ["updated_at", "2020-11-25 07:39:27.286925"], ["id", 1]]
  [1m[35m (26.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 306ms (Views: 0.2ms | ActiveRecord: 84.7ms | Allocations: 15087)


Started POST "/api/v1/create_order" for ::1 at 2020-11-25 14:39:27 +0700
Processing by Api::V1::OrdersController#create as JSON
  Parameters: {"order"=>{"order_stores"=>{"0"=>{"store_id"=>5, "order_products"=>{"0"=>{"product_variant_id"=>42, "shopping_cart_item_id"=>1}}}}}}
Filter chain halted as :authenticate_user! rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 280)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:40:02 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"yUQciMJIcNI26Vtw3Ld7-A\\\":{\\\"token\\\":\\\"$2a$10$uQLO/iR4BkohaD0oouTByufphI7kOdDrEoOD/sqNJdfm45gd8BTvO\\\",\\\"expiry\\\":1669359680},\\\"RcWbsm74RyZzrucQmJ6rAg\\\":{\\\"token\\\":\\\"$2a$10$sa2tSuWSdb1p.6Y.0CnsEeurWM9ukrMlulex0dFWub69vGK4Vy0i6\\\",\\\"expiry\\\":1669361938},\\\"1uKyGqet2xuT4_tP6SncAg\\\":{\\\"token\\\":\\\"$2a$10$jkYYuK89GLm2oIfcG4fWJeRjOIDehvjt4E5q1fKAA/wvA2lloFjgy\\\",\\\"expiry\\\":1669361944},\\\"Z98Ok2owK4Ex7BpKZTAztw\\\":{\\\"token\\\":\\\"$2a$10$XQCbOBXtdIThVzxlbB/D/uD5MTpc88iPQxQNjR/.VJOLfLQXYaHvu\\\",\\\"expiry\\\":1669361967},\\\"_HyHPkZN7aMUoYrOYl3Kgw\\\":{\\\"token\\\":\\\"$2a$10$uf/IVvdkIAPwJTnUA.t9kepb5vF/JN8V2w9ut3jnMTdoYBCoKFFBe\\\",\\\"expiry\\\":1669362003}}\""], ["updated_at", "2020-11-25 07:40:03.137668"], ["id", 1]]
  [1m[35m (21.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 227], ["current_sign_in_at", "2020-11-25 07:40:03.163101"], ["last_sign_in_at", "2020-11-25 07:39:27.286503"], ["updated_at", "2020-11-25 07:40:03.163786"], ["id", 1]]
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 0.2ms | ActiveRecord: 29.5ms | Allocations: 25944)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 14:40:03 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 24], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 24], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:31:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:31:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 161ms (Views: 0.1ms | ActiveRecord: 14.1ms | Allocations: 39567)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:40:13 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"RcWbsm74RyZzrucQmJ6rAg\\\":{\\\"token\\\":\\\"$2a$10$sa2tSuWSdb1p.6Y.0CnsEeurWM9ukrMlulex0dFWub69vGK4Vy0i6\\\",\\\"expiry\\\":1669361938},\\\"1uKyGqet2xuT4_tP6SncAg\\\":{\\\"token\\\":\\\"$2a$10$jkYYuK89GLm2oIfcG4fWJeRjOIDehvjt4E5q1fKAA/wvA2lloFjgy\\\",\\\"expiry\\\":1669361944},\\\"Z98Ok2owK4Ex7BpKZTAztw\\\":{\\\"token\\\":\\\"$2a$10$XQCbOBXtdIThVzxlbB/D/uD5MTpc88iPQxQNjR/.VJOLfLQXYaHvu\\\",\\\"expiry\\\":1669361967},\\\"_HyHPkZN7aMUoYrOYl3Kgw\\\":{\\\"token\\\":\\\"$2a$10$uf/IVvdkIAPwJTnUA.t9kepb5vF/JN8V2w9ut3jnMTdoYBCoKFFBe\\\",\\\"expiry\\\":1669362003},\\\"BuzwtylF3ikDCawPp2zTnQ\\\":{\\\"token\\\":\\\"$2a$10$.mfzqsYKSw.7GAODg6.fwOiEHTHYiYp3XEJXmtKaw.gFnxT/mAim.\\\",\\\"expiry\\\":1669362013}}\""], ["updated_at", "2020-11-25 07:40:13.656298"], ["id", 1]]
  [1m[35m (42.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 228], ["current_sign_in_at", "2020-11-25 07:40:13.702031"], ["last_sign_in_at", "2020-11-25 07:40:03.163101"], ["updated_at", "2020-11-25 07:40:13.702537"], ["id", 1]]
  [1m[35m (13.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 290ms (Views: 0.2ms | ActiveRecord: 57.1ms | Allocations: 15088)


Started POST "/api/v1/create_order" for ::1 at 2020-11-25 14:40:13 +0700
Processing by Api::V1::OrdersController#create as JSON
  Parameters: {"order"=>{"order_stores"=>{"0"=>{"store_id"=>5, "order_products"=>{"0"=>{"product_variant_id"=>42, "shopping_cart_item_id"=>1}}}}}}
Filter chain halted as :authenticate_user! rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 405)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:41:17 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"1uKyGqet2xuT4_tP6SncAg\\\":{\\\"token\\\":\\\"$2a$10$jkYYuK89GLm2oIfcG4fWJeRjOIDehvjt4E5q1fKAA/wvA2lloFjgy\\\",\\\"expiry\\\":1669361944},\\\"Z98Ok2owK4Ex7BpKZTAztw\\\":{\\\"token\\\":\\\"$2a$10$XQCbOBXtdIThVzxlbB/D/uD5MTpc88iPQxQNjR/.VJOLfLQXYaHvu\\\",\\\"expiry\\\":1669361967},\\\"_HyHPkZN7aMUoYrOYl3Kgw\\\":{\\\"token\\\":\\\"$2a$10$uf/IVvdkIAPwJTnUA.t9kepb5vF/JN8V2w9ut3jnMTdoYBCoKFFBe\\\",\\\"expiry\\\":1669362003},\\\"BuzwtylF3ikDCawPp2zTnQ\\\":{\\\"token\\\":\\\"$2a$10$.mfzqsYKSw.7GAODg6.fwOiEHTHYiYp3XEJXmtKaw.gFnxT/mAim.\\\",\\\"expiry\\\":1669362013},\\\"uUigdrkiXNwm7PxwbRRUlA\\\":{\\\"token\\\":\\\"$2a$10$O699WsVnxNkWYg8rIJJnaOXMjdPikxK0eTIjlE0nAbLgTiTJuFU9G\\\",\\\"expiry\\\":1669362077}}\""], ["updated_at", "2020-11-25 07:41:17.513507"], ["id", 1]]
  [1m[35m (63.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 229], ["current_sign_in_at", "2020-11-25 07:41:17.581455"], ["last_sign_in_at", "2020-11-25 07:40:13.702031"], ["updated_at", "2020-11-25 07:41:17.582293"], ["id", 1]]
  [1m[35m (12.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.3ms | ActiveRecord: 77.3ms | Allocations: 15067)


Started POST "/api/v1/create_order" for ::1 at 2020-11-25 14:41:17 +0700
Processing by Api::V1::OrdersController#create as JSON
  Parameters: {"order"=>{"order_stores"=>{"0"=>{"store_id"=>5, "order_products"=>{"0"=>{"product_variant_id"=>42, "shopping_cart_item_id"=>1}}}}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/orders_controller.rb:15:in `create'
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/orders_controller.rb:15:in `create'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/orders_controller.rb:15:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/order.rb:41:in `block (2 levels) in set_total'
  [1m[36mShoppingCartItem Load (0.1ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/order.rb:41:in `block (2 levels) in set_total'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/orders_controller.rb:16:in `create'
Couldn't find ShoppingCartItem with 'id'=1
Completed 404 Not Found in 167ms (Views: 0.1ms | ActiveRecord: 8.5ms | Allocations: 43644)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:41:33 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"Z98Ok2owK4Ex7BpKZTAztw\\\":{\\\"token\\\":\\\"$2a$10$XQCbOBXtdIThVzxlbB/D/uD5MTpc88iPQxQNjR/.VJOLfLQXYaHvu\\\",\\\"expiry\\\":1669361967},\\\"_HyHPkZN7aMUoYrOYl3Kgw\\\":{\\\"token\\\":\\\"$2a$10$uf/IVvdkIAPwJTnUA.t9kepb5vF/JN8V2w9ut3jnMTdoYBCoKFFBe\\\",\\\"expiry\\\":1669362003},\\\"BuzwtylF3ikDCawPp2zTnQ\\\":{\\\"token\\\":\\\"$2a$10$.mfzqsYKSw.7GAODg6.fwOiEHTHYiYp3XEJXmtKaw.gFnxT/mAim.\\\",\\\"expiry\\\":1669362013},\\\"uUigdrkiXNwm7PxwbRRUlA\\\":{\\\"token\\\":\\\"$2a$10$O699WsVnxNkWYg8rIJJnaOXMjdPikxK0eTIjlE0nAbLgTiTJuFU9G\\\",\\\"expiry\\\":1669362077},\\\"kTajNZKf3T1g2D8eMrlsEA\\\":{\\\"token\\\":\\\"$2a$10$dke6lSOTo74mF2AwZBuei.OU4zGfl/K9B9Puugw16eAlP4QccpTRa\\\",\\\"expiry\\\":1669362094}}\""], ["updated_at", "2020-11-25 07:41:34.014336"], ["id", 1]]
  [1m[35m (52.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 230], ["current_sign_in_at", "2020-11-25 07:41:34.072307"], ["last_sign_in_at", "2020-11-25 07:41:17.581455"], ["updated_at", "2020-11-25 07:41:34.072934"], ["id", 1]]
  [1m[35m (59.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 355ms (Views: 0.3ms | ActiveRecord: 114.1ms | Allocations: 15067)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 14:41:34 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 24], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 24], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:31:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:31:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 104ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 9616)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:41:55 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"_HyHPkZN7aMUoYrOYl3Kgw\\\":{\\\"token\\\":\\\"$2a$10$uf/IVvdkIAPwJTnUA.t9kepb5vF/JN8V2w9ut3jnMTdoYBCoKFFBe\\\",\\\"expiry\\\":1669362003},\\\"BuzwtylF3ikDCawPp2zTnQ\\\":{\\\"token\\\":\\\"$2a$10$.mfzqsYKSw.7GAODg6.fwOiEHTHYiYp3XEJXmtKaw.gFnxT/mAim.\\\",\\\"expiry\\\":1669362013},\\\"uUigdrkiXNwm7PxwbRRUlA\\\":{\\\"token\\\":\\\"$2a$10$O699WsVnxNkWYg8rIJJnaOXMjdPikxK0eTIjlE0nAbLgTiTJuFU9G\\\",\\\"expiry\\\":1669362077},\\\"kTajNZKf3T1g2D8eMrlsEA\\\":{\\\"token\\\":\\\"$2a$10$dke6lSOTo74mF2AwZBuei.OU4zGfl/K9B9Puugw16eAlP4QccpTRa\\\",\\\"expiry\\\":1669362094},\\\"zG_mF-zei5BLb0730LtrHA\\\":{\\\"token\\\":\\\"$2a$10$AZsJrWPUnN0duo1faRKUjuvyeEqarVpTsQYO94BZAD6YyJGHAqz6m\\\",\\\"expiry\\\":1669362115}}\""], ["updated_at", "2020-11-25 07:41:55.726918"], ["id", 1]]
  [1m[35m (34.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 231], ["current_sign_in_at", "2020-11-25 07:41:55.765336"], ["last_sign_in_at", "2020-11-25 07:41:34.072307"], ["updated_at", "2020-11-25 07:41:55.765851"], ["id", 1]]
  [1m[35m (56.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 335ms (Views: 0.3ms | ActiveRecord: 93.1ms | Allocations: 15067)


Started POST "/api/v1/create_order" for ::1 at 2020-11-25 14:41:55 +0700
Processing by Api::V1::OrdersController#create as JSON
  Parameters: {"order"=>{"order_stores"=>{"0"=>{"store_id"=>5, "order_products"=>{"0"=>{"product_variant_id"=>42, "shopping_cart_item_id"=>18}}}}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/orders_controller.rb:15:in `create'
  [1m[36mStore Load (0.3ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/orders_controller.rb:15:in `create'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/orders_controller.rb:15:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/order.rb:41:in `block (2 levels) in set_total'
  [1m[36mShoppingCartItem Load (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/models/order.rb:41:in `block (2 levels) in set_total'
  [1m[36mOrder Create (35.6ms)[0m  [1m[32mINSERT INTO "orders" ("user_id", "total_price_items", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["total_price_items", "30000000.0"], ["created_at", "2020-11-25 07:41:55.954746"], ["updated_at", "2020-11-25 07:41:55.954746"]]
  ↳ app/controllers/api/v1/orders_controller.rb:16:in `create'
  [1m[36mOrderStore Create (0.4ms)[0m  [1m[32mINSERT INTO "order_stores" ("order_id", "store_id", "total", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["order_id", 1], ["store_id", 5], ["total", "30000000.0"], ["created_at", "2020-11-25 07:41:55.996495"], ["updated_at", "2020-11-25 07:41:55.996495"]]
  ↳ app/controllers/api/v1/orders_controller.rb:16:in `create'
  [1m[36mOrderProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "order_products" ("order_store_id", "product_variant_id", "price", "notes", "total", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["order_store_id", 1], ["product_variant_id", 42], ["price", "10000000.0"], ["notes", "Beli yang banyak 90"], ["total", "30000000.0"], ["quantity", 3], ["created_at", "2020-11-25 07:41:55.998801"], ["updated_at", "2020-11-25 07:41:55.998801"]]
  ↳ app/controllers/api/v1/orders_controller.rb:16:in `create'
  [1m[35m (17.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/orders_controller.rb:16:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 166ms (Views: 0.2ms | ActiveRecord: 55.7ms | Allocations: 14796)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:42:26 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"BuzwtylF3ikDCawPp2zTnQ\\\":{\\\"token\\\":\\\"$2a$10$.mfzqsYKSw.7GAODg6.fwOiEHTHYiYp3XEJXmtKaw.gFnxT/mAim.\\\",\\\"expiry\\\":1669362013},\\\"uUigdrkiXNwm7PxwbRRUlA\\\":{\\\"token\\\":\\\"$2a$10$O699WsVnxNkWYg8rIJJnaOXMjdPikxK0eTIjlE0nAbLgTiTJuFU9G\\\",\\\"expiry\\\":1669362077},\\\"kTajNZKf3T1g2D8eMrlsEA\\\":{\\\"token\\\":\\\"$2a$10$dke6lSOTo74mF2AwZBuei.OU4zGfl/K9B9Puugw16eAlP4QccpTRa\\\",\\\"expiry\\\":1669362094},\\\"zG_mF-zei5BLb0730LtrHA\\\":{\\\"token\\\":\\\"$2a$10$AZsJrWPUnN0duo1faRKUjuvyeEqarVpTsQYO94BZAD6YyJGHAqz6m\\\",\\\"expiry\\\":1669362115},\\\"ANfvwY6uL4-Yn_GSnXzZPg\\\":{\\\"token\\\":\\\"$2a$10$K0b1XDeq4SpuSiD5/8RwI.VQlzusUHDNVHhXE3UUy2SuCai0a8rsG\\\",\\\"expiry\\\":1669362146}}\""], ["updated_at", "2020-11-25 07:42:26.412573"], ["id", 1]]
  [1m[35m (48.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 232], ["current_sign_in_at", "2020-11-25 07:42:26.464761"], ["last_sign_in_at", "2020-11-25 07:41:55.765336"], ["updated_at", "2020-11-25 07:42:26.465272"], ["id", 1]]
  [1m[35m (47.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 327ms (Views: 0.4ms | ActiveRecord: 98.0ms | Allocations: 15069)


Started GET "/api/v1/order_list" for ::1 at 2020-11-25 14:42:26 +0700
Processing by Api::V1::OrdersController#index as JSON
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/orders_controller.rb:9:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "order_stores"."id" FROM "order_stores" WHERE "order_stores"."order_id" = $1[0m  [["order_id", 1]]
  ↳ app/controllers/api/v1/orders_controller.rb:9:in `index'
  [1m[36mOrderStore Load (0.2ms)[0m  [1m[34mSELECT "order_stores".* FROM "order_stores" WHERE "order_stores"."order_id" = $1[0m  [["order_id", 1]]
  ↳ app/controllers/api/v1/orders_controller.rb:9:in `index'
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_store_id" = $1[0m  [["order_store_id", 1]]
  ↳ app/controllers/api/v1/orders_controller.rb:9:in `index'
  [1m[36mProductVariant Load (0.3ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/orders_controller.rb:9:in `index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:21:in `block in <class:OrderProductSerializer>'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 110ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 16972)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:46:27 +0700
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"uUigdrkiXNwm7PxwbRRUlA\\\":{\\\"token\\\":\\\"$2a$10$O699WsVnxNkWYg8rIJJnaOXMjdPikxK0eTIjlE0nAbLgTiTJuFU9G\\\",\\\"expiry\\\":1669362077},\\\"kTajNZKf3T1g2D8eMrlsEA\\\":{\\\"token\\\":\\\"$2a$10$dke6lSOTo74mF2AwZBuei.OU4zGfl/K9B9Puugw16eAlP4QccpTRa\\\",\\\"expiry\\\":1669362094},\\\"zG_mF-zei5BLb0730LtrHA\\\":{\\\"token\\\":\\\"$2a$10$AZsJrWPUnN0duo1faRKUjuvyeEqarVpTsQYO94BZAD6YyJGHAqz6m\\\",\\\"expiry\\\":1669362115},\\\"ANfvwY6uL4-Yn_GSnXzZPg\\\":{\\\"token\\\":\\\"$2a$10$K0b1XDeq4SpuSiD5/8RwI.VQlzusUHDNVHhXE3UUy2SuCai0a8rsG\\\",\\\"expiry\\\":1669362146},\\\"ggzeSYS7E2izhip2tOiqHA\\\":{\\\"token\\\":\\\"$2a$10$eqEBWnXqh9bCofT1zqjqKuxXI9nYFhQvl2uh5jY9RP.JQHHsmqu6O\\\",\\\"expiry\\\":1669362387}}\""], ["updated_at", "2020-11-25 07:46:27.291593"], ["id", 1]]
  [1m[35m (23.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 233], ["current_sign_in_at", "2020-11-25 07:46:27.328216"], ["last_sign_in_at", "2020-11-25 07:42:26.464761"], ["updated_at", "2020-11-25 07:46:27.328728"], ["id", 1]]
  [1m[35m (14.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 300ms (Views: 0.4ms | ActiveRecord: 43.9ms | Allocations: 27589)


Started GET "/api/v1/carts" for ::1 at 2020-11-25 14:46:27 +0700
Processing by Api::V1::CartsController#index as JSON
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "shopping_cart_items"."id" FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 24], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mStore Load (0.2ms)[0m  [1m[34mSELECT "stores".* FROM "stores" WHERE "stores"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mShoppingCartItem Load (0.2ms)[0m  [1m[34mSELECT "shopping_cart_items".* FROM "shopping_cart_items" WHERE "shopping_cart_items"."owner_id" = $1 AND "shopping_cart_items"."owner_type" = $2[0m  [["owner_id", 24], ["owner_type", "Cart"]]
  ↳ app/controllers/api/v1/carts_controller.rb:48:in `index'
  [1m[36mProductVariant Load (0.2ms)[0m  [1m[34mSELECT "product_variants".* FROM "product_variants" WHERE "product_variants"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:31:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/shopping_cart_item_serializer.rb:31:in `block in <class:ShoppingCartItemSerializer>'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 150ms (Views: 0.1ms | ActiveRecord: 12.8ms | Allocations: 39534)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:46:55 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"kTajNZKf3T1g2D8eMrlsEA\\\":{\\\"token\\\":\\\"$2a$10$dke6lSOTo74mF2AwZBuei.OU4zGfl/K9B9Puugw16eAlP4QccpTRa\\\",\\\"expiry\\\":1669362094},\\\"zG_mF-zei5BLb0730LtrHA\\\":{\\\"token\\\":\\\"$2a$10$AZsJrWPUnN0duo1faRKUjuvyeEqarVpTsQYO94BZAD6YyJGHAqz6m\\\",\\\"expiry\\\":1669362115},\\\"ANfvwY6uL4-Yn_GSnXzZPg\\\":{\\\"token\\\":\\\"$2a$10$K0b1XDeq4SpuSiD5/8RwI.VQlzusUHDNVHhXE3UUy2SuCai0a8rsG\\\",\\\"expiry\\\":1669362146},\\\"ggzeSYS7E2izhip2tOiqHA\\\":{\\\"token\\\":\\\"$2a$10$eqEBWnXqh9bCofT1zqjqKuxXI9nYFhQvl2uh5jY9RP.JQHHsmqu6O\\\",\\\"expiry\\\":1669362387},\\\"YJkfqOz7nZYNh6xCXrF_Ng\\\":{\\\"token\\\":\\\"$2a$10$C8wGoYfpkfnEkIk449zACO8P4mpqVc1bvN7KHaaLX9eILJLTrDNk2\\\",\\\"expiry\\\":1669362415}}\""], ["updated_at", "2020-11-25 07:46:55.538447"], ["id", 1]]
  [1m[35m (34.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 234], ["current_sign_in_at", "2020-11-25 07:46:55.577067"], ["last_sign_in_at", "2020-11-25 07:46:27.328216"], ["updated_at", "2020-11-25 07:46:55.577741"], ["id", 1]]
  [1m[35m (61.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 322ms (Views: 0.3ms | ActiveRecord: 97.6ms | Allocations: 15089)


Started POST "/api/v1/users/sign_in" for ::1 at 2020-11-25 14:46:55 +0700
Processing by Api::V1::SessionsController#create as */*
  Parameters: {"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"user1@example.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "user1@example.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."uid" = $1 AND "users"."id" != $2 AND "users"."provider" = $3 LIMIT $4[0m  [["uid", "user1@example.com"], ["id", 1], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "\"{\\\"zG_mF-zei5BLb0730LtrHA\\\":{\\\"token\\\":\\\"$2a$10$AZsJrWPUnN0duo1faRKUjuvyeEqarVpTsQYO94BZAD6YyJGHAqz6m\\\",\\\"expiry\\\":1669362115},\\\"ANfvwY6uL4-Yn_GSnXzZPg\\\":{\\\"token\\\":\\\"$2a$10$K0b1XDeq4SpuSiD5/8RwI.VQlzusUHDNVHhXE3UUy2SuCai0a8rsG\\\",\\\"expiry\\\":1669362146},\\\"ggzeSYS7E2izhip2tOiqHA\\\":{\\\"token\\\":\\\"$2a$10$eqEBWnXqh9bCofT1zqjqKuxXI9nYFhQvl2uh5jY9RP.JQHHsmqu6O\\\",\\\"expiry\\\":1669362387},\\\"YJkfqOz7nZYNh6xCXrF_Ng\\\":{\\\"token\\\":\\\"$2a$10$C8wGoYfpkfnEkIk449zACO8P4mpqVc1bvN7KHaaLX9eILJLTrDNk2\\\",\\\"expiry\\\":1669362415},\\\"2XUmhAhXLZzAbCNokW1DGA\\\":{\\\"token\\\":\\\"$2a$10$.4nLQS1IPjhQTkV7VsF2Gu3v3bCgY0g5pUsTUwcVX8fbFGdi0L.U2\\\",\\\"expiry\\\":1669362415}}\""], ["updated_at", "2020-11-25 07:46:55.899291"], ["id", 1]]
  [1m[35m (30.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["sign_in_count", 235], ["current_sign_in_at", "2020-11-25 07:46:55.934278"], ["last_sign_in_at", "2020-11-25 07:46:55.577067"], ["updated_at", "2020-11-25 07:46:55.934934"], ["id", 1]]
  [1m[35m (23.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 302ms (Views: 0.2ms | ActiveRecord: 55.6ms | Allocations: 15066)


